(this["webpackJsonpfree-roam"]=this["webpackJsonpfree-roam"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var d=n(1),r=n.n(d),a=n(27),l=n.n(a),i=n(3),c=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,120)).then((function(t){var n=t.getCLS,d=t.getFID,r=t.getFCP,a=t.getLCP,l=t.getTTFB;n(e),d(e),r(e),a(e),l(e)}))},o=n(7),s=n(14),u=n(116),p=(n(57),n(6)),b=(n(58),n(59),n(29)),h=n(5),f=n(20),I=n(8),j=n(15),x=n.n(j),k=n(40),v=n.n(k);x.a.extend(v.a);var O="MMMM Do, YYYY",y="YYYY-MM-DD",g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=void 0===t?Object(I.c)(8):t,d=e.parentId,r=void 0===d?null:d,a=e.text,l=e.childrenIds,i=void 0===l?[]:l,c=e.created,o=void 0===c?Date.now():c,s=e.dailyNote,u=void 0===s?null:s,p=arguments.length>1?arguments[1]:void 0,b=!r;if(b&&!u){var h=x()(a,O);h.isValid()&&(u=h.format(y))}if(u)n=u;else if(n in p)for(;n in p;)n=Object(I.c)(8);return{id:n,parentId:r,text:a,childrenIds:i,created:o,updated:null,dailyNote:u}},m=function e(t,n){return t.parentId?e(n[t.parentId],n):t},N=function(e,t){var n=m(e,t);return e.parentId===n.id&&n.childrenIds[0]===e.id},w=function(e,t){if(null===e.parentId)return null;var n=t[e.parentId],d=n.childrenIds.indexOf(e.id);return d===n.childrenIds.length-1?null:t[n.childrenIds[d+1]]},S=function e(t,n){return t.childrenIds.length?e(n[t.childrenIds.slice(-1)],n):t},C=function(e,t){if(!e.parentId||N(e,t))return null;var n=function(e,t){if(null===e.parentId)return null;var n=t[e.parentId],d=n.childrenIds.indexOf(e.id);return d<1?null:t[n.childrenIds[d-1]]}(e,t);return n?n.childrenIds.length?S(n,t):n:t[e.parentId]},B=function e(t,n){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null===t.parentId)return null;if(d&&t.childrenIds.length)return n[t.childrenIds[0]];var r=w(t,n);return r||e(n[t.parentId],n,d=!1)},P=function e(t,n){var d=t.childrenIds,r=Object(f.a)(t,["childrenIds"]);return d.length?Object(h.a)(Object(h.a)({},r),{},{children:d.map((function(t){var d=n[t];return e(d,n)}))}):r},A=function e(t,n){var d;return t.childrenIds.length?(d=[t.id]).concat.apply(d,Object(b.a)(t.childrenIds.map((function(t){return e(n[t],n)})))):t.id},q=n(106),R=n(107),M=(n(60),Object(I.b)({name:"viewPane",initialState:{views:[{type:"page",blockId:"efgh"}]},reducers:{setViewPaneState:function(e,t){var n=t.payload;if(n&&"views"in n)return n},pushView:function(e,t){var n=t.payload,d=n.type,r=n.blockId;e.views.find((function(e){return e.type===d&&e.blockId===r}))||e.views.unshift(t.payload)},popView:function(e,t){var n=t.payload,d=n.type,r=n.blockId;e.views=e.views.filter((function(e){return"all"!==d&&e.type!==d||e.blockId!==r}))}}})),L=M.actions,z=L.setViewPaneState,Y=L.pushView,F=L.popView,_=M.reducer,H=n(0),T=function(e){var t=e.blockId,n=e.isPage,d=void 0===n||n,r=e.children,a=e.noStyling,l=e.afterClick,c=Object(f.a)(e,["blockId","isPage","children","noStyling","afterClick"]),o=Object(i.b)(),u="/page/".concat(t);return Object(H.jsx)(s.b,Object(h.a)(Object(h.a)({to:u,onClick:function(e){e.shiftKey&&(e.preventDefault(),o(Y({type:d?"page":"block",blockId:t}))),l&&l(),e.stopPropagation()},className:"block-link".concat(a?" block-link--no-styling":"")},c),{},{children:r}))},Q=function(e){var t=e.block,n=e.isMain,r=Object(d.useState)(!0),a=Object(o.a)(r,2),l=a[0],c=a[1],s=Object(d.useState)(!1),u=Object(o.a)(s,2),p=u[0],b=u[1],h=Object(d.useState)(null),f=Object(o.a)(h,2),I=f[0],j=f[1],x=Object(i.c)((function(e){return e.links.to[t.id]})),k=Object(i.c)((function(e){return e.blocks}));return Object(H.jsxs)("div",{children:[null===t.parentId&&x&&x.length>0&&n&&Object(H.jsxs)("div",{className:"references references--linked",children:[Object(H.jsxs)("span",{className:"references__toggle no-select",onClick:function(){return c((function(e){return!e}))},children:[l?Object(H.jsx)(q.a,{color:"white",size:12}):Object(H.jsx)(R.a,{color:"white",size:12}),Object(H.jsxs)("b",{children:[x.length," Linked References"]})]}),l&&function(){if(!t.parentId&&x&&x.length)return x.map((function(e){if(!(e in k))return null;var t=k[e],d=m(t,k);return Object(H.jsxs)("div",{children:[Object(H.jsx)(T,{blockId:d.id,children:Object(H.jsx)("h5",{children:d.text})}),Object(H.jsx)("div",{className:"reference-container",children:Object(H.jsx)(Ne,{blockId:e,isRoot:!1,isMain:n,fold:!0,showBreadcrumbs:!0})})]},e)}))}()]}),null===t.parentId&&n&&Object(H.jsxs)("div",{className:"references references--unlinked",children:[Object(H.jsxs)("span",{className:"references__toggle no-select",onClick:function(e){p?b(!1):(b(!0),j(function(e){var t=new RegExp("(?<![\\[\\w])".concat(e,"(?![\\[\\w]+)"),"gi");return Object.values(k).filter((function(e){return e.parentId&&t.test(e.text)}))}(t.text)))},children:[p?Object(H.jsx)(q.a,{color:"white",size:12}):Object(H.jsx)(R.a,{color:"white",size:12}),Object(H.jsxs)("b",{children:[I&&I.length?I.length:""," Unlinked References"]})]}),p&&function(){if(!t.parentId&&p)return I.length?I.map((function(e){var t=m(e,k);return Object(H.jsxs)("div",{children:[Object(H.jsx)(T,{blockId:t.id,children:Object(H.jsx)("h5",{children:t.text})}),Object(H.jsx)("div",{className:"reference-container",children:Object(H.jsx)(Ne,{blockId:e.id,isRoot:!1,isMain:n,fold:!0,showBreadcrumbs:!0})})]},e.id)})):Object(H.jsx)("p",{children:"No unlinked references"})}()]})]})},X=(n(65),n(46)),G=n(24),J=n.n(G),E=n(19),D=function(e,t){var n,d=e.matchAll(/\[\[([^\]]*(?:\]\])?)\]\]/gm),r=!1,a=null,l=Object(E.a)(d);try{for(l.s();!(n=l.n()).done;){var i=n.value,c=i[0],o=i.index,s=o+c.length-2;if(r=o+2<=t&&t<=s)return{startBracketIndex:o,endBracketIndex:s,caretInBrackets:r,textInBrackets:a=i[1]}}}catch(u){l.e(u)}finally{l.f()}return{startBracketIndex:-1,endBracketIndex:-1,caretInBrackets:r,textInBrackets:a}},V={abcd:{id:"abcd",parentId:null,text:"Hello World",childrenIds:["ijkl","mnop"]},efgh:{id:"efgh",parentId:null,text:"Lorem ipsum",childrenIds:["qrst"]},ijkl:{id:"ijkl",parentId:"abcd",text:"Normal *italics* **bold** ***bold italics***",childrenIds:[]},mnop:{id:"mnop",parentId:"abcd",text:"Link to [[Lorem ipsum]]",childrenIds:["uvwx","a1"]},qrst:{id:"qrst",parentId:"efgh",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",childrenIds:[]},uvwx:{id:"uvwx",parentId:"mnop",text:"I'm a third layer block",childrenIds:["a2"]},a1:{id:"a1",parentId:"mnop",text:"I'm another third layer block",childrenIds:[]},a2:{id:"a2",parentId:"uvwx",text:"I'm a fourth layer block",childrenIds:[]},"2021-02-17":{id:"2021-02-17",parentId:null,text:"February 17th, 2021",childrenIds:["a4"],created:1613546102e3,updated:null,dailyNote:"2021-02-17"},a4:{id:"a4",parentId:"a3",text:"Click here to edit",childrenIds:[]},plXnqf7B:{id:"plXnqf7B",parentId:"welcome",text:"Welcome to Free-Roam!",childrenIds:[],created:1613962018019,updated:1613962047962,dailyNote:null},welcome:{id:"welcome",parentId:null,text:"Welcome",childrenIds:["plXnqf7B","0NOhIzxB","H-O00XW0","64SNNX17"],created:1613962018016,updated:null,dailyNote:null},"0NOhIzxB":{id:"0NOhIzxB",parentId:"welcome",text:"Take a look around; you can check out:",childrenIds:["pKs_vxuk","ANZddpXT","NMb4Yf1z"],created:1613962048878,updated:1613962057083,dailyNote:null},pKs_vxuk:{id:"pKs_vxuk",parentId:"0NOhIzxB",text:"[Daily Notes](#/daily-notes) (like a journal)",childrenIds:[],created:1613962057397,updated:1613962069453,dailyNote:null},ANZddpXT:{id:"ANZddpXT",parentId:"0NOhIzxB",text:"All of the [current pages](#/all-pages)",childrenIds:[],created:1613962070989,updated:1613962076848,dailyNote:null},NMb4Yf1z:{id:"NMb4Yf1z",parentId:"0NOhIzxB",text:"A sample page: [[Hello World]]",childrenIds:["nbGfXXqe"],created:1613962077493,updated:1613962081636,dailyNote:null},nbGfXXqe:{id:"nbGfXXqe",parentId:"NMb4Yf1z",text:"Shift+click to open in side bar",childrenIds:[],created:1613962082245,updated:1613962090754,dailyNote:null},"H-O00XW0":{id:"H-O00XW0",parentId:"welcome",text:"Be sure to save your work if you wish to persist it",childrenIds:["mPiN8jkq"],created:1613962091917,updated:1613962107536,dailyNote:null},mPiN8jkq:{id:"mPiN8jkq",parentId:"H-O00XW0",text:"Save/load buttons in top left",childrenIds:[],created:1613962107877,updated:1613962114571,dailyNote:null},"64SNNX17":{id:"64SNNX17",parentId:"welcome",text:"Enjoy! Check out [the repo](https://github.com/cofinley/free-roam) to learn more and/or contribute!",childrenIds:[],created:1613962115053,updated:1613962120478,dailyNote:null},CYGv8EoI:{id:"CYGv8EoI",parentId:"qoGY8XCw",text:"[[v0.8.0]] - [[March 8th, 2021]]",childrenIds:["rrxpq9EB","APdozas6"],created:1615151525499,updated:1615241546978,dailyNote:null},qoGY8XCw:{id:"qoGY8XCw",parentId:null,text:"Changelog",childrenIds:["CYGv8EoI","Q-52Ly5Z","hbwAGc0n","LZcy3J05","aHlHRw0J","zh5H9xj_","cJikzeh9","65Whw5OF","osJqlMOc","jLc-SlCe","ye0mPSj4"],created:1615151525497,updated:null,dailyNote:null},knSL6JxF:{id:"knSL6JxF",parentId:"U0wzj61A",text:"Click here to edit",childrenIds:[],created:1615151540801,updated:null,dailyNote:null},U0wzj61A:{id:"U0wzj61A",parentId:null,text:"v0.8.0",childrenIds:["knSL6JxF"],created:1615151540799,updated:null,dailyNote:null},rrxpq9EB:{id:"rrxpq9EB",parentId:"CYGv8EoI",text:"**Added**",childrenIds:["aYDvZZDa","-G0SPlgl"],created:1615151549773,updated:1615151554208,dailyNote:null},aYDvZZDa:{id:"aYDvZZDa",parentId:"rrxpq9EB",text:"Collapsible panes",childrenIds:[],created:1615151554741,updated:1615151560593,dailyNote:null},"Q-52Ly5Z":{id:"Q-52Ly5Z",parentId:"qoGY8XCw",text:"[[v0.7.0]] - [[March 5th, 2021]]",childrenIds:["5v0LPIcJ","NmXAqdVJ"],created:1615151561373,updated:1615241553633,dailyNote:null},x4tIQpko:{id:"x4tIQpko",parentId:"2Aqvr2ow",text:"Click here to edit",childrenIds:[],created:1615151568732,updated:null,dailyNote:null},"2Aqvr2ow":{id:"2Aqvr2ow",parentId:null,text:"v0.7.0",childrenIds:["x4tIQpko"],created:1615151568730,updated:null,dailyNote:null},"5v0LPIcJ":{id:"5v0LPIcJ",parentId:"Q-52Ly5Z",text:"**Added**",childrenIds:["mO6iGrvz"],created:1615151575750,updated:1615151579131,dailyNote:null},dfaf5wnb:{id:"dfaf5wnb",parentId:"2021-03-05",text:"Click here to edit",childrenIds:[],created:1615151575815,updated:null,dailyNote:null},"2021-03-05":{id:"2021-03-05",parentId:null,text:"March 5th, 2021",childrenIds:["dfaf5wnb"],created:1615151575815,updated:null,dailyNote:"2021-03-05"},mO6iGrvz:{id:"mO6iGrvz",parentId:"5v0LPIcJ",text:"Ability to use up/down arrow keys to navigate between blocks",childrenIds:[],created:1615151579517,updated:1615151589444,dailyNote:null},NmXAqdVJ:{id:"NmXAqdVJ",parentId:"Q-52Ly5Z",text:"**Fixed**",childrenIds:["B0euIf5P"],created:1615151590286,updated:1615151600634,dailyNote:null},B0euIf5P:{id:"B0euIf5P",parentId:"NmXAqdVJ",text:"Small editing bugs",childrenIds:[],created:1615151601205,updated:1615151604976,dailyNote:null},hbwAGc0n:{id:"hbwAGc0n",parentId:"qoGY8XCw",text:"[[v0.6.1]] - [[March 3rd, 2021]]",childrenIds:["nRqacq7j","LIk2h4jD"],created:1615151610278,updated:1615241556995,dailyNote:null},U_BM_Wui:{id:"U_BM_Wui",parentId:"PHWZ0YQa",text:"Click here to edit",childrenIds:[],created:1615151618368,updated:null,dailyNote:null},PHWZ0YQa:{id:"PHWZ0YQa",parentId:null,text:"v0.6.1",childrenIds:["U_BM_Wui"],created:1615151618366,updated:null,dailyNote:null},nRqacq7j:{id:"nRqacq7j",parentId:"hbwAGc0n",text:"**Added**",childrenIds:["ASDbCeJC"],created:1615151627277,updated:1615151631388,dailyNote:null},Zoton0HW:{id:"Zoton0HW",parentId:"2021-03-03",text:"Click here to edit",childrenIds:[],created:1615151627364,updated:null,dailyNote:null},"2021-03-03":{id:"2021-03-03",parentId:null,text:"March 3rd, 2021",childrenIds:["Zoton0HW"],created:1615151627362,updated:null,dailyNote:"2021-03-03"},ASDbCeJC:{id:"ASDbCeJC",parentId:"nRqacq7j",text:"Unit/integration tests",childrenIds:[],created:1615151633493,updated:1615151637391,dailyNote:null},LIk2h4jD:{id:"LIk2h4jD",parentId:"hbwAGc0n",text:"**Fixed**",childrenIds:["nI6sjZEh","sWA5LPEl"],created:1615151646957,updated:1615151650254,dailyNote:null},nI6sjZEh:{id:"nI6sjZEh",parentId:"LIk2h4jD",text:"Searching with \\[\\[link brackets\\]\\]",childrenIds:[],created:1615151651172,updated:1615151664214,dailyNote:null},sWA5LPEl:{id:"sWA5LPEl",parentId:"LIk2h4jD",text:"Bug where adding a link in the main view would break the app if the same block was open in the sidebar",childrenIds:[],created:1615151666021,updated:1615151676716,dailyNote:null},LZcy3J05:{id:"LZcy3J05",parentId:"qoGY8XCw",text:"[[v0.6.0]] - [[February 23rd, 2021]]",childrenIds:["QRq7Iijd","xpkrOqmn"],created:1615151680838,updated:1615241562711,dailyNote:null},"28UYA3QT":{id:"28UYA3QT",parentId:"n8zdS3M6",text:"Click here to edit",childrenIds:[],created:1615151688570,updated:null,dailyNote:null},n8zdS3M6:{id:"n8zdS3M6",parentId:null,text:"v0.6.0",childrenIds:["28UYA3QT"],created:1615151688569,updated:null,dailyNote:null},QRq7Iijd:{id:"QRq7Iijd",parentId:"LZcy3J05",text:"**Added**",childrenIds:["fcx0cCvG"],created:1615151702501,updated:1615151706620,dailyNote:null},XMhm2bRA:{id:"XMhm2bRA",parentId:"2021-02-23",text:"Click here to edit",childrenIds:[],created:1615151702615,updated:null,dailyNote:null},"2021-02-23":{id:"2021-02-23",parentId:null,text:"February 23rd, 2021",childrenIds:["XMhm2bRA"],created:1615151702613,updated:null,dailyNote:"2021-02-23"},fcx0cCvG:{id:"fcx0cCvG",parentId:"QRq7Iijd",text:"'Show references' button for view pane sections",childrenIds:[],created:1615151706796,updated:1615151716454,dailyNote:null},xpkrOqmn:{id:"xpkrOqmn",parentId:"LZcy3J05",text:"**Changed**",childrenIds:["Xb1qVATK"],created:1615151716756,updated:1615151721385,dailyNote:null},Xb1qVATK:{id:"Xb1qVATK",parentId:"xpkrOqmn",text:"Linked/unlinked reference controls behavior, styling",childrenIds:[],created:1615151721780,updated:1615151738847,dailyNote:null},aHlHRw0J:{id:"aHlHRw0J",parentId:"qoGY8XCw",text:"[[v0.5.0]] - [[February 22nd, 2021]]",childrenIds:["BQKXI_WC","DLV049Kx","6vRV-qni"],created:1615151742357,updated:1615241566336,dailyNote:null},WvrzSZxd:{id:"WvrzSZxd",parentId:"GrVjOqq0",text:"Click here to edit",childrenIds:[],created:1615151753460,updated:null,dailyNote:null},GrVjOqq0:{id:"GrVjOqq0",parentId:null,text:"v0.5.0",childrenIds:["WvrzSZxd"],created:1615151753459,updated:null,dailyNote:null},BQKXI_WC:{id:"BQKXI_WC",parentId:"aHlHRw0J",text:"**Added**",childrenIds:["ce6qtsCS"],created:1615151764900,updated:1615151769070,dailyNote:null},"8ma9KyU9":{id:"8ma9KyU9",parentId:"2021-02-22",text:"Click here to edit",childrenIds:[],created:1615151765020,updated:null,dailyNote:null},"2021-02-22":{id:"2021-02-22",parentId:null,text:"February 22nd, 2021",childrenIds:["8ma9KyU9"],created:1615151765019,updated:null,dailyNote:"2021-02-22"},ce6qtsCS:{id:"ce6qtsCS",parentId:"BQKXI_WC",text:"Welcome page",childrenIds:[],created:1615151769340,updated:1615151772726,dailyNote:null},DLV049Kx:{id:"DLV049Kx",parentId:"aHlHRw0J",text:"**Changed**",childrenIds:["H26Q1rNJ","AkNZvm6T","4kT4k6AB"],created:1615151772973,updated:1615151778766,dailyNote:null},H26Q1rNJ:{id:"H26Q1rNJ",parentId:"DLV049Kx",text:"Shorter page Ids",childrenIds:[],created:1615151779396,updated:1615151786911,dailyNote:null},AkNZvm6T:{id:"AkNZvm6T",parentId:"DLV049Kx",text:"Link color",childrenIds:["Jeu_zI_d"],created:1615151787236,updated:1615151789774,dailyNote:null},Jeu_zI_d:{id:"Jeu_zI_d",parentId:"AkNZvm6T",text:"Something with AAA contrast",childrenIds:[],created:1615151791484,updated:1615151795773,dailyNote:null},"4kT4k6AB":{id:"4kT4k6AB",parentId:"DLV049Kx",text:"Clarify/condense readme",childrenIds:[],created:1615151796132,updated:1615151811399,dailyNote:null},"6vRV-qni":{id:"6vRV-qni",parentId:"aHlHRw0J",text:"**Fixed**",childrenIds:["Hz2cnxGo"],created:1615151816396,updated:1615151823078,dailyNote:null},Hz2cnxGo:{id:"Hz2cnxGo",parentId:"6vRV-qni",text:"References",childrenIds:["zcFTghP_","GTSiOiPB","BWvQJEpx"],created:1615151825428,updated:1615151827462,dailyNote:null},zcFTghP_:{id:"zcFTghP_",parentId:"Hz2cnxGo",text:"Link to page on reference heading, not the block",childrenIds:[],created:1615151828596,updated:1615151840213,dailyNote:null},GTSiOiPB:{id:"GTSiOiPB",parentId:"Hz2cnxGo",text:"Styling",childrenIds:[],created:1615151840843,updated:1615151842695,dailyNote:null},BWvQJEpx:{id:"BWvQJEpx",parentId:"Hz2cnxGo",text:"Breadcrumbs",childrenIds:[],created:1615151843124,updated:1615151845279,dailyNote:null},zh5H9xj_:{id:"zh5H9xj_",parentId:"qoGY8XCw",text:"[[v0.4.0]] - [[February 20th, 2021]]",childrenIds:["_NgKanaH","ykaw0vG-","MkE63b42"],created:1615151851516,updated:1615241570549,dailyNote:null},SHEu5mSn:{id:"SHEu5mSn",parentId:"h3QIVAwN",text:"Click here to edit",childrenIds:[],created:1615151856750,updated:null,dailyNote:null},h3QIVAwN:{id:"h3QIVAwN",parentId:null,text:"v0.4.0",childrenIds:["SHEu5mSn"],created:1615151856749,updated:null,dailyNote:null},_NgKanaH:{id:"_NgKanaH",parentId:"zh5H9xj_",text:"**Added**",childrenIds:["oNR59Nt6"],created:1615151877364,updated:1615151883631,dailyNote:null},qxIrQMXH:{id:"qxIrQMXH",parentId:"2021-02-20",text:"Click here to edit",childrenIds:[],created:1615151877619,updated:null,dailyNote:null},"2021-02-20":{id:"2021-02-20",parentId:null,text:"February 20th, 2021",childrenIds:["qxIrQMXH"],created:1615151877617,updated:null,dailyNote:"2021-02-20"},oNR59Nt6:{id:"oNR59Nt6",parentId:"_NgKanaH",text:"All pages view",childrenIds:[],created:1615151884107,updated:1615151891717,dailyNote:null},"ykaw0vG-":{id:"ykaw0vG-",parentId:"zh5H9xj_",text:"**Changed**",childrenIds:["mRMlNbtc","2Jff6FfY","VwYwAGRr"],created:1615151895571,updated:1615151899030,dailyNote:null},mRMlNbtc:{id:"mRMlNbtc",parentId:"ykaw0vG-",text:"View pane can now open just a page's references if desired (used for all pages mentions",childrenIds:[],created:1615151899491,updated:1615151911306,dailyNote:null},"2Jff6FfY":{id:"2Jff6FfY",parentId:"ykaw0vG-",text:"Saving can now happen in bulk, all saved artifacts are zipped up now",childrenIds:[],created:1615151912355,updated:1615151915014,dailyNote:null},VwYwAGRr:{id:"VwYwAGRr",parentId:"ykaw0vG-",text:"Seafoam green link color",childrenIds:[],created:1615151915675,updated:1615151919885,dailyNote:null},MkE63b42:{id:"MkE63b42",parentId:"zh5H9xj_",text:"**Fixed**",childrenIds:["tCuoXsgJ"],created:1615151920683,updated:1615151924133,dailyNote:null},tCuoXsgJ:{id:"tCuoXsgJ",parentId:"MkE63b42",text:"Various bug fixes",childrenIds:[],created:1615151924571,updated:1615151928190,dailyNote:null},cJikzeh9:{id:"cJikzeh9",parentId:"qoGY8XCw",text:"[[v0.3.0]] - [[February 19th, 2021]]",childrenIds:["MTEYkWg4","orng4Tbx"],created:1615151995763,updated:1615241573546,dailyNote:null},iQLTYbmZ:{id:"iQLTYbmZ",parentId:"lOYo9YNv",text:"Click here to edit",childrenIds:[],created:1615152001477,updated:null,dailyNote:null},lOYo9YNv:{id:"lOYo9YNv",parentId:null,text:"v0.3.0",childrenIds:["iQLTYbmZ"],created:1615152001474,updated:null,dailyNote:null},MTEYkWg4:{id:"MTEYkWg4",parentId:"cJikzeh9",text:"**Added**",childrenIds:["RWUiSaqJ"],created:1615152014338,updated:1615152313396,dailyNote:null},hn3EsXvI:{id:"hn3EsXvI",parentId:"2021-02-19",text:"Click here to edit",childrenIds:[],created:1615152014569,updated:null,dailyNote:null},"2021-02-19":{id:"2021-02-19",parentId:null,text:"February 19th, 2021",childrenIds:["hn3EsXvI"],created:1615152014566,updated:null,dailyNote:"2021-02-19"},RWUiSaqJ:{id:"RWUiSaqJ",parentId:"MTEYkWg4",text:"Daily Notes",childrenIds:["RVF3qlH4"],created:1615152313681,updated:1615152316822,dailyNote:null},RVF3qlH4:{id:"RVF3qlH4",parentId:"RWUiSaqJ",text:"Clicking on this page will generate today's note if it doesn't exist",childrenIds:[],created:1615152317360,updated:1615152354091,dailyNote:null},orng4Tbx:{id:"orng4Tbx",parentId:"cJikzeh9",text:"**Changed**",childrenIds:["ijym7flZ"],created:1615152359016,updated:1615152363485,dailyNote:null},ijym7flZ:{id:"ijym7flZ",parentId:"orng4Tbx",text:"Refactor `Block.js`",childrenIds:[],created:1615152363784,updated:1615152377738,dailyNote:null},"65Whw5OF":{id:"65Whw5OF",parentId:"qoGY8XCw",text:"[[v0.2.0]] - [[February 14th, 2021]]",childrenIds:["4yDhjlwo","LSyO6QeQ"],created:1615152378217,updated:1615241577095,dailyNote:null},"37i-QRj4":{id:"37i-QRj4",parentId:"NnBgaPbM",text:"Click here to edit",childrenIds:[],created:1615152387178,updated:null,dailyNote:null},NnBgaPbM:{id:"NnBgaPbM",parentId:null,text:"v0.2.0",childrenIds:["37i-QRj4"],created:1615152387175,updated:null,dailyNote:null},"4yDhjlwo":{id:"4yDhjlwo",parentId:"65Whw5OF",text:"**Added**",childrenIds:["NQQ24pc2"],created:1615152397696,updated:1615152401882,dailyNote:null},lYga6L3g:{id:"lYga6L3g",parentId:"2021-02-14",text:"Click here to edit",childrenIds:[],created:1615152397952,updated:null,dailyNote:null},"2021-02-14":{id:"2021-02-14",parentId:null,text:"February 14th, 2021",childrenIds:["lYga6L3g"],created:1615152397950,updated:null,dailyNote:"2021-02-14"},NQQ24pc2:{id:"NQQ24pc2",parentId:"4yDhjlwo",text:"Ability to position caret under mouse click position",childrenIds:[],created:1615152402136,updated:1615152414280,dailyNote:null},LSyO6QeQ:{id:"LSyO6QeQ",parentId:"65Whw5OF",text:"**Fixed**",childrenIds:["KwKSIov_","5QIy-o9I"],created:1615152414719,updated:1615152418703,dailyNote:null},KwKSIov_:{id:"KwKSIov_",parentId:"LSyO6QeQ",text:"Unlinked refs bug which toggled *all* unlinked refs",childrenIds:[],created:1615152418951,updated:1615152432814,dailyNote:null},"5QIy-o9I":{id:"5QIy-o9I",parentId:"LSyO6QeQ",text:"Block expand/collapse buttons not playing well with clicking the thread lines",childrenIds:[],created:1615152439544,updated:1615152455272,dailyNote:null},osJqlMOc:{id:"osJqlMOc",parentId:"qoGY8XCw",text:"[[v0.1.2]] - [[February 13th, 2021]]",childrenIds:["KfegyrhL"],created:1615152458768,updated:1615241582244,dailyNote:null},sb8fAPEM:{id:"sb8fAPEM",parentId:"ChLH8aqz",text:"Click here to edit",childrenIds:[],created:1615152465521,updated:null,dailyNote:null},ChLH8aqz:{id:"ChLH8aqz",parentId:null,text:"v0.1.2",childrenIds:["sb8fAPEM"],created:1615152465512,updated:null,dailyNote:null},KfegyrhL:{id:"KfegyrhL",parentId:"osJqlMOc",text:"**Fixed**",childrenIds:["ls_xmxM1"],created:1615152478743,updated:1615152491499,dailyNote:null},lO5DViF0:{id:"lO5DViF0",parentId:"2021-02-13",text:"Click here to edit",childrenIds:[],created:1615152479088,updated:null,dailyNote:null},"2021-02-13":{id:"2021-02-13",parentId:null,text:"February 13th, 2021",childrenIds:["lO5DViF0"],created:1615152479085,updated:null,dailyNote:"2021-02-13"},ls_xmxM1:{id:"ls_xmxM1",parentId:"KfegyrhL",text:"View pane and page link bugs",childrenIds:[],created:1615152492576,updated:1615152498679,dailyNote:null},"jLc-SlCe":{id:"jLc-SlCe",parentId:"qoGY8XCw",text:"[[v0.1.1]] - [[February 13th, 2021]]",childrenIds:["wse3RmyV"],created:1615152499080,updated:1615241585479,dailyNote:null},VwBYAYLC:{id:"VwBYAYLC",parentId:"jPesTGdz",text:"Click here to edit",childrenIds:[],created:1615152504189,updated:null,dailyNote:null},jPesTGdz:{id:"jPesTGdz",parentId:null,text:"v0.1.1",childrenIds:["VwBYAYLC"],created:1615152504187,updated:null,dailyNote:null},wse3RmyV:{id:"wse3RmyV",parentId:"jLc-SlCe",text:"**Fixed**",childrenIds:["3EI68J4G"],created:1615152515519,updated:1615152521252,dailyNote:null},"3EI68J4G":{id:"3EI68J4G",parentId:"wse3RmyV",text:"Event `preventDefault()` was blocking deletion",childrenIds:[],created:1615152521509,updated:1615152538969,dailyNote:null},ye0mPSj4:{id:"ye0mPSj4",parentId:"qoGY8XCw",text:"[[v0.1.0]] - [[February 13th, 2021]]",childrenIds:["xFNuKdHA","8Fku1XWQ","ikdmYO9N"],created:1615152539487,updated:1615241588599,dailyNote:null},ACTsaLY2:{id:"ACTsaLY2",parentId:"QzkNFrfk",text:"Click here to edit",childrenIds:[],created:1615152545181,updated:null,dailyNote:null},QzkNFrfk:{id:"QzkNFrfk",parentId:null,text:"v0.1.0",childrenIds:["ACTsaLY2"],created:1615152545179,updated:null,dailyNote:null},xFNuKdHA:{id:"xFNuKdHA",parentId:"ye0mPSj4",text:"Everything in the [React rewrite Github issue](https://github.com/cofinley/free-roam/issues/3) as well as block deletion.",childrenIds:[],created:1615152554855,updated:1615152599403,dailyNote:null},"8Fku1XWQ":{id:"8Fku1XWQ",parentId:"ye0mPSj4",text:"Provide a release bundle to make it easier for people to test.",childrenIds:[],created:1615152599879,updated:1615152611757,dailyNote:null},ikdmYO9N:{id:"ikdmYO9N",parentId:"ye0mPSj4",text:"This project uses semver, so until we get to v1.0, this is considered incomplete.",childrenIds:[],created:1615152613143,updated:1615152623765,dailyNote:null},APdozas6:{id:"APdozas6",parentId:"CYGv8EoI",text:"**Fixed**",childrenIds:["lJ2X-IPj","W0nrIHya"],created:1615153736696,updated:1615153739900,dailyNote:null},"lJ2X-IPj":{id:"lJ2X-IPj",parentId:"APdozas6",text:"Center stage not scrolling on long pages",childrenIds:[],created:1615153740753,updated:1615153763286,dailyNote:null},t7DCXn7R:{id:"t7DCXn7R",parentId:"2021-03-08",text:"Click here to edit",childrenIds:[],created:1615241289927,updated:null,dailyNote:null},"2021-03-08":{id:"2021-03-08",parentId:null,text:"March 8th, 2021",childrenIds:["t7DCXn7R"],created:1615241289921,updated:null,dailyNote:"2021-03-08"},W0nrIHya:{id:"W0nrIHya",parentId:"APdozas6",text:"Performance improvements",childrenIds:["uzorR-kR","k6iAs-fh"],created:1615241295759,updated:1615241306251,dailyNote:null},"uzorR-kR":{id:"uzorR-kR",parentId:"W0nrIHya",text:"No more saving on textarea change; much better now",childrenIds:["giaeP2_c"],created:1615241306135,updated:1615241332287,dailyNote:null},giaeP2_c:{id:"giaeP2_c",parentId:"uzorR-kR",text:"Saving will happen on blur",childrenIds:[],created:1615241332111,updated:1615241340386,dailyNote:null},"k6iAs-fh":{id:"k6iAs-fh",parentId:"W0nrIHya",text:"Memoization of more-pure functional components",childrenIds:[],created:1615241340254,updated:1615241354547,dailyNote:null},"-G0SPlgl":{id:"-G0SPlgl",parentId:"rrxpq9EB",text:"The [[Changelog]]!",childrenIds:[],created:1615241411742,updated:1615241424857,dailyNote:null}},W=Object(I.b)({name:"blocks",initialState:V,reducers:{setBlocksState:function(e,t){var n=t.payload;if(n&&"object"===typeof n)return n},addBlock:function(e,t){var n=t.payload;if(n.parentId){e[n.parentId].childrenIds.push(n.id)}else{var d=g({parentId:n.id,text:"Click here to edit"},e);n.childrenIds.push(d.id),e[d.id]=d}e[n.id]=n},removeBlock:function(e,t){var n=t.payload.blockId,d=e[n];if(!d.childrenIds.length){var r=e[d.parentId];e[d.parentId].childrenIds=r.childrenIds.filter((function(e){return e!==n})),delete e[n]}},removePage:function(e,t){var n=t.payload.blockId,d=e[n];if(d.childrenIds.length){var r,a=Object(E.a)(d.childrenIds);try{for(a.s();!(r=a.n()).done;){var l=r.value;W.caseReducers.removePage(e,{payload:{blockId:l}})}}catch(i){a.e(i)}finally{a.f()}delete e[n]}else delete e[n]},changeParent:function(e,t){var n=t.payload,d=n.blockId,r=n.parentId;e[d].parentId=r,e[r].childrenIds.push(d)},updateBlock:function(e,t){var n=t.payload,d=n.blockId,r=n.parentId,a=n.childrenIds,l=n.text,i=e[d];if(i){i.parentId=r||i.parentId,i.childrenIds=a||i.childrenIds;var c=i.text;i.text="string"===typeof l?l:c,i.updated=Date.now(),e[d]=i,i.parentId||W.caseReducers.changeTitle(e,{payload:{currentTitle:c,newTitle:l}})}},changeTitle:function(e,t){var n=t.payload,d=n.currentTitle,r=n.newTitle,a=new RegExp("\\[\\[".concat(d,"\\]\\]"),"g");Object.values(e).map((function(t){return a.test(t.text)&&(e[t.id].text=t.text.replace("[[".concat(d,"]]"),"[[".concat(r,"]]"))),!0}))},repositionBlock:function(e,t){var n=t.payload,d=n.blockId,r=n.direction,a=e[d],l=e[a.parentId],i=l.childrenIds.indexOf(a.id);if("forward"===r){if(i>0){var c=e[l.childrenIds[i-1]];l.childrenIds.splice(i,1),c.childrenIds.push(d),a.parentId=c.id}}else{var o=e[a.parentId];if(o.parentId){var s=e[o.parentId],u=s.childrenIds.indexOf(o.id);-1!==u&&(o.childrenIds.splice(i,1),s.childrenIds.splice(u+1,0,d),a.parentId=s.id)}}},makeSibling:function(e,t){var n=t.payload,d=n.firstSiblingBlockId,r=n.secondSiblingBlockId,a=e[d];if(a.parentId){var l=e[r];if(l.parentId){var i=e[l.parentId],c=i.childrenIds.indexOf(r);i.childrenIds.splice(c,1)}var o=e[a.parentId],s=o.childrenIds.indexOf(d);e[o.id].childrenIds.splice(s+1,0,r)}}}}),K=W.actions,Z=K.setBlocksState,U=(K.getBlockByText,K.addBlock),$=K.removeBlock,ee=K.removePage,te=K.updateBlock,ne=K.repositionBlock,de=K.makeSibling,re=W.reducer,ae=Object(I.b)({name:"editor",initialState:{focusedBlock:{blockId:"",isMain:!0,caretPos:0}},reducers:{setEditorState:function(e,t){var n=t.payload;if(n&&"focusedBlock"in n)return n},updateFocusedBlock:function(e,t){e.focusedBlock=t.payload}}}),le=ae.actions,ie=le.setEditorState,ce=le.updateFocusedBlock,oe=ae.reducer,se=(n(66),function(e){var t=e.query,n=e.useLinks,d=e.onResultClick,a=e.onlyPages,l=e.allowCreation,c=e.onCreateClick,o=Object(i.c)((function(e){return e.blocks})),s=[];if(t&&t.length){var u=Object.values(o).filter((function(e){return(!a||null===e.parentId)&&-1!==e.text.indexOf(t)}));if(s=u.map((function(e){return n?Object(H.jsx)(T,{blockId:e.id,className:"search-result",afterClick:d,children:e.text},e.id):Object(H.jsx)("li",{className:"search-result",onMouseDown:d.bind(null,e),children:e.text},e.id)})),l){if(!(void 0!==u.find((function(e){return e.text===t})))){var p=Object(H.jsxs)("li",{className:"search-result",onClick:c,children:[Object(H.jsx)("b",{children:"Create"})," ",t]},"new-page-".concat(t));s.splice(0,0,p)}}else if(!s.length){var b=Object(H.jsx)("li",{className:"search-result",children:Object(H.jsx)("span",{children:"Search for a page"})},"default-suggestion");s.splice(0,0,b)}}return Object(H.jsx)(r.a.Fragment,{children:s.length>0&&Object(H.jsx)("div",{className:"search-results",children:Object(H.jsx)("ul",{className:"list-group list-group-flush",children:s})})})}),ue=function(e){var t=e.block,n=e.isMain,r=e.isTitle,a=e.cursorCaret,l=e.setCursorCaret,c=e.onRender,s=Object(i.b)(),u=Object(d.useRef)(null),p=Object(d.useState)(!1),b=Object(o.a)(p,2),h=b[0],f=b[1],I=Object(i.c)((function(e){return e.editor.focusedBlock})),j=Object(i.c)((function(e){return e.blocks})),x=Object(d.useState)(!1),k=Object(o.a)(x,2),v=k[0],O=k[1],y=function(e){e.preventDefault(),A(e.target.value),e.shiftKey?s(ne({blockId:t.id,direction:"backward"})):s(ne({blockId:t.id,direction:"forward"})),s(ce({blockId:t.id,isMain:n,caretPos:e.target.selectionStart}))},m=function(e){e.preventDefault();var d="";if(e.target.selectionStart!==e.target.value.length){var r=e.target.selectionStart;d=t.text.substring(r);var a=t.text.substring(0,r);s(te({blockId:t.id,text:a})),e.target.value=a}var l=g({text:d,parentId:t.parentId},j);s(U(l)),s(de({firstSiblingBlockId:t.id,secondSiblingBlockId:l.id})),s(ce({blockId:l.id,isMain:n,caretPos:0}))},w=function(e){e.preventDefault();var t=e.target.selectionStart,n=e.target.value,d=n.charAt(t-1);if(e.target.value=n.substring(0,t)+"[]"+n.substring(t,n.length),e.target.selectionStart=t+1,e.target.selectionEnd=t+1,"["===d&&!h)return f(!0),void O("");f(!1)},S=function(e){if(0===u.current.selectionStart&&!t.childrenIds.length){e.preventDefault();var d=C(t,j);if(d){var r=d.text.length;s(te({blockId:d.id,text:d.text+t.text})),s($({blockId:t.id})),s(ce({blockId:d.id,isMain:n,caretPos:r}))}}},P=function(e){var d="ArrowUp"===e.key,r=window.getComputedStyle(e.target),a=parseInt(r.getPropertyValue("line-height")),l=e.target.selectionStart,i=function(e,t){return J()(e,e.selectionStart).top<=t}(e.target,a),c=function(e,t){var n=J()(e,e.selectionStart).top;return e.offsetHeight<=n+t}(e.target,a);if(i&&d&&!N(t,j)){var o=C(t,j);o&&(s(ce({blockId:o.id,caretPos:l,isMain:n})),e.preventDefault())}else if(c&&!d){var u=B(t,j);u&&(s(ce({blockId:u.id,caretPos:l,isMain:n})),e.preventDefault())}},A=function(e){t.text!==e&&s(te({blockId:t.id,text:e}))},q=I.blockId&&I.blockId===t.id&&I.isMain===n&&!isNaN(I.caretPos);q&&u.current&&u.current.focus();return Object(H.jsxs)("div",{className:"block__autocomplete-container",children:[Object(H.jsx)(X.a,{ref:u,className:"block-text block-text--edit".concat(r?" block-text--title":""),autoFocus:!0,onFocus:function(e){q?(e.target.selectionStart=I.caretPos,e.target.selectionEnd=I.caretPos):null!==a.offsetX&&function(e){if(e){for(var t=["*","_"],n=e.value,d=1e4,r=0,i=[],c=0;c<=e.value.length;c++){var o=e.value.charAt(c);if(t.includes(o)){var s=e.value.split("");s.splice(c,1),e.value=s.join(""),i.push(c),c--}var u=J()(e,c),p=u.left,b=u.top,h=Math.sqrt(Math.pow(p-a.offsetX,2)+Math.pow(b-a.offsetY,2));h<d&&(d=h,r=c)}e.value=n;var f=r;i.length&&i[0]<=f&&(f+=i.filter((function(e){return e<=r})).length),e.selectionStart=f,e.selectionEnd=f,l({offsetX:null,offsetY:null,width:null})}}(e.target)},onKeyDown:function(e){"Tab"===e.key?y(e):"Enter"!==e.key||e.shiftKey?"["===e.key?w(e):"Backspace"===e.key?S(e):"ArrowUp"!==e.key&&"ArrowDown"!==e.key||P(e):m(e)},onKeyUp:function(e){var t=e.target.selectionStart,n=D(e.target.value,t);n.caretInBrackets?(f(!0),O(n.textInBrackets)):f(!1)},onBlur:function(e){s(ce({blockId:null,caretPos:null,isMain:null})),A(e.target.value),c()},defaultValue:t.text}),h&&Object(H.jsx)(se,{query:v,onlyPages:!0,useLinks:!1,onResultClick:function(e,n){n.preventDefault();var d=e.text,r=u.current.value,a=u.current.selectionStart,l=D(r,a),i=r.substring(0,l.startBracketIndex+2)+d+r.substring(l.endBracketIndex);u.current.value=i,f(!1),O(null),s(te({blockId:t.id,text:i}))}})]})},pe=n(42),be=n(43),he=n.n(be),fe=Object(I.b)({name:"links",initialState:{to:{efgh:["mnop"]},from:{mnop:["efgh"]}},reducers:{setLinksState:function(e,t){var n=t.payload;if(n&&"to"in n&&"from"in n)return n},setLinks:function(e,t){var n=t.payload,d=n.sourceBlockId,r=n.linkedBlockIds;if(d&&r&&r.length){var a;if(d in e.from){if(JSON.stringify(e.from[d].sort())===JSON.stringify(r.sort()))return;var l=e.from[d].filter((function(e){return!r.includes(e)}));l.length&&l.map((function(t){return e.to[t]=e.to[t].filter((function(e){return d!==e})),!0})),a=r.filter((function(t){return!e.from[d].includes(t)}))}else a=r;a.length&&a.map((function(t){return t in e.to||(e.to[t]=[]),e.to[t].push(d),!0})),e.from[d]=r}},removeBlockLinks:function(e,t){var n=t.payload.blockId,d=e.from[n];fe.caseReducers.setLinks(e,{payload:{sourceBlockId:n,linkedBlockIds:[]}}),d&&d.map((function(t){return e.to[t]=e.to[t].filter((function(e){return e!==n})),!0})),delete e.from[n]}}}),Ie=fe.actions,je=Ie.setLinksState,xe=Ie.setLinks,ke=Ie.removeBlockLinks,ve=fe.reducer,Oe=r.a.memo((function(e){var t=e.block,n=e.isTitle,d=e.onEdit,a=Object(i.b)(),l=Object(i.c)((function(e){return e.blocks})),c=Object(i.c)((function(e){return e.links.from[t.id]})),o=function(e){var n=new Set,d=he()(e,/\[\[([^[\]]*)\]\]/g,(function(e,t){var d=u(e);return n.add(d.id),Object(H.jsx)(T,{blockId:d.id,children:d.text},"".concat(e,"-").concat(t))})),r=Array.from(n);return r.length&&(void 0!==c&&s(new Set(r),new Set(c))||a(xe({sourceBlockId:t.id,linkedBlockIds:r}))),d},s=function(e,t){if(e.size!==t.size)return!1;var n,d=Object(E.a)(e);try{for(d.s();!(n=d.n()).done;){var r=n.value;if(!t.has(r))return!1}}catch(a){d.e(a)}finally{d.f()}return!0},u=function(e){var t=Object.values(l).find((function(t){return!t.parentId&&t.text===e}));if(t)return t;var n=g({text:e},l);return a(U(n)),n};return Object(H.jsx)("span",{className:"block-text".concat(n?" block-text--title":""),onClick:d,children:(t.text,o(t.text).map((function(e){if("string"===typeof e){var t=Object(pe.a)(e);return r.a.cloneElement(t,{key:e})}return e})))})}),(function(e,t){return e.block.text!==t.block.text})),ye=function(e){var t=e.block,n=e.isMain,r=e.isTitle,a=Object(i.c)((function(e){return e.editor.focusedBlock})),l=Object(d.useState)(a.isMain===n&&a.blockId===t.id),c=Object(o.a)(l,2),s=c[0],u=c[1],p=Object(d.useState)({offsetX:null,offsetY:null,width:null}),b=Object(o.a)(p,2),h=b[0],f=b[1];return a.blockId&&a.blockId===t.id&&a.isMain===n&&!isNaN(a.caretPos)&&!s&&u(!0),Object(H.jsx)("div",{className:"block",children:s?Object(H.jsx)(ue,{block:t,isMain:n,isTitle:r,cursorCaret:h,setCursorCaret:f,onRender:function(e){u(!1)}}):Object(H.jsx)(Oe,{block:t,isTitle:r,onEdit:function(e){if(!t.dailyNote){var n=e.clientX,d=e.clientY,r=n-e.currentTarget.offsetLeft,a=d-e.currentTarget.offsetTop,l=e.currentTarget.offsetWidth;f({offsetX:r,offsetY:a,width:l}),u(!0)}}})})},ge=function(e){var t=e.block,n=Object(i.c)((function(e){return e.blocks}));return Object(H.jsx)("div",{className:"breadcrumbs text-muted",children:function e(t){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t)return d.reverse();var r=n[t],a=Object(H.jsx)(T,{blockId:t,isPage:null===r.parentId,noStyling:!0,children:r.text},t);return e(r.parentId,d.concat(a))}(t.parentId)})},me=(n(87),r.a.memo((function(e){var t=e.block,n=e.hasChildren,d=e.foldBlock,r=e.setFoldBlock;return Object(H.jsxs)("div",{className:"block-actions-container",children:[Object(H.jsxs)("span",{className:"block-actions block-actions--toggle".concat(n?"":" hidden"),children:[d&&Object(H.jsx)(R.a,{color:"white",onClick:function(){return r(!1)}}),!d&&Object(H.jsx)(q.a,{color:"white",onClick:function(){return r(!0)}})]}),Object(H.jsx)(T,{blockId:t.id,noStyling:!0,isPage:!1,children:Object(H.jsx)("div",{className:"block-actions block-actions--bullet".concat(d&&n?" fold":""),children:Object(H.jsx)("span",{children:"\u2022"})})})]})}))),Ne=function e(t){var n=t.blockId,r=t.isRoot,a=t.showBreadcrumbs,l=void 0!==a&&a,c=t.isMain,s=t.fold,u=void 0!==s&&s,p=Object(i.c)((function(e){return e.blocks[n]})),b=Object(d.useState)(u),h=Object(o.a)(b,2),f=h[0],I=h[1],j=Object(d.useState)(!1),x=Object(o.a)(j,2),k=x[0],v=x[1];if(Object(d.useEffect)((function(){I(u)}),[u]),!p)return Object(H.jsx)("h1",{className:"text-light",children:"Page not found"});var O=null===p.parentId,y=O&&r,g=p.childrenIds.map((function(t){return Object(H.jsx)(e,{isRoot:!1,isMain:c,blockId:t,fold:k},t)}));return Object(H.jsxs)("div",{className:"editor ".concat(r?"editor--root":"editor--child").concat(O?" editor--page":""),children:[(l||r&&!O)&&Object(H.jsx)(ge,{block:p}),Object(H.jsxs)("div",{className:"d-flex",children:[!y&&Object(H.jsx)(me,{block:p,foldBlock:f,setFoldBlock:I,hasChildren:g.length>0}),Object(H.jsx)(ye,{block:p,isTitle:y,isMain:c})]}),!f&&g.length>0&&Object(H.jsxs)("div",{className:"editor__children",children:[null!==p.parentId&&Object(H.jsx)("div",{className:"editor__children__thread-line",onClick:function(){return v(!k)}}),Object(H.jsx)("div",{className:"editor__children__container",children:g})]}),r&&Object(H.jsx)(Q,{block:p,isMain:c},p.id)]})},we=n(108),Se=n(109),Ce=n(110),Be=(n(88),Object(I.b)({name:"navbar",initialState:{searchQuery:""},reducers:{setNavbarState:function(e,t){var n=t.payload;if(n&&"searchQuery"in n)return n},updateSearchQuery:function(e,t){var n=t.payload.query;e.searchQuery=n}}})),Pe=Be.actions,Ae=Pe.setNavbarState,qe=Pe.updateSearchQuery,Re=(Pe.removeShortcut,Be.reducer),Me=Object(I.b)({name:"filePane",initialState:{favoriteBlockIds:["welcome","abcd","efgh","qoGY8XCw"]},reducers:{setFilePaneState:function(e,t){var n=t.payload;if(n&&"favoriteBlockIds"in n)return n},toggleShortcut:function(e,t){var n=t.payload.blockId;e.favoriteBlockIds.indexOf(n)>-1?e.favoriteBlockIds=e.favoriteBlockIds.filter((function(e){return n!==e})):e.favoriteBlockIds.push(n)},removeShortcut:function(e,t){var n=t.payload.blockId;e.favoriteBlockIds=e.favoriteBlockIds.filter((function(e){return e!==n}))}}}),Le=Me.actions,ze=Le.setFilePaneState,Ye=Le.toggleShortcut,Fe=Le.removeShortcut,_e=Me.reducer,He=function(e){var t,n=e.blockId,d=Object(i.b)(),r=Object(i.c)((function(e){return e.navbar.searchQuery})),a=Object(i.c)((function(e){return e.blocks})),l=Object(i.c)((function(e){return e.filePane.favoriteBlockIds})),c=Object(p.f)(),o=function e(t){return t.parentId?e(a[t.parentId]):t.id};if(n){var s=a[n];if(s){var u=o(s);t=l.includes(u)}}var b;void 0!==t&&(b=t?Object(H.jsx)(we.a,{color:"white"}):Object(H.jsx)(Se.a,{color:"white"}));var h=function(e){d(qe({query:""}))};return Object(H.jsxs)("div",{className:"navbar",children:[Object(H.jsxs)("div",{className:"search-container",children:[Object(H.jsxs)("div",{className:"input-group",children:[Object(H.jsx)("div",{className:"input-group-prepend",children:Object(H.jsx)("span",{className:"input-group-text bg-dark text-dark border-secondary",children:Object(H.jsx)(Ce.a,{color:"white"})})}),Object(H.jsx)("input",{type:"text",className:"form-control bg-dark text-light border-secondary",placeholder:"Find or Create Page",onChange:function(e){return d(qe({query:e.target.value}))},value:r})]}),Object(H.jsx)(se,{query:r,useLinks:!0,onResultClick:h,allowCreation:!0,onCreateClick:function(){var e=g({text:r},a);d(U(e)),h(),c.push("/page/".concat(e.id))}})]}),void 0!==b&&Object(H.jsx)("button",{className:"btn btn--toggle-favorite",onClick:function(e){var t=o(a[n]);d(Ye({blockId:t}))},children:b})]})},Te=n(28),Qe=n.n(Te);n(89);x.a.extend(Qe.a);var Xe=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.blocks})),d=Object.values(n).filter((function(e){return!!e.dailyNote})).sort((function(e,t){return e.dailyNote.localeCompare(t.dailyNote)})).reverse(),r=x()(),a=r.format(O),l=d.find((function(e){return e.text===a}));l||(l=g({text:a,dailyNote:r.format(y)},n),t(U(l)));var c=d.map((function(e){return Object(H.jsx)(Ne,{blockId:e.id,isMain:!0,isRoot:!0},e.id)}));return Object(H.jsx)("div",{className:"daily-notes",children:c})},Ge=n(30),Je=n(111),Ee=n(112),De=n(113),Ve=n(114),We=n(44),Ke=n(45),Ze=n.n(Ke),Ue=(n(100),function(e){var t=new Ze.a;e.map((function(e){var n=e.content,d=e.fileName;return t.file(d||"free-roam.json",JSON.stringify(n)),!0})),t.generateAsync({type:"blob"}).then((function(e){Object(We.saveAs)(e,"Free-Roam-Export-".concat(Date.now()))}))}),$e=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e}));return Object(H.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(H.jsx)("label",{className:"load-button-input mr-3",children:Object(H.jsx)("input",{type:"file",className:"btn btn-secondary",accept:".json",onChange:function(e){e.preventDefault();var n=new FileReader;n.onload=function(e){var n=JSON.parse(e.target.result);"blocks"in n&&t(Z(n.blocks)),"editor"in n&&t(ie(n.editor)),"filePane"in n&&t(ze(n.filePane)),"links"in n&&t(je(n.links)),"navbar"in n&&t(Ae(n.navbar)),"viewPane"in n&&t(z(n.viewPane))},n.readAsText(e.target.files[0])}})}),Object(H.jsx)("button",{className:"btn btn-secondary",onClick:function(){return Ue([{content:n,fileName:"free-roam.json"}])},children:"Save"})]})},et=r.a.forwardRef((function(e,t){var n=e.indeterminate,d=Object(f.a)(e,["indeterminate"]),a=r.a.useRef(),l=t||a;return r.a.useEffect((function(){l.current.indeterminate=n}),[l,n]),Object(H.jsx)(H.Fragment,{children:Object(H.jsx)("input",Object(h.a)({type:"checkbox",ref:l},d))})})),tt=function(e){var t=e.columns,n=e.data,d=Object(i.b)(),r=Object(i.c)((function(e){return e.blocks})),a=Object(i.c)((function(e){return e.links.to})),l=function(e){e.length&&e.map((function(e){return e.original.blockId})).map((function(e){var t=r[e];return A(r[e],r).map((function(e){return d(F({type:"all",blockId:e})),(a[e]||[]).map((function(e){var n=r[e],a=new RegExp("\\[\\[(".concat(t.text,")\\]\\]"),"g"),l=n.text.replace(a,"$1");return d(te({blockId:e,text:l})),!0})),d(ke({blockId:e})),!0})),d(Fe({blockId:e})),d(ee({blockId:e})),!0}))},c=Object(Ge.useTable)({columns:t,data:n},Ge.useSortBy,Ge.useRowSelect,(function(e){e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return Object(H.jsx)("div",{children:Object(H.jsx)(et,Object(h.a)({},t()))})},Cell:function(e){var t=e.row;return Object(H.jsx)("div",{children:Object(H.jsx)(et,Object(h.a)({},t.getToggleRowSelectedProps()))})}}].concat(Object(b.a)(e))}))})),o=c.getTableProps,s=c.getTableBodyProps,u=c.headerGroups,p=c.rows,f=c.prepareRow,I=c.selectedFlatRows,j=c.state.selectedRowIds;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("div",{className:"all-pages__toolbar",children:[Object(H.jsx)(Je.a,{onClick:function(){return l(I)},className:"mr-3 all-pages__button".concat(Object.keys(j).length?" active":"")}),Object(H.jsx)(Ee.a,{onClick:function(){return function(e){if(e.length){var t=e.map((function(e){return e.original.blockId})).map((function(e){var t=r[e];return{content:P(t,r),fileName:"".concat(t.text,".json")}}));Ue(t)}}(I)},className:"all-pages__button".concat(Object.keys(j).length?" active":"")}),Object(H.jsx)("div",{className:"flex-grow-1"})]}),Object(H.jsxs)("table",Object(h.a)(Object(h.a)({className:"table table-dark"},o()),{},{children:[Object(H.jsx)("thead",{className:"thead-dark",children:u.map((function(e){return Object(H.jsx)("tr",Object(h.a)(Object(h.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(H.jsxs)("th",Object(h.a)(Object(h.a)({scope:"col"},e.getHeaderProps([{className:e.className},e.getSortByToggleProps()])),{},{children:[e.render("Header"),Object(H.jsx)("span",{children:e.isSorted?e.isSortedDesc?Object(H.jsx)(De.a,{color:"white"}):Object(H.jsx)(Ve.a,{color:"white"}):""})]}))}))}))}))}),Object(H.jsx)("tbody",Object(h.a)(Object(h.a)({},s()),{},{children:p.map((function(e,t){return f(e),Object(H.jsx)("tr",Object(h.a)(Object(h.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(H.jsx)("td",Object(h.a)(Object(h.a)({},e.getCellProps([{className:e.column.className}])),{},{children:e.render("Cell")}))}))}))}))}))]}))]})};n(101);x.a.extend(Qe.a);var nt=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.blocks})),a=Object(i.c)((function(e){return e.links.to})),l=Object(d.useCallback)((function(e,n){t(Y({type:"references",blockId:e}))}),[t]),c=r.a.useMemo((function(){return[{Header:"Title",className:"font-weight-bold",accessor:function(e){return Object(H.jsx)(T,{blockId:e.blockId,children:e.text},e.blockId)},sortType:function(e,t,n,d){return e.original.text.localeCompare(t.original.text)}},{Header:"Mentions",accessor:"mentions",className:"text-center",Cell:function(e){var t=e.row,n=e.value;return Object(H.jsx)("div",{className:"mentions-bubble",onClick:l.bind(null,t.original.blockId),children:Object(H.jsx)("span",{children:n.length})})},sortType:function(e,t,n,d){return e.original.mentions.length-t.original.mentions.length}},{Header:"Updated",accessor:"updated",className:"text-right",Cell:function(e){var t=e.value;return t?x()(t).format(O):null}},{Header:"Created",accessor:"created",className:"text-right",Cell:function(e){var t=e.value;return t?x()(t).format(O):null}}]}),[l]),o=r.a.useMemo((function(){return function(e,t){return Object.values(e).filter((function(e){return!e.parentId})).map((function(e){return{text:e.text,blockId:e.id,created:e.created,updated:e.updated,mentions:t[e.id]||[]}}))}(n,a)}),[n,a]);return Object(H.jsx)("div",{className:"all-pages",children:Object(H.jsx)(tt,{columns:c,data:o})})},dt=function(e){return Object(H.jsxs)("div",{className:"main",children:[Object(H.jsx)(p.b,{exact:!0,path:"/",children:Object(H.jsx)(p.a,{to:"/page/welcome"})}),Object(H.jsx)(p.b,{path:"/page/:blockId",render:function(e){var t=e.match;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(He,{blockId:t.params.blockId}),Object(H.jsx)("div",{className:"stage",children:Object(H.jsx)(Ne,{blockId:t.params.blockId,isRoot:!0,isMain:!0})})]})}}),Object(H.jsx)(p.b,{path:"/daily-notes",render:function(){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(He,{}),Object(H.jsx)("div",{className:"stage",children:Object(H.jsx)(Xe,{})})]})}}),Object(H.jsx)(p.b,{path:"/all-pages",render:function(){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(He,{}),Object(H.jsx)("div",{className:"stage",children:Object(H.jsx)(nt,{})})]})}})]})},rt=n(115),at=n(117),lt=n(118);n(102);var it=function(e){var t=Object(i.c)((function(e){return e.blocks})),n=Object(i.c)((function(e){return e.filePane.favoriteBlockIds})).map((function(e){var n=t[e];return Object(H.jsx)(T,{blockId:e,className:"list-group-item list-group-item-action bg-dark text-light",children:n.text},e)}));return Object(H.jsxs)("div",{children:[Object(H.jsxs)("h5",{children:[Object(H.jsx)(we.a,{color:"white",width:"15px",style:{marginRight:"10px"}}),"Shortcuts"]}),Object(H.jsx)("div",{className:"list-group list-group-flush mt-3",children:n})]})},ct=function(e){var t=e.setShowFilePane;return Object(H.jsxs)("div",{className:"pane file-pane",children:[Object(H.jsx)("div",{className:"hide-sidebar",onClick:function(){return t(!1)},children:Object(H.jsxs)("div",{className:"hide-sidebar__button",children:[Object(H.jsx)(rt.a,{size:10,style:{marginRight:"-3px"}}),Object(H.jsx)(u.a,{size:20})]})}),Object(H.jsx)(s.b,{to:"/",children:Object(H.jsx)("h2",{className:"text-light text-center",children:"Free-roam"})}),Object(H.jsx)($e,{}),Object(H.jsxs)("div",{className:"list-group list-group-flush mt-3",children:[Object(H.jsxs)(s.b,{to:"/daily-notes",className:"list-group-item list-group-item-action bg-dark text-light",children:[Object(H.jsx)(at.a,{color:"white"})," Daily Notes"]}),Object(H.jsxs)(s.b,{to:"/all-pages",className:"list-group-item list-group-item-action bg-dark text-light",children:[Object(H.jsx)(lt.a,{color:"white"})," All Pages"]})]}),Object(H.jsx)("hr",{}),Object(H.jsx)(it,{})]})},ot=(n(103),n(119)),st=function(e){var t=e.view,n=Object(d.useState)(!0),r=Object(o.a)(n,2),a=r[0],l=r[1],c=Object(i.c)((function(e){return e.blocks})),s=Object(i.c)((function(e){return e.links})),u=Object(i.b)(),p=t.type,b=t.blockId;if(!(b in c))return null;var h=c[b],f=s.to[h.id]||[];return Object(H.jsxs)("div",{className:"view-pane__section",children:[Object(H.jsxs)("div",{className:"d-flex align-items-center",children:[Object(H.jsxs)("span",{className:"references__toggle no-select",onClick:function(){return l((function(e){return!e}))},children:[a?Object(H.jsx)(q.a,{color:"white",size:12}):Object(H.jsx)(R.a,{color:"white",size:12}),function(e,t,n){var d;switch(e){case"page":d=Object(H.jsxs)("span",{children:["Outline of ",n?":":Object(H.jsx)("b",{children:Object(H.jsx)(T,{blockId:t.id,children:t.text})})]});break;case"block":d=Object(H.jsxs)("span",{children:["Block outline of ",n?":":Object(H.jsx)("b",{children:Object(H.jsx)(T,{blockId:t.id,children:t.text})})]});break;case"references":d=Object(H.jsxs)("span",{children:["References to: ",Object(H.jsx)(T,{blockId:t.id,children:t.text})]});break;default:d=Object(H.jsx)("span",{children:"Outline of"})}return d}(p,h,a)]}),Object(H.jsx)("div",{className:"flex-grow-1"}),"page"===p&&Object(H.jsx)("button",{className:"btn btn-dark btn-sm px-1 py-0",onClick:function(){return u(Y({type:"references",blockId:b}))},children:f.length}),Object(H.jsx)(ot.a,{className:"btn-close",onClick:function(e,t,n){u(F({type:e,blockId:t}))}.bind(null,p,h.id)})]}),a?"references"===p?Object(H.jsx)(Q,{block:h,isMain:!0}):Object(H.jsx)(Ne,{blockId:h.id,isRoot:!0,isMain:!1}):null]},"".concat(p,"-").concat(h.id))},ut=function(e){var t=e.setShowViewPane,n=Object(i.c)((function(e){return e.viewPane.views})).map((function(e){return Object(H.jsx)(st,{view:e})}));return Object(H.jsxs)("div",{className:"pane view-pane",children:[Object(H.jsx)("div",{className:"hide-sidebar",onClick:function(){return t(!1)},children:Object(H.jsxs)("div",{className:"hide-sidebar__button",children:[Object(H.jsx)(u.a,{size:20}),Object(H.jsx)(R.a,{size:10,style:{marginLeft:"-3px"}})]})}),n]})},pt=function(){var e=Object(d.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(d.useState)(!0),l=Object(o.a)(a,2),i=l[0],c=l[1];return Object(H.jsx)("div",{className:"App",children:Object(H.jsxs)(s.a,{children:[n?Object(H.jsx)(ct,{setShowFilePane:r}):Object(H.jsx)("div",{className:"show-sidebar__button",onClick:function(){return r(!0)},children:Object(H.jsx)(u.a,{size:20})}),Object(H.jsx)(dt,{}),i?Object(H.jsx)(ut,{setShowViewPane:c}):Object(H.jsx)("div",{className:"show-sidebar__button",onClick:function(){return c(!0)},children:Object(H.jsx)(u.a,{size:20})})]})})},bt={blocks:re,filePane:_e,viewPane:_,navbar:Re,links:ve,editor:oe},ht=Object(I.a)({reducer:bt});n(104);window.addEventListener("beforeunload",(function(e){e.preventDefault(),e.returnValue=""})),l.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(i.a,{store:ht,children:Object(H.jsx)(pt,{})})}),document.getElementById("root")),c()},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.7d177995.chunk.js.map