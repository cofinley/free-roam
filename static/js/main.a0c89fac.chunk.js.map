{"version":3,"sources":["reportWebVitals.js","features/block/blockModel.js","redux/initialState.js","features/view-pane/viewPaneSlice.js","features/links/PageLink.js","features/editor/References.js","features/block/editUtils.js","features/block/blockSlice.js","features/editor/editorSlice.js","features/search/Search.js","features/block/EditBlock.js","features/links/linksSlice.js","features/block/RenderedBlock.js","features/block/Block.js","features/editor/Breadcrumbs.js","features/block-actions/BlockActions.js","features/editor/Editor.js","features/navbar/navbarSlice.js","features/file-pane/filePaneSlice.js","features/navbar/Navbar.js","features/daily-notes/DailyNotes.js","features/io/io.js","features/all-pages/PagesTable.js","features/all-pages/AllPages.js","features/main/Main.js","features/file-pane/Shortcuts.js","features/file-pane/FilePane.js","features/view-pane/ViewPaneBlock.js","features/view-pane/ViewPane.js","App.js","redux/store.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","dayjs","extend","customParseFormat","DAILY_NOTE_DISPLAY_FORMAT","DAILY_NOTE_STORAGE_FORMAT","BlockModel","id","nanoid","parentId","text","childrenIds","created","Date","now","dailyNote","blocks","isPage","dailyNoteTitleDate","isValid","format","updated","getPage","block","isFirstPageChild","pageBlock","getNextSibling","parentBlock","blockIndex","indexOf","length","getLastChildLeaf","slice","getNextBlockUp","prevSibling","getPrevSibling","getNextBlockDown","checkChildren","nextSibling","serialize","newBlock","children","map","childId","childBlock","flattenTreeIds","concat","initialState","abcd","efgh","ijkl","mnop","qrst","uvwx","a1","a2","a4","plXnqf7B","welcome","pKs_vxuk","ANZddpXT","NMb4Yf1z","nbGfXXqe","mPiN8jkq","CYGv8EoI","qoGY8XCw","rrxpq9EB","aYDvZZDa","x4tIQpko","dfaf5wnb","mO6iGrvz","NmXAqdVJ","B0euIf5P","hbwAGc0n","U_BM_Wui","PHWZ0YQa","nRqacq7j","Zoton0HW","ASDbCeJC","LIk2h4jD","nI6sjZEh","sWA5LPEl","LZcy3J05","n8zdS3M6","QRq7Iijd","XMhm2bRA","fcx0cCvG","xpkrOqmn","Xb1qVATK","aHlHRw0J","WvrzSZxd","GrVjOqq0","BQKXI_WC","ce6qtsCS","DLV049Kx","H26Q1rNJ","AkNZvm6T","Jeu_zI_d","Hz2cnxGo","zcFTghP_","GTSiOiPB","BWvQJEpx","zh5H9xj_","SHEu5mSn","h3QIVAwN","_NgKanaH","qxIrQMXH","oNR59Nt6","mRMlNbtc","VwYwAGRr","MkE63b42","tCuoXsgJ","cJikzeh9","iQLTYbmZ","lOYo9YNv","MTEYkWg4","hn3EsXvI","RWUiSaqJ","RVF3qlH4","orng4Tbx","ijym7flZ","NnBgaPbM","lYga6L3g","NQQ24pc2","LSyO6QeQ","KwKSIov_","osJqlMOc","sb8fAPEM","ChLH8aqz","KfegyrhL","lO5DViF0","ls_xmxM1","VwBYAYLC","jPesTGdz","wse3RmyV","ye0mPSj4","ACTsaLY2","QzkNFrfk","xFNuKdHA","ikdmYO9N","APdozas6","t7DCXn7R","W0nrIHya","giaeP2_c","_gg6HfLG","jxThNu7Z","filePane","favoriteBlockIds","viewPane","views","type","blockId","navbar","searchQuery","links","to","U0wzj61A","from","b2YZvcWh","lup97uCD","_5azrzbp","Rw6LsatI","n1UcDJvH","_kgduwg0","nCpmIXvg","editor","focusedBlock","isMain","caretPos","viewPaneSlice","createSlice","name","reducers","setViewPaneState","state","action","newState","payload","pushView","find","view","unshift","popView","filter","actions","PageLink","noStyling","afterClick","rest","dispatch","useDispatch","onClick","event","shiftKey","preventDefault","stopPropagation","className","References","useState","showLinkedRefs","setShowLinkedRefs","showUnlinkedRefs","setShowUnlinkedRefs","unlinkedRefs","setUnlinkedRefs","references","useSelector","color","size","referenceBlockId","referenceBlock","referenceBlockPage","isRoot","fold","showBreadcrumbs","renderLinkedReferences","titlePat","RegExp","Object","values","test","getUnlinkedReferences","renderUnlinkedReferences","getCaretInfo","matches","matchAll","caretInBrackets","textInBrackets","match","textWithBrackets","startBracketIndex","index","endBracketIndex","blocksSlice","setBlocksState","addBlock","push","removeBlock","childBlockId","removePage","caseReducers","changeParent","updateBlock","currentText","changeTitle","currentTitle","newTitle","linkPat","replace","repositionBlock","direction","previousSibling","splice","grandParentBlock","parentBlockIndex","makeSibling","firstSiblingBlockId","secondSiblingBlockId","firstSibling","secondSibling","secondSiblingParent","secondSiblingIndex","firstSiblingParent","firstSiblingIndex","getBlockByText","editorSlice","setEditorState","updateFocusedBlock","Search","query","useLinks","onResultClick","onlyPages","allowCreation","onCreateClick","suggestions","searchResultBlocks","onMouseDown","bind","undefined","createPageLink","searchPlaceholder","Fragment","EditBlock","isTitle","cursorCaret","setCursorCaret","onRender","textarea","useRef","searching","setSearching","setQuery","onTab","save","target","value","selectionStart","onEnter","newBlockText","start","substring","remainingText","onOpenBracket","prevChar","charAt","selectionEnd","onBackspace","current","destinationBlock","newCaretPos","onVerticalArrow","goingUp","key","styling","window","getComputedStyle","lineHeight","parseInt","getPropertyValue","caretOnFirstRow","getCaretCoordinates","top","isCaretOnFirstRow","caretOnLastRow","offsetHeight","isCaretOnLastRow","isFocusedBlock","isNaN","focus","ref","autoFocus","onFocus","offsetX","_textarea","symbolsToSkip","originalText","minDistance","translatedCaretPos","skippedSymbolIndexes","currentChar","includes","chars","split","join","x","left","y","distance","Math","sqrt","pow","offsetY","width","translateCursorToCaretPos","onKeyDown","onKeyUp","caretInfo","onBlur","defaultValue","blockToInsert","title","newValue","linksSlice","setLinksState","setLinks","sourceBlockId","linkedBlockIds","addedLinks","JSON","stringify","sort","removedLinks","destinationBlockId","_sourceBlockId","removeBlockLinks","destinationBlockIds","RenderedBlock","React","memo","onEdit","linksFromBlock","renderLinks","Set","jsxArray","reactStringReplace","i","linkToPage","add","linksArray","Array","eqSet","as","bs","a","has","foundPage","newPageBlock","element","jsx","compiler","cloneElement","Block","editing","setEditing","clickPosX","clientX","clickPosY","clientY","currentTarget","offsetLeft","offsetTop","offsetWidth","Breadcrumbs","breadcrumbs","parentBlockId","list","reverse","crumb","BlockActions","hasChildren","foldBlock","setFoldBlock","Editor","foldNextLevel","setFoldNextLevel","useEffect","navbarSlice","setNavbarState","updateSearchQuery","removeShortcut","filePaneSlice","setFilePaneState","toggleShortcut","favoriteBlockId","Navbar","isFavorite","history","useHistory","getRoot","rootBlockId","favoriteButton","clearSearch","placeholder","onChange","page","advancedFormat","DailyNotes","props","dailyNoteBlocks","blockA","blockB","localeCompare","today","todayFormattedDate","todayDailyNoteBlock","dailyNoteEditors","files","zip","JSZip","file","content","fileName","generateAsync","saveAs","IO","s","accept","reader","FileReader","onload","parse","result","readAsText","IndeterminateCheckbox","forwardRef","indeterminate","defaultRef","resolvedRef","PagesTable","columns","data","linksToBlocks","deleteRows","rows","row","original","treeBlockId","sourceBlock","linkRegex","updatedText","useTable","useSortBy","useRowSelect","hooks","visibleColumns","Header","getToggleAllRowsSelectedProps","Cell","getToggleRowSelectedProps","getTableProps","getTableBodyProps","headerGroups","prepareRow","selectedFlatRows","selectedRowIds","keys","downloadRows","headerGroup","getHeaderGroupProps","headers","column","scope","getHeaderProps","getSortByToggleProps","render","isSorted","isSortedDesc","getRowProps","cells","cell","getCellProps","AllPages","onMentionClick","useCallback","useMemo","accessor","sortType","rowA","rowB","desc","mentions","getData","Main","exact","path","params","Shortcuts","pageListItems","style","marginRight","FilePane","setShowFilePane","ViewPaneBlock","showBlock","setShowBlock","show","output","header","ViewPane","setShowViewPane","viewPaneBlocks","marginLeft","App","showFilePane","showViewPane","reducer","blocksReducer","filePaneReducer","viewPaneReducer","navbarReducer","linksReducer","editorReducer","store","configureStore","addEventListener","returnValue","ReactDOM","StrictMode","document","getElementById"],"mappings":"+QAYeA,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,qHCHdQ,IAAMC,OAAOC,KAEN,IAAMC,EAA4B,gBAC5BC,EAA4B,aAG5BC,EAAa,WASZ,IAAD,yDADP,GACO,IAPTC,UAOS,MAPJC,YAJS,GAWL,MANTC,gBAMS,MANE,KAMF,EALTC,EAKS,EALTA,KAKS,IAJTC,mBAIS,MAJK,GAIL,MAHTC,eAGS,MAHCC,KAAKC,MAGN,MAFTC,iBAES,MAFG,KAEH,EAAXC,EAAW,uCACLC,GAAUR,EAChB,GAAIQ,IACGF,EAAW,CACd,IAAMG,EAAqBjB,IAAMS,EAAMN,GACnCc,EAAmBC,YACtBJ,EAAYG,EAAmBE,OAAOf,IAI3C,GAAIU,EACFR,EAAKQ,OACA,GAAIR,KAAMS,EAEf,KAAOT,KAAMS,GACXT,EAAKC,YA1BO,GA6BhB,MAAO,CACLD,KACAE,WACAC,OACAC,cACAC,UACAS,QAAS,KACTN,cAISO,EAAU,SAAVA,EAAWC,EAAOP,GAC7B,OAAKO,EAAMd,SAIJa,EADaN,EAAOO,EAAMd,UACLO,GAHnBO,GAMEC,EAAmB,SAACD,EAAOP,GACtC,IAAMS,EAAYH,EAAQC,EAAOP,GACjC,OAAOO,EAAMd,WAAagB,EAAUlB,IAAMkB,EAAUd,YAAY,KAAOY,EAAMhB,IAgBlEmB,EAAiB,SAACH,EAAOP,GACpC,GAAuB,OAAnBO,EAAMd,SACR,OAAO,KAET,IAAMkB,EAAcX,EAAOO,EAAMd,UAC3BmB,EAAaD,EAAYhB,YAAYkB,QAAQN,EAAMhB,IACzD,OAAIqB,IAAeD,EAAYhB,YAAYmB,OAAS,EAC3C,KAEgBd,EAAOW,EAAYhB,YAAYiB,EAAa,KAI1DG,EAAmB,SAAnBA,EAAoBR,EAAOP,GACtC,OAAKO,EAAMZ,YAAYmB,OAIhBC,EADgBf,EAAOO,EAAMZ,YAAYqB,OAAO,IACfhB,GAH/BO,GAMEU,EAAiB,SAACV,EAAOP,GACpC,IAAKO,EAAMd,UAAYe,EAAiBD,EAAOP,GAC7C,OAAO,KAET,IAAMkB,EAtCsB,SAACX,EAAOP,GACpC,GAAuB,OAAnBO,EAAMd,SACR,OAAO,KAET,IAAMkB,EAAcX,EAAOO,EAAMd,UAC3BmB,EAAaD,EAAYhB,YAAYkB,QAAQN,EAAMhB,IACzD,OAAIqB,EAAa,EACR,KAEgBZ,EAAOW,EAAYhB,YAAYiB,EAAa,IA6BjDO,CAAeZ,EAAOP,GAC1C,OAAIkB,EACEA,EAAYvB,YAAYmB,OACnBC,EAAiBG,EAAalB,GAE9BkB,EAGWlB,EAAOO,EAAMd,WAKxB2B,EAAmB,SAAnBA,EAAoBb,EAAOP,GAAgC,IAAxBqB,IAAuB,yDACrE,GAAuB,OAAnBd,EAAMd,SACR,OAAO,KAET,GAAI4B,GAAiBd,EAAMZ,YAAYmB,OACrC,OAAOd,EAAOO,EAAMZ,YAAY,IAElC,IAAM2B,EAAcZ,EAAeH,EAAOP,GAC1C,OAAIsB,GAGGF,EAAiBpB,EAAOO,EAAMd,UAAWO,EAAQqB,GAAc,IAG3DE,EAAY,SAAZA,EAAahB,EAAOP,GAAY,IACnCL,EAA4BY,EAA5BZ,YAAgB6B,EADkB,YACNjB,EADM,iBAE1C,OAAKZ,EAAYmB,OAGV,2BACFU,GADL,IAEEC,SAAU9B,EAAY+B,KAAI,SAAAC,GACxB,IAAMC,EAAc5B,EAAO2B,GAC3B,OAAOJ,EAAUK,EAAY5B,QANxBwB,GAWEK,EAAiB,SAAjBA,EAAkBtB,EAAOP,GAAY,IAAD,EAC/C,OAAKO,EAAMZ,YAAYmB,QAGhB,GAACP,EAAMhB,KAAIuC,OAAX,oBAAqBvB,EAAMZ,YAAY+B,KAAI,SAAAC,GAAO,OAAIE,EAAe7B,EAAO2B,GAAU3B,QAFpFO,EAAMhB,I,kBCgnCFwC,G,MA9vCM,CACnB/B,OAAQ,CACNgC,KAAM,CACJzC,GAAI,OACJE,SAAU,KACVC,KAAM,cACNC,YAAa,CAAC,OAAQ,SAExBsC,KAAM,CACJ1C,GAAI,OACJE,SAAU,KACVC,KAAM,cACNC,YAAa,CAAC,SAEhBuC,KAAM,CACJ3C,GAAI,OACJE,SAAU,OACVC,KAAM,+CACNC,YAAa,IAEfwC,KAAM,CACJ5C,GAAI,OACJE,SAAU,OACVC,KAAM,0BACNC,YAAa,CAAC,OAAQ,OAExByC,KAAM,CACJ7C,GAAI,OACJE,SAAU,OACVC,KAAM,2DACNC,YAAa,IAEf0C,KAAM,CACJ9C,GAAI,OACJE,SAAU,OACVC,KAAM,0BACNC,YAAa,CAAC,OAEhB2C,GAAI,CACF/C,GAAI,KACJE,SAAU,OACVC,KAAM,gCACNC,YAAa,IAEf4C,GAAI,CACFhD,GAAI,KACJE,SAAU,OACVC,KAAM,2BACNC,YAAa,IAEf,aAAc,CACZJ,GAAI,aACJE,SAAU,KACVC,KAAM,sBACNC,YAAa,CAAC,MACdC,QAAS,aACTS,QAAS,KACTN,UAAW,cAEbyC,GAAI,CACFjD,GAAI,KACJE,SAAU,KACVC,KAAM,qBACNC,YAAa,IAEf8C,SAAU,CACRlD,GAAI,WACJE,SAAU,UACVC,KAAM,wBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb2C,QAAS,CACPnD,GAAI,UACJE,SAAU,KACVC,KAAM,UACNC,YAAa,CAAC,WAAY,WAAY,WAAY,YAClDC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,UACVC,KAAM,yCACNC,YAAa,CAAC,WAAY,WAAY,YACtCC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb4C,SAAU,CACRpD,GAAI,WACJE,SAAU,WACVC,KAAM,gDACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb6C,SAAU,CACRrD,GAAI,WACJE,SAAU,WACVC,KAAM,0CACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb8C,SAAU,CACRtD,GAAI,WACJE,SAAU,WACVC,KAAM,iCACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb+C,SAAU,CACRvD,GAAI,WACJE,SAAU,WACVC,KAAM,kCACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,UACVC,KAAM,sDACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbgD,SAAU,CACRxD,GAAI,WACJE,SAAU,WACVC,KAAM,gCACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,UACVC,KACE,sGACFC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbiD,SAAU,CACRzD,GAAI,WACJE,SAAU,WACVC,KAAM,mCACNC,YAAa,CAAC,WAAY,YAC1BC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbkD,SAAU,CACR1D,GAAI,WACJE,SAAU,KACVC,KAAM,YACNC,YAAa,CACX,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,YAEFC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEbmD,SAAU,CACR3D,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,WAAY,YAC1BC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEboD,SAAU,CACR5D,GAAI,WACJE,SAAU,WACVC,KAAM,oBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,mCACNC,YAAa,CAAC,WAAY,YAC1BC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbqD,SAAU,CACR7D,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,KACVC,KAAM,SACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbsD,SAAU,CACR9D,GAAI,WACJE,SAAU,aACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,aAAc,CACZR,GAAI,aACJE,SAAU,KACVC,KAAM,kBACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,cAEbuD,SAAU,CACR/D,GAAI,WACJE,SAAU,WACVC,KAAM,+DACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbwD,SAAU,CACRhE,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbyD,SAAU,CACRjE,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb0D,SAAU,CACRlE,GAAI,WACJE,SAAU,WACVC,KAAM,mCACNC,YAAa,CAAC,WAAY,YAC1BC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb2D,SAAU,CACRnE,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb4D,SAAU,CACRpE,GAAI,WACJE,SAAU,KACVC,KAAM,SACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb6D,SAAU,CACRrE,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb8D,SAAU,CACRtE,GAAI,WACJE,SAAU,aACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,aAAc,CACZR,GAAI,aACJE,SAAU,KACVC,KAAM,kBACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,cAEb+D,SAAU,CACRvE,GAAI,WACJE,SAAU,WACVC,KAAM,yBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbgE,SAAU,CACRxE,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,WAAY,YAC1BC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbiE,SAAU,CACRzE,GAAI,WACJE,SAAU,WACVC,KAAM,2CACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbkE,SAAU,CACR1E,GAAI,WACJE,SAAU,WACVC,KACE,yGACFC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbmE,SAAU,CACR3E,GAAI,WACJE,SAAU,WACVC,KAAM,uCACNC,YAAa,CAAC,WAAY,YAC1BC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEboE,SAAU,CACR5E,GAAI,WACJE,SAAU,KACVC,KAAM,SACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEbqE,SAAU,CACR7E,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbsE,SAAU,CACR9E,GAAI,WACJE,SAAU,aACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,aAAc,CACZR,GAAI,aACJE,SAAU,KACVC,KAAM,sBACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,cAEbuE,SAAU,CACR/E,GAAI,WACJE,SAAU,WACVC,KAAM,kDACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbwE,SAAU,CACRhF,GAAI,WACJE,SAAU,WACVC,KAAM,cACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbyE,SAAU,CACRjF,GAAI,WACJE,SAAU,WACVC,KAAM,uDACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb0E,SAAU,CACRlF,GAAI,WACJE,SAAU,WACVC,KAAM,uCACNC,YAAa,CAAC,WAAY,WAAY,YACtCC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb2E,SAAU,CACRnF,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb4E,SAAU,CACRpF,GAAI,WACJE,SAAU,KACVC,KAAM,SACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb6E,SAAU,CACRrF,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,aACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,aAAc,CACZR,GAAI,aACJE,SAAU,KACVC,KAAM,sBACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,cAEb8E,SAAU,CACRtF,GAAI,WACJE,SAAU,WACVC,KAAM,eACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb+E,SAAU,CACRvF,GAAI,WACJE,SAAU,WACVC,KAAM,cACNC,YAAa,CAAC,WAAY,WAAY,YACtCC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbgF,SAAU,CACRxF,GAAI,WACJE,SAAU,WACVC,KAAM,mBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbiF,SAAU,CACRzF,GAAI,WACJE,SAAU,WACVC,KAAM,aACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbkF,SAAU,CACR1F,GAAI,WACJE,SAAU,WACVC,KAAM,8BACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,0BACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbmF,SAAU,CACR3F,GAAI,WACJE,SAAU,WACVC,KAAM,aACNC,YAAa,CAAC,WAAY,WAAY,YACtCC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEboF,SAAU,CACR5F,GAAI,WACJE,SAAU,WACVC,KAAM,mDACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbqF,SAAU,CACR7F,GAAI,WACJE,SAAU,WACVC,KAAM,UACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbsF,SAAU,CACR9F,GAAI,WACJE,SAAU,WACVC,KAAM,cACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbuF,SAAU,CACR/F,GAAI,WACJE,SAAU,WACVC,KAAM,uCACNC,YAAa,CAAC,WAAY,WAAY,YACtCC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbwF,SAAU,CACRhG,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEbyF,SAAU,CACRjG,GAAI,WACJE,SAAU,KACVC,KAAM,SACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb0F,SAAU,CACRlG,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb2F,SAAU,CACRnG,GAAI,WACJE,SAAU,aACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,aAAc,CACZR,GAAI,aACJE,SAAU,KACVC,KAAM,sBACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,cAEb4F,SAAU,CACRpG,GAAI,WACJE,SAAU,WACVC,KAAM,iBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,cACNC,YAAa,CAAC,WAAY,WAAY,YACtCC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb6F,SAAU,CACRrG,GAAI,WACJE,SAAU,WACVC,KACE,0FACFC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KACE,uEACFC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb8F,SAAU,CACRtG,GAAI,WACJE,SAAU,WACVC,KAAM,2BACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb+F,SAAU,CACRvG,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbgG,SAAU,CACRxG,GAAI,WACJE,SAAU,WACVC,KAAM,oBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbiG,SAAU,CACRzG,GAAI,WACJE,SAAU,WACVC,KAAM,uCACNC,YAAa,CAAC,WAAY,YAC1BC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbkG,SAAU,CACR1G,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEbmG,SAAU,CACR3G,GAAI,WACJE,SAAU,KACVC,KAAM,SACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEboG,SAAU,CACR5G,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbqG,SAAU,CACR7G,GAAI,WACJE,SAAU,aACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,aAAc,CACZR,GAAI,aACJE,SAAU,KACVC,KAAM,sBACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,cAEbsG,SAAU,CACR9G,GAAI,WACJE,SAAU,WACVC,KAAM,cACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbuG,SAAU,CACR/G,GAAI,WACJE,SAAU,WACVC,KACE,uEACFC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbwG,SAAU,CACRhH,GAAI,WACJE,SAAU,WACVC,KAAM,cACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbyG,SAAU,CACRjH,GAAI,WACJE,SAAU,WACVC,KAAM,sBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,uCACNC,YAAa,CAAC,WAAY,YAC1BC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb0G,SAAU,CACRlH,GAAI,WACJE,SAAU,KACVC,KAAM,SACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb2G,SAAU,CACRnH,GAAI,WACJE,SAAU,aACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,aAAc,CACZR,GAAI,aACJE,SAAU,KACVC,KAAM,sBACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,cAEb4G,SAAU,CACRpH,GAAI,WACJE,SAAU,WACVC,KAAM,uDACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb6G,SAAU,CACRrH,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,WAAY,YAC1BC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb8G,SAAU,CACRtH,GAAI,WACJE,SAAU,WACVC,KAAM,sDACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KACE,gFACFC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb+G,SAAU,CACRvH,GAAI,WACJE,SAAU,WACVC,KAAM,uCACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbgH,SAAU,CACRxH,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEbiH,SAAU,CACRzH,GAAI,WACJE,SAAU,KACVC,KAAM,SACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEbkH,SAAU,CACR1H,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbmH,SAAU,CACR3H,GAAI,WACJE,SAAU,aACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,aAAc,CACZR,GAAI,aACJE,SAAU,KACVC,KAAM,sBACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,cAEboH,SAAU,CACR5H,GAAI,WACJE,SAAU,WACVC,KAAM,+BACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,uCACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbqH,SAAU,CACR7H,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEbsH,SAAU,CACR9H,GAAI,WACJE,SAAU,KACVC,KAAM,SACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEbuH,SAAU,CACR/H,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,iDACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbwH,SAAU,CACRhI,GAAI,WACJE,SAAU,WACVC,KAAM,uCACNC,YAAa,CAAC,WAAY,WAAY,YACtCC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbyH,SAAU,CACRjI,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb0H,SAAU,CACRlI,GAAI,WACJE,SAAU,KACVC,KAAM,SACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb2H,SAAU,CACRnI,GAAI,WACJE,SAAU,WACVC,KACE,4HACFC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,iEACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb4H,SAAU,CACRpI,GAAI,WACJE,SAAU,WACVC,KACE,oFACFC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb6H,SAAU,CACRrI,GAAI,WACJE,SAAU,WACVC,KAAM,YACNC,YAAa,CAAC,WAAY,YAC1BC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,2CACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb8H,SAAU,CACRtI,GAAI,WACJE,SAAU,aACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,aAAc,CACZR,GAAI,aACJE,SAAU,KACVC,KAAM,kBACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,cAEb+H,SAAU,CACRvI,GAAI,WACJE,SAAU,WACVC,KAAM,2BACNC,YAAa,CAAC,WAAY,YAC1BC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,qDACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbgI,SAAU,CACRxI,GAAI,WACJE,SAAU,WACVC,KAAM,6BACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,iDACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,cACTN,UAAW,MAEbiI,SAAU,CACRzI,GAAI,WACJE,SAAU,aACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEb,aAAc,CACZR,GAAI,aACJE,SAAU,KACVC,KAAM,mBACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,cAEb,WAAY,CACVR,GAAI,WACJE,SAAU,WACVC,KAAM,qBACNC,YAAa,GACbC,QAAS,cACTS,QAAS,KACTN,UAAW,MAEbkI,SAAU,CACR1I,GAAI,WACJE,SAAU,KACVC,KAAM,SACNC,YAAa,CAAC,YACdC,QAAS,cACTS,QAAS,KACTN,UAAW,OAGfmI,SAAU,CACRC,iBAAkB,CAAC,UAAW,OAAQ,OAAQ,aAEhDC,SAAU,CACRC,MAAO,CACL,CACEC,KAAM,OACNC,QAAS,UAIfC,OAAQ,CACNC,YAAa,IAEfC,MAAO,CACLC,GAAI,CACF1G,KAAM,CAAC,QACP2G,SAAU,GACV,aAAc,CAAC,WAAY,YAC3B3F,SAAU,CAAC,YACX,WAAY,CAAC,YACb,aAAc,CAAC,WAAY,YAC3BU,SAAU,CAAC,YACX,aAAc,CAAC,WAAY,YAC3BQ,SAAU,CAAC,YACX,aAAc,CAAC,WAAY,YAC3BQ,SAAU,CAAC,YACX,aAAc,CAAC,WAAY,YAC3Ba,SAAU,CAAC,YACX,aAAc,CAAC,WAAY,YAC3BU,SAAU,CAAC,YACX,aAAc,CAAC,WAAY,YAC3BO,SAAU,CAAC,YACX,aAAc,CAAC,WAAY,YAC3BO,SAAU,CAAC,YACX,aAAc,CACZ,WACA,WACA,WACA,WACA,WACA,YAEFK,SAAU,CAAC,YACXI,SAAU,CAAC,YACXzF,KAAM,CAAC,YACPiG,SAAU,CAAC,aAEbY,KAAM,CACJ1G,KAAM,CAAC,QACPa,SAAU,CAAC,aAAc,YACzB8F,SAAU,CAAC,cACX,WAAY,CAAC,YACb,WAAY,CAAC,aAAc,YAC3BC,SAAU,CAAC,cACXtF,SAAU,CAAC,aAAc,YACzBuF,SAAU,CAAC,cACX9E,SAAU,CAAC,aAAc,YACzB,WAAY,CAAC,cACbO,SAAU,CAAC,aAAc,YACzBwE,SAAU,CAAC,cACX3D,SAAU,CAAC,aAAc,YACzB4D,SAAU,CAAC,cACXlD,SAAU,CAAC,aAAc,YACzB,WAAY,CAAC,cACb,WAAY,CAAC,aAAc,YAC3BmD,SAAU,CAAC,cACXrC,SAAU,CAAC,aAAc,YACzB,WAAY,CAAC,cACb,WAAY,CAAC,aAAc,YAC3BsC,SAAU,CAAC,cACX7B,SAAU,CAAC,aAAc,YACzB,WAAY,CAAC,cACb1E,SAAU,CAAC,UAGfwG,OAAQ,CACNC,aAAc,CACZf,QAAS,GACTgB,QAAQ,EACRC,SAAU,MCrvCVC,EAAgBC,YAAY,CAChCC,KAAM,WACN5H,aAAcA,EAAaqG,SAC3BwB,SAAU,CACRC,iBAAkB,SAACC,EAAOC,GACxB,IAAMC,EAAWD,EAAOE,QACxB,GAAID,GAAY,UAAWA,EACzB,OAAOA,GAGXE,SAAU,SAACJ,EAAOC,GAAY,IAAD,EACDA,EAAOE,QAAzB3B,EADmB,EACnBA,KAAMC,EADa,EACbA,QACKuB,EAAMzB,MAAM8B,MAAK,SAAAC,GAAI,OAAIA,EAAK9B,OAASA,GAAQ8B,EAAK7B,UAAYA,MAEjFuB,EAAMzB,MAAMgC,QAAQN,EAAOE,UAG/BK,QAAS,SAACR,EAAOC,GAAY,IAAD,EACAA,EAAOE,QAAzB3B,EADkB,EAClBA,KAAMC,EADY,EACZA,QACduB,EAAMzB,MAAQyB,EAAMzB,MAAMkC,QAAO,SAAAH,GAAI,MAAc,QAAT9B,GAAkB8B,EAAK9B,OAASA,GAAS8B,EAAK7B,UAAYA,S,EAKnDkB,EAAce,QAAtDX,E,EAAAA,iBAAkBK,E,EAAAA,SAAUI,E,EAAAA,QAC5Bb,IAAf,Q,OCMegB,EA3BE,SAAC,GAA0E,IAAxElC,EAAuE,EAAvEA,QAAuE,IAA9DtI,cAA8D,SAA/CwB,EAA+C,EAA/CA,SAAUiJ,EAAqC,EAArCA,UAAWC,EAA0B,EAA1BA,WAAeC,EAAW,wEACnFC,EAAWC,cACXnC,EAAE,gBAAYJ,GAapB,OACE,cAAC,IAAD,yBACEI,GAAIA,EACJoC,QAda,SAAAC,GACXA,EAAMC,WACRD,EAAME,iBACNL,EAASX,EAAS,CAAE5B,KAAMrI,EAAS,OAAS,QAASsI,QAASA,MAE5DoC,GACFA,IAEFK,EAAMG,mBAOJC,UAAS,oBAAeV,EAAY,0BAA4B,KAC5DE,GAJN,aAMGnJ,MC4FQ4J,EAlHI,SAAC,GAAuB,IAArB9K,EAAoB,EAApBA,MAAOgJ,EAAa,EAAbA,OAAa,EACI+B,oBAAS,GADb,mBACjCC,EADiC,KACjBC,EADiB,OAEQF,oBAAS,GAFjB,mBAEjCG,EAFiC,KAEfC,EAFe,OAGAJ,mBAAS,MAHT,mBAGjCK,EAHiC,KAGnBC,EAHmB,KAIlCC,EAAaC,aAAY,SAAAhC,GAAK,OAAIA,EAAMpB,MAAMC,GAAGpI,EAAMhB,OACvDS,EAAS8L,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,UA2E1C,OACE,gCACsB,OAAnBO,EAAMd,UAAqBoM,GAAcA,EAAW/K,OAAS,GAAKyI,GACjE,sBAAK6B,UAAU,gCAAf,UACE,uBAAMA,UAAU,+BAA+BL,QAAS,kBAAMS,GAAkB,SAAA1B,GAAK,OAAKA,MAA1F,UACGyB,EACG,cAAC,IAAD,CAAeQ,MAAM,QAAQC,KAAM,KACnC,cAAC,IAAD,CAAgBD,MAAM,QAAQC,KAAM,KAExC,8BAAIH,EAAW/K,OAAf,2BAEDyK,GApFsB,WAC7B,IAAIhL,EAAMd,UAAaoM,GAAeA,EAAW/K,OAGjD,OAAO+K,EAAWnK,KAAI,SAAAuK,GACpB,KAAMA,KAAoBjM,GACxB,OAAO,KAET,IAAMkM,EAAiBlM,EAAOiM,GACxBE,EAAqB7L,EAAQ4L,EAAgBlM,GACnD,OACE,gCACE,cAAC,EAAD,CAAUuI,QAAS4D,EAAmB5M,GAAtC,SAA0C,6BAAK4M,EAAmBzM,SAClE,qBAAK0L,UAAU,sBAAf,SACE,cAAC,GAAD,CACE7C,QAAS0D,EACTG,QAAQ,EACR7C,OAAQA,EACR8C,MAAI,EACJC,iBAAe,QARXL,MA0ENM,MAIc,OAAnBhM,EAAMd,UAAqB8J,GAC1B,sBAAK6B,UAAU,kCAAf,UACE,uBAAMA,UAAU,+BAA+BL,QA3BtB,SAAAC,GAC3BS,EACFC,GAAoB,IAEpBA,GAAoB,GACpBE,EA1C0B,SAAAlM,GAC5B,IAAM8M,EAAW,IAAIC,OAAJ,uBAA2B/M,EAA3B,iBAAgD,MAGjE,OAFgCgN,OAAOC,OAAO3M,GAC3CuK,QAAO,SAAA2B,GAAc,OAAIA,EAAezM,UAAY+M,EAASI,KAAKV,EAAexM,SAuClEmN,CAAsBtM,EAAMb,SAsBxC,UACG+L,EACG,cAAC,IAAD,CAAeM,MAAM,QAAQC,KAAM,KACnC,cAAC,IAAD,CAAgBD,MAAM,QAAQC,KAAM,KAExC,8BAAIL,GAAgBA,EAAa7K,OAAS6K,EAAa7K,OAAS,GAAhE,6BAED2K,GAhEwB,WAC/B,IAAIlL,EAAMd,UAAagM,EAGvB,OAAKE,EAAa7K,OAGoB6K,EACnCjK,KAAI,SAAAwK,GACH,IAAMC,EAAqB7L,EAAQ4L,EAAgBlM,GACnD,OACE,gCACE,cAAC,EAAD,CAAUuI,QAAS4D,EAAmB5M,GAAtC,SACE,6BAAK4M,EAAmBzM,SAE1B,qBAAK0L,UAAU,sBAAf,SACE,cAAC,GAAD,CACE7C,QAAS2D,EAAe3M,GACxB6M,QAAQ,EACR7C,OAAQA,EACR8C,MAAI,EACJC,iBAAe,QAVXJ,EAAe3M,OANtB,uDA4DDuN,U,yCChHCC,EAAe,SAACrN,EAAM8J,GACjC,IAD8C,EAExCwD,EAAUtN,EAAKuN,SADC,+BAKlBC,GAAkB,EAClBC,EAAiB,KAPyB,cAS1BH,GAT0B,IAS9C,2BAA6B,CAAC,IAAnBI,EAAkB,QACrBC,EAAmBD,EAAM,GACzBE,EAAoBF,EAAMG,MAC1BC,EAAkBF,EAAoBD,EAAiBvM,OAAS,EAEtE,GADAoM,EAAmBI,EAAoB,GAAM9D,GAAYA,GAAYgE,EAGnE,MAAO,CAAEF,oBAAmBE,kBAAiBN,kBAAiBC,eAD9DA,EAAiBC,EAAM,KAfmB,8BAmB9C,MAAO,CAAEE,mBAfgB,EAeGE,iBAdL,EAcsBN,kBAAiBC,mBCd1DM,EAAc/D,YAAY,CAC9BC,KAAM,SACN5H,aAAcA,EAAa/B,OAC3B4J,SAAU,CACR8D,eAAgB,SAAC5D,EAAOC,GACtB,IAAMC,EAAWD,EAAOE,QACxB,GAAID,GAAgC,kBAAbA,EACrB,OAAOA,GAGX2D,SAAU,SAAC7D,EAAOC,GAChB,IAAMxJ,EAAQwJ,EAAOE,QACrB,GAAK1J,EAAMd,SAIJ,CACeqK,EAAMvJ,EAAMd,UACpBE,YAAYiO,KAAKrN,EAAMhB,QANhB,CACnB,IAAMqC,EAAatC,EAAW,CAAEG,SAAUc,EAAMhB,GAAIG,KAfvC,sBAe6DoK,GAC1EvJ,EAAMZ,YAAYiO,KAAKhM,EAAWrC,IAClCuK,EAAMlI,EAAWrC,IAAMqC,EAKzBkI,EAAMvJ,EAAMhB,IAAMgB,GAEpBsN,YAAa,SAAC/D,EAAOC,GAAY,IACvBxB,EAAYwB,EAAOE,QAAnB1B,QACFhI,EAAQuJ,EAAMvB,GAEpB,IAAIhI,EAAMZ,YAAYmB,OAAtB,CAGA,IAAMH,EAAcmJ,EAAMvJ,EAAMd,UAChCqK,EAAMvJ,EAAMd,UAAUE,YAAcgB,EAAYhB,YAAY4K,QAAO,SAAAuD,GAAY,OAAIA,IAAiBvF,YAC7FuB,EAAMvB,KAEfwF,WAAY,SAACjE,EAAOC,GAAY,IACtBxB,EAAYwB,EAAOE,QAAnB1B,QACFhI,EAAQuJ,EAAMvB,GACpB,GAAKhI,EAAMZ,YAAYmB,OAAvB,CAH6B,oBAOFP,EAAMZ,aAPJ,IAO7B,2BAA8C,CAAC,IAApCmO,EAAmC,QAC5CL,EAAYO,aAAaD,WAAWjE,EAAO,CAAEG,QAAS,CAAE1B,QAASuF,MARtC,qCAUtBhE,EAAMvB,eANJuB,EAAMvB,IAQjB0F,aAAc,SAACnE,EAAOC,GAAY,IAAD,EACDA,EAAOE,QAA7B1B,EADuB,EACvBA,QAAS9I,EADc,EACdA,SACHqK,EAAMvB,GACd9I,SAAWA,EACGqK,EAAMrK,GACdE,YAAYiO,KAAKrF,IAE/B2F,YAAa,SAACpE,EAAOC,GAAY,IAAD,EACmBA,EAAOE,QAAhD1B,EADsB,EACtBA,QAAS9I,EADa,EACbA,SAAUE,EADG,EACHA,YAAaD,EADV,EACUA,KAClCa,EAAQuJ,EAAMvB,GACpB,GAAIhI,EAAO,CACTA,EAAMd,SAAWA,GAAYc,EAAMd,SACnCc,EAAMZ,YAAcA,GAAeY,EAAMZ,YACzC,IAAMwO,EAAc5N,EAAMb,KAC1Ba,EAAMb,KAAuB,kBAATA,EAAoBA,EAAOyO,EAC/C5N,EAAMF,QAAUR,KAAKC,MACrBgK,EAAMvB,GAAWhI,EACZA,EAAMd,UACTgO,EAAYO,aAAaI,YAAYtE,EAAO,CAAEG,QAAS,CAAEoE,aAAcF,EAAaG,SAAU5O,OAIpG0O,YAAa,SAACtE,EAAOC,GAAY,IAAD,EACKA,EAAOE,QAAlCoE,EADsB,EACtBA,aAAcC,EADQ,EACRA,SAChBC,EAAU,IAAI9B,OAAJ,gBAAoB4B,EAApB,UAA0C,KAC1D3B,OAAOC,OAAO7C,GACXpI,KAAI,SAAAnB,GAIH,OAHIgO,EAAQ3B,KAAKrM,EAAMb,QACrBoK,EAAMvJ,EAAMhB,IAAIG,KAAOa,EAAMb,KAAK8O,QAAX,YAAwBH,EAAxB,kBAA+CC,EAA/C,SAElB,MAGbG,gBAAiB,SAAC3E,EAAOC,GAAY,IAAD,EACHA,EAAOE,QAA9B1B,EAD0B,EAC1BA,QAASmG,EADiB,EACjBA,UACXnO,EAAQuJ,EAAMvB,GACd5H,EAAcmJ,EAAMvJ,EAAMd,UAC1BmB,EAAaD,EAAYhB,YAAYkB,QAAQN,EAAMhB,IACzD,GAAkB,YAAdmP,GACF,GAAI9N,EAAa,EAAG,CAClB,IAAM+N,EAAkB7E,EAAMnJ,EAAYhB,YAAYiB,EAAW,IACjED,EAAYhB,YAAYiP,OAAOhO,EAAY,GAC3C+N,EAAgBhP,YAAYiO,KAAKrF,GACjChI,EAAMd,SAAWkP,EAAgBpP,QAE9B,CACL,IAAMoB,EAAcmJ,EAAMvJ,EAAMd,UAChC,GAAIkB,EAAYlB,SAAU,CACxB,IAAMoP,EAAmB/E,EAAMnJ,EAAYlB,UACrCqP,EAAmBD,EAAiBlP,YAAYkB,QAAQF,EAAYpB,KAChD,IAAtBuP,IACFnO,EAAYhB,YAAYiP,OAAOhO,EAAY,GAC3CiO,EAAiBlP,YAAYiP,OAAOE,EAAmB,EAAG,EAAGvG,GAC7DhI,EAAMd,SAAWoP,EAAiBtP,OAK1CwP,YAAa,SAACjF,EAAOC,GAAY,IAAD,EACwBA,EAAOE,QAArD+E,EADsB,EACtBA,oBAAqBC,EADC,EACDA,qBACvBC,EAAepF,EAAMkF,GAC3B,GAAIE,EAAazP,SAAU,CACzB,IAAM0P,EAAgBrF,EAAMmF,GAC5B,GAAIE,EAAc1P,SAAU,CAC1B,IAAM2P,EAAsBtF,EAAMqF,EAAc1P,UAC1C4P,EAAqBD,EAAoBzP,YAAYkB,QAAQoO,GACnEG,EAAoBzP,YAAYiP,OAAOS,EAAoB,GAE7D,IAAMC,EAAqBxF,EAAMoF,EAAazP,UACxC8P,EAAoBD,EAAmB3P,YAAYkB,QAAQmO,GACjElF,EAAMwF,EAAmB/P,IAAII,YAAYiP,OAAOW,EAAkB,EAAG,EAAGN,Q,EAe5ExB,EAAYjD,QARdkD,E,EAAAA,eAEAC,G,EADA6B,e,EACA7B,UACAE,E,EAAAA,YACAE,G,EAAAA,WACAG,G,EAAAA,YACAO,G,EAAAA,gBACAM,G,EAAAA,YAEatB,KAAf,QCxIMgC,GAAc/F,YAAY,CAC9BC,KAAM,SACN5H,aAAc,CACZuH,aAAc,CACVf,QAAS,GACTgB,QAAQ,EACRC,SAAU,IAGhBI,SAAU,CACR8F,eAAgB,SAAC5F,EAAOC,GACtB,IAAMC,EAAWD,EAAOE,QACxB,GAAID,GAAY,iBAAkBA,EAChC,OAAOA,GAGX2F,mBAAoB,SAAC7F,EAAOC,GAC1BD,EAAMR,aAAeS,EAAOE,Y,GAKoBwF,GAAYjF,QAAnDkF,G,GAAAA,eAAgBC,G,GAAAA,mBAChBF,MAAf,QC0DeG,I,MA5EA,SAAC,GAAiF,IAA/EC,EAA8E,EAA9EA,MAAOC,EAAuE,EAAvEA,SAAUC,EAA6D,EAA7DA,cAAeC,EAA8C,EAA9CA,UAAWC,EAAmC,EAAnCA,cAAeC,EAAoB,EAApBA,cACpElQ,EAAS8L,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,UAEtCmQ,EAAc,GAClB,GAAIN,GAASA,EAAM/O,OAAQ,CACzB,IAAMsP,EAAqB1D,OAAOC,OAAO3M,GACtCuK,QAAO,SAAAhK,GACN,QAAIyP,GAAgC,OAAnBzP,EAAMd,YAGe,IAA/Bc,EAAMb,KAAKmB,QAAQgP,MA4B9B,GAzBAM,EAAcC,EAAmB1O,KAAI,SAAAnB,GACnC,OAAIuP,EAEA,cAAC,EAAD,CACEvH,QAAShI,EAAMhB,GACf6L,UAAU,gBAEVT,WAAYoF,EAJd,SAMGxP,EAAMb,MAHFa,EAAMhB,IAQb,oBACE6L,UAAU,gBAEViF,YAAaN,EAAcO,KAAK,KAAM/P,GAHxC,SAKGA,EAAMb,MAHFa,EAAMhB,OASf0Q,GAGF,UAD2CM,IADlBH,EACtBjG,MAAK,SAAA5J,GAAK,OAAIA,EAAMb,OAASmQ,MACT,CACrB,IAAMW,EACJ,qBAEEpF,UAAU,gBACVL,QAASmF,EAHX,UAKE,uCALF,IAKiBL,IALjB,mBACmBA,IAOrBM,EAAYvB,OAAO,EAAG,EAAG4B,SAEtB,IAAKL,EAAYrP,OAAQ,CAC5B,IAAM2P,EACJ,oBAA+BrF,UAAU,gBAAzC,SACE,sDADF,sBAIF+E,EAAYvB,OAAO,EAAG,EAAG6B,IAI/B,OACE,cAAC,IAAMC,SAAP,UACGP,EAAYrP,OAAS,GACpB,qBAAKsK,UAAU,iBAAf,SACE,oBAAIA,UAAU,8BAAd,SACG+E,UCmKEQ,GAnOG,SAAC,GAAuE,IAArEpQ,EAAoE,EAApEA,MAAOgJ,EAA6D,EAA7DA,OAAQqH,EAAqD,EAArDA,QAASC,EAA4C,EAA5CA,YAAaC,EAA+B,EAA/BA,eAAgBC,EAAe,EAAfA,SAClElG,EAAWC,cACXkG,EAAWC,iBAAO,MAF+D,EAIrD3F,oBAAS,GAJ4C,mBAIhF4F,EAJgF,KAIrEC,EAJqE,KAKjF7H,EAAewC,aAAY,SAAAhC,GAAK,OAAIA,EAAMT,OAAOC,gBACjDtJ,EAAS8L,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,UAN6C,EAO7DsL,oBAAS,GAPoD,mBAOhFuE,EAPgF,KAOzEuB,EAPyE,KAkCjFC,EAAQ,SAAArG,GACZA,EAAME,iBACNoG,EAAKtG,EAAMuG,OAAOC,OACdxG,EAAMC,SACRJ,EAAS4D,GAAgB,CAAElG,QAAShI,EAAMhB,GAAImP,UAAW,cAEzD7D,EAAS4D,GAAgB,CAAElG,QAAShI,EAAMhB,GAAImP,UAAW,aAE3D7D,EAAS8E,GAAmB,CAAEpH,QAAShI,EAAMhB,GAAIgK,SAAQC,SAAUwB,EAAMuG,OAAOE,mBAG5EC,EAAU,SAAA1G,GACdA,EAAME,iBACN,IAAIyG,EAAe,GACnB,GAAI3G,EAAMuG,OAAOE,iBAAmBzG,EAAMuG,OAAOC,MAAM1Q,OAAQ,CAE7D,IAAM8Q,EAAQ5G,EAAMuG,OAAOE,eAC3BE,EAAepR,EAAMb,KAAKmS,UAAUD,GACpC,IAAME,EAAgBvR,EAAMb,KAAKmS,UAAU,EAAGD,GAC9C/G,EAASqD,GAAY,CAAE3F,QAAShI,EAAMhB,GAAIG,KAAMoS,KAChD9G,EAAMuG,OAAOC,MAAQM,EAEvB,IAAMtQ,EAAWlC,EAAW,CAAEI,KAAMiS,EAAclS,SAAUc,EAAMd,UAAYO,GAC9E6K,EAAS8C,EAASnM,IAClBqJ,EAASkE,GAAY,CAAEC,oBAAqBzO,EAAMhB,GAAI0P,qBAAsBzN,EAASjC,MACrFsL,EAAS8E,GAAmB,CAAEpH,QAAS/G,EAASjC,GAAIgK,SAAQC,SAAU,MAGlEuI,EAAgB,SAAA/G,GACpBA,EAAME,iBACN,IAAM1B,EAAWwB,EAAMuG,OAAOE,eACxBD,EAAQxG,EAAMuG,OAAOC,MACrBQ,EAAWR,EAAMS,OAAOzI,EAAW,GAIzC,GAHAwB,EAAMuG,OAAOC,MAAQA,EAAMK,UAAU,EAAGrI,GAAY,KAAOgI,EAAMK,UAAUrI,EAAUgI,EAAM1Q,QAC3FkK,EAAMuG,OAAOE,eAAiBjI,EAAW,EACzCwB,EAAMuG,OAAOW,aAAe1I,EAAW,EACtB,MAAbwI,IAAqBd,EAGvB,OAFAC,GAAa,QACbC,EAAS,IAGTD,GAAa,IAIXgB,EAAc,SAAAnH,GAClB,GAAwC,IAApCgG,EAASoB,QAAQX,iBAGjBlR,EAAMZ,YAAYmB,OAAtB,CAGAkK,EAAME,iBACN,IAAMmH,EAAmBpR,EAAeV,EAAOP,GAC/C,GAAKqS,EAAL,CAGA,IAAMC,EAAcD,EAAiB3S,KAAKoB,OAC1C+J,EAASqD,GAAY,CAAE3F,QAAS8J,EAAiB9S,GAAIG,KAAM2S,EAAiB3S,KAAOa,EAAMb,QACzFmL,EAASgD,EAAY,CAAEtF,QAAShI,EAAMhB,MACtCsL,EAAS8E,GAAmB,CAAEpH,QAAS8J,EAAiB9S,GAAIgK,SAAQC,SAAU8I,QAG1EC,EAAkB,SAAAvH,GACtB,IAAMwH,EAAwB,YAAdxH,EAAMyH,IAChBC,EAAUC,OAAOC,iBAAiB5H,EAAMuG,QACxCsB,EAAaC,SAASJ,EAAQK,iBAAiB,gBAC/CvJ,EAAWwB,EAAMuG,OAAOE,eACxBuB,EJzFuB,SAAChC,EAAU6B,GAE1C,OADgBI,IAAoBjC,EAAUA,EAASS,gBAA/CyB,KACML,EIuFYM,CAAkBnI,EAAMuG,OAAQsB,GAClDO,EJrFsB,SAACpC,EAAU6B,GAAgB,IACjDK,EAAQD,IAAoBjC,EAAUA,EAASS,gBAA/CyB,IACR,OAAOlC,EAASqC,cAAgBH,EAAML,EImFbS,CAAiBtI,EAAMuG,OAAQsB,GACtD,GAAIG,GAAmBR,IAAYhS,EAAiBD,EAAOP,GAAS,CAClE,IAAMkB,EAAcD,EAAeV,EAAOP,GACtCkB,IACF2J,EAAS8E,GAAmB,CAAEpH,QAASrH,EAAY3B,GAAIiK,WAAUD,YACjEyB,EAAME,uBAEH,GAAIkI,IAAmBZ,EAAS,CACrC,IAAMlR,EAAcF,EAAiBb,EAAOP,GACxCsB,IACFuJ,EAAS8E,GAAmB,CAAEpH,QAASjH,EAAY/B,GAAIiK,WAAUD,YACjEyB,EAAME,oBAoENoG,EAAO,SAAA5R,GACPa,EAAMb,OAASA,GACjBmL,EAASqD,GAAY,CAAE3F,QAAShI,EAAMhB,GAAIG,WAIxC6T,EAAiBjK,EAAaf,SAC/Be,EAAaf,UAAYhI,EAAMhB,IAC/B+J,EAAaC,SAAWA,IACvBiK,MAAMlK,EAAaE,UAErB+J,GAAkBvC,EAASoB,SAC7BpB,EAASoB,QAAQqB,QASnB,OACE,sBAAKrI,UAAU,gCAAf,UACE,cAAC,IAAD,CACEsI,IAAK1C,EACL5F,UAAS,qCAAgCwF,EAAU,qBAAsB,IACzE+C,WAAS,EACTC,QApCc,SAAA5I,GACduI,GACFvI,EAAMuG,OAAOE,eAAiBnI,EAAaE,SAC3CwB,EAAMuG,OAAOW,aAAe5I,EAAaE,UACR,OAAxBqH,EAAYgD,SA3CS,SAACC,GACjC,GAAKA,EAAL,CAUA,IANA,IAAMC,EAAgB,CAAC,IAAK,KACtBC,EAAeF,EAAUtC,MAE3ByC,EAAc,IACdC,EAAqB,EACrBC,EAAuB,GAClB3K,EAAW,EAAGA,GAAYsK,EAAUtC,MAAM1Q,OAAQ0I,IAAY,CACrE,IAAM4K,EAAcN,EAAUtC,MAAMS,OAAOzI,GAC3C,GAAIuK,EAAcM,SAASD,GAAc,CACvC,IAAME,EAAQR,EAAUtC,MAAM+C,MAAM,IACpCD,EAAM1F,OAAOpF,EAAU,GACvBsK,EAAUtC,MAAQ8C,EAAME,KAAK,IAC7BL,EAAqBvG,KAAKpE,GAC1BA,IAPmE,MASzCyJ,IAAoBa,EAAWtK,GAA7CiL,EATuD,EAS7DC,KAAcC,EAT+C,EASpDzB,IACX0B,EAAWC,KAAKC,KAAKD,KAAKE,IAAKN,EAAI5D,EAAYgD,QAAU,GAAKgB,KAAKE,IAAKJ,EAAI9D,EAAYmE,QAAU,IACpGJ,EAAWX,IACbA,EAAcW,EACdV,EAAqB1K,GAIzBsK,EAAUtC,MAAQwC,EAClB,IAAI1B,EAAc4B,EACdC,EAAqBrT,QAAUqT,EAAqB,IAAM7B,IAC5DA,GAAe6B,EAAqB5J,QAAO,SAAAgD,GAAK,OAAIA,GAAS2G,KAAoBpT,QAEnFgT,EAAUrC,eAAiBa,EAC3BwB,EAAU5B,aAAeI,EAEzBxB,EAAe,CAAE+C,QAAS,KAAMmB,QAAS,KAAMC,MAAO,QAQpDC,CAA0BlK,EAAMuG,SAgC9B4D,UAzMY,SAAAnK,GACE,QAAdA,EAAMyH,IACRpB,EAAMrG,GACiB,UAAdA,EAAMyH,KAAoBzH,EAAMC,SAElB,MAAdD,EAAMyH,IACfV,EAAc/G,GACS,cAAdA,EAAMyH,IACfN,EAAYnH,GACW,YAAdA,EAAMyH,KAAmC,cAAdzH,EAAMyH,KAC1CF,EAAgBvH,GANhB0G,EAAQ1G,IAsMNoK,QA5LU,SAAApK,GACd,IAAMxB,EAAWwB,EAAMuG,OAAOE,eACxB4D,EAAYtI,EAAa/B,EAAMuG,OAAOC,MAAOhI,GAC/C6L,EAAUnI,iBACZiE,GAAa,GACbC,EAASiE,EAAUlI,iBAEnBgE,GAAa,IAsLXmE,OAfS,SAAAtK,GACbH,EAAS8E,GAAmB,CAAEpH,QAAS,KAAMiB,SAAU,KAAMD,OAAQ,QACrE+H,EAAKtG,EAAMuG,OAAOC,OAClBT,KAaIwE,aAAchV,EAAMb,OAErBwR,GACC,cAAC,GAAD,CACErB,MAAOA,EACPG,WAAS,EACTF,UAAU,EACVC,cArGwB,SAACyF,EAAexK,GAC9CA,EAAME,iBACN,IAAMuK,EAAQD,EAAc9V,KACtB8R,EAAQR,EAASoB,QAAQZ,MACzBhI,EAAWwH,EAASoB,QAAQX,eAC5B4D,EAAYtI,EAAayE,EAAOhI,GAGhCkM,EAFclE,EAAMK,UAAU,EAAGwD,EAAU/H,kBAAoB,GAEtCmI,EADZjE,EAAMK,UAAUwD,EAAU7H,iBAE7CwD,EAASoB,QAAQZ,MAAQkE,EACzBvE,GAAa,GACbC,EAAS,MACTvG,EAASqD,GAAY,CAAE3F,QAAShI,EAAMhB,GAAIG,KAAMgW,Y,6BCjI9CC,GAAajM,YAAY,CAC7BC,KAAM,QACN5H,aAAcA,EAAa2G,MAC3BkB,SAAU,CACRgM,cAAe,SAAC9L,EAAOC,GACrB,IAAMC,EAAWD,EAAOE,QACxB,GAAID,GAAY,OAAQA,GAAY,SAAUA,EAC5C,OAAOA,GAGX6L,SAAU,SAAC/L,EAAOC,GAAY,IAAD,EACeA,EAAOE,QAAzC6L,EADmB,EACnBA,cAAeC,EADI,EACJA,eACvB,GAAKD,GAAkBC,GAAmBA,EAAejV,OAAzD,CAIA,IAAIkV,EAEJ,GAAIF,KAAiBhM,EAAMjB,KAAM,CAC/B,GAAIoN,KAAKC,UAAUpM,EAAMjB,KAAKiN,GAAeK,UAAYF,KAAKC,UAAUH,EAAeI,QACrF,OAGF,IAAMC,EAAetM,EAAMjB,KAAKiN,GAAevL,QAAO,SAAA8L,GAAkB,OAAKN,EAAe1B,SAASgC,MACjGD,EAAatV,QACfsV,EAAa1U,KAAI,SAAA2U,GAEf,OADAvM,EAAMnB,GAAG0N,GAAsBvM,EAAMnB,GAAG0N,GAAoB9L,QAAO,SAAA+L,GAAc,OAAIR,IAAkBQ,MAChG,KAIXN,EAAaD,EAAexL,QAAO,SAAA8L,GAAkB,OAAKvM,EAAMjB,KAAKiN,GAAezB,SAASgC,WAE7FL,EAAaD,EAGXC,EAAWlV,QACbkV,EAAWtU,KAAI,SAAA2U,GAKb,OAJMA,KAAsBvM,EAAMnB,KAChCmB,EAAMnB,GAAG0N,GAAsB,IAEjCvM,EAAMnB,GAAG0N,GAAoBzI,KAAKkI,IAC3B,KAIXhM,EAAMjB,KAAKiN,GAAiBC,IAE9BQ,iBAAkB,SAACzM,EAAOC,GAAY,IAC5BxB,EAAYwB,EAAOE,QAAnB1B,QACFiO,EAAsB1M,EAAMjB,KAAKN,GACvCoN,GAAW3H,aAAa6H,SAAS/L,EAAO,CAAEG,QAAS,CAAE6L,cAAevN,EAASwN,eAAgB,MACzFS,GACFA,EACG9U,KAAI,SAAA2U,GAGH,OAFAvM,EAAMnB,GAAG0N,GAAsBvM,EAAMnB,GAAG0N,GACrC9L,QAAO,SAAAuL,GAAa,OAAIA,IAAkBvN,MACtC,YAGNuB,EAAMjB,KAAKN,O,GAKqCoN,GAAWnL,QAAzDoL,G,GAAAA,cAAeC,G,GAAAA,SAAUU,G,GAAAA,iBACzBZ,MAAf,QCCec,GAtEOC,IAAMC,MAAK,YAAiC,IAA9BpW,EAA6B,EAA7BA,MAAOqQ,EAAsB,EAAtBA,QAASgG,EAAa,EAAbA,OAC5C/L,EAAWC,cACX9K,EAAS8L,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,UACpC6W,EAAiB/K,aAAY,SAAAhC,GAAK,OAAIA,EAAMpB,MAAMG,KAAKtI,EAAMhB,OAgB7DuX,EAAc,SAAApX,GAClB,IACMgJ,EAAQ,IAAIqO,IACZC,EAAWC,KAAmBvX,EAFxB,sBAEmC,SAAC0N,EAAO8J,GACrD,IAAMzW,EAAY0W,EAAW/J,GAE7B,OADA1E,EAAM0O,IAAI3W,EAAUlB,IAElB,cAAC,EAAD,CAEEgJ,QAAS9H,EAAUlB,GAFrB,SAIGkB,EAAUf,MAJb,UACU0N,EADV,YACmB8J,OAOjBG,EAAaC,MAAMzO,KAAKH,GAM9B,OALI2O,EAAWvW,cACUyP,IAAnBsG,GAAiCU,EAAM,IAAIR,IAAIM,GAAa,IAAIN,IAAIF,KACtEhM,EAASgL,GAAS,CAAEC,cAAevV,EAAMhB,GAAIwW,eAAgBsB,MAG1DL,GAGHO,EAAQ,SAACC,EAAIC,GACjB,GAAID,EAAGxL,OAASyL,EAAGzL,KAAM,OAAO,EADR,oBAEVwL,GAFU,IAExB,gCAASE,EAAT,QAAkB,IAAKD,EAAGE,IAAID,GAAI,OAAO,GAFjB,8BAGxB,OAAO,GAGHP,EAAa,SAAAzX,GACjB,IAAMkY,EAAYlL,OAAOC,OAAO3M,GAC7BmK,MAAK,SAAA5J,GAAK,OAAKA,EAAMd,UAAYc,EAAMb,OAASA,KACnD,GAAIkY,EACF,OAAOA,EAET,IAAMC,EAAevY,EAAW,CAAEI,QAAQM,GAE1C,OADA6K,EAAS8C,EAASkK,IACXA,GAGT,OACE,sBACEzM,UAAS,oBAAewF,EAAU,qBAAsB,IACxD7F,QAAS6L,EAFX,UAIYrW,EAAMb,KA3DMoX,EAAYvW,EAAMb,MAEvCgC,KAAI,SAAAoW,GACH,GAAuB,kBAAZA,EAAsB,CAC/B,IAAMC,EAAMC,aAASF,GAErB,OADiBpB,IAAMuB,aAAaF,EAAK,CAAEtF,IAAKqF,IAGlD,OAAOA,WCyCAI,GAzDD,SAAC,GAAgC,IAA9B3X,EAA6B,EAA7BA,MAAOgJ,EAAsB,EAAtBA,OAAQqH,EAAc,EAAdA,QACxBtH,EAAewC,aAAY,SAAAhC,GAAK,OAAIA,EAAMT,OAAOC,gBADX,EAEdgC,mBAAShC,EAAaC,SAAWA,GAAUD,EAAaf,UAAYhI,EAAMhB,IAF5D,mBAErC4Y,EAFqC,KAE5BC,EAF4B,OAGN9M,mBAAS,CAAEuI,QAAS,KAAMmB,QAAS,KAAMC,MAAO,OAH1C,mBAGrCpE,EAHqC,KAGxBC,EAHwB,KAkC5C,OATuBxH,EAAaf,SAC/Be,EAAaf,UAAYhI,EAAMhB,IAC/B+J,EAAaC,SAAWA,IACvBiK,MAAMlK,EAAaE,YAEF2O,GACrBC,GAAW,GAIT,qBAAKhN,UAAU,QAAf,SACC+M,EAEG,cAAC,GAAD,CACE5X,MAAOA,EACPgJ,OAAQA,EACRqH,QAASA,EACTC,YAAaA,EACbC,eAAgBA,EAChBC,SAvBK,SAAA/F,GACboN,GAAW,MAyBL,cAAC,GAAD,CACE7X,MAAOA,EACPqQ,QAASA,EACTgG,OA7CG,SAAA5L,GACX,IAAIzK,EAAMR,UAAV,CAIA,IAAMsY,EAAYrN,EAAMsN,QAClBC,EAAYvN,EAAMwN,QAGlB3E,EAAUwE,EAFDrN,EAAMyN,cAAcC,WAG7B1D,EAAUuD,EAFDvN,EAAMyN,cAAcE,UAG7B1D,EAAQjK,EAAMyN,cAAcG,YAClC9H,EAAe,CAAE+C,UAASmB,UAASC,UACnCmD,GAAW,UCOAS,GA1BK,SAAC,GAAe,IAAbtY,EAAY,EAAZA,MACfP,EAAS8L,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,UAkB1C,OACE,qBAAKoL,UAAU,yBAAf,SAjBkB,SAAd0N,EAAeC,GAA8B,IAAfC,EAAc,uDAAP,GACzC,IAAKD,EACH,OAAOC,EAAKC,UAEd,IAAMtY,EAAcX,EAAO+Y,GACrBG,EAAQ,cAAC,EAAD,CACZ3Q,QAASwQ,EAET9Y,OAAiC,OAAzBU,EAAYlB,SACpBiL,WAAS,EAJG,SAMX/J,EAAYjB,MAJRqZ,GAMP,OAAOD,EAAYnY,EAAYlB,SAAUuZ,EAAKlX,OAAOoX,IAKlDJ,CAAYvY,EAAMd,aCGV0Z,I,MAxBMzC,IAAMC,MAAK,YAAsD,IAAnDpW,EAAkD,EAAlDA,MAAO6Y,EAA2C,EAA3CA,YAAaC,EAA8B,EAA9BA,UAAWC,EAAmB,EAAnBA,aAChE,OACE,sBAAKlO,UAAU,0BAAf,UACE,uBAAMA,UAAS,6CAAwCgO,EAAc,GAAK,WAA1E,UACGC,GACC,cAAC,IAAD,CAAgBtN,MAAM,QAAQhB,QAAS,kBAAMuO,GAAa,OAE1DD,GACA,cAAC,IAAD,CAAetN,MAAM,QAAQhB,QAAS,kBAAMuO,GAAa,SAG7D,cAAC,EAAD,CACE/Q,QAAShI,EAAMhB,GACfmL,WAAS,EACTzK,QAAQ,EAHV,SAKE,qBAAKmL,UAAS,6CAAwCiO,GAAaD,EAAc,QAAU,IAA3F,SACE,qDCyDKG,GAvEA,SAATA,EAAU,GAAwE,IAAtEhR,EAAqE,EAArEA,QAAS6D,EAA4D,EAA5DA,OAA4D,IAApDE,uBAAoD,SAA3B/C,EAA2B,EAA3BA,OAA2B,IAAnB8C,YAAmB,SAC/E9L,EAAQuL,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,OAAOuI,MADqC,EAEnD+C,mBAASe,GAF0C,mBAE9EgN,EAF8E,KAEnEC,EAFmE,OAG3ChO,oBAAS,GAHkC,mBAG9EkO,EAH8E,KAG/DC,EAH+D,KAUrF,GAJAC,qBAAU,WACRJ,EAAajN,KACX,CAACA,KAEA9L,EACH,OAAO,oBAAI6K,UAAU,aAAd,4BAGT,IAAMnL,EAA4B,OAAnBM,EAAMd,SACfmR,EAAU3Q,GAAUmM,EAEpB3K,EAAWlB,EAAMZ,YAAY+B,KAAI,SAAAoM,GAAY,OACjD,cAACyL,EAAD,CAEEnN,QAAQ,EACR7C,OAAQA,EACRhB,QAASuF,EACTzB,KAAMmN,GAJD1L,MAQT,OACE,sBAAK1C,UAAS,iBAAYgB,EAAS,eAAiB,iBAAtC,OAAwDnM,EAAS,gBAAkB,IAAjG,WACIqM,GAAoBF,IAAWnM,IAC/B,cAAC,GAAD,CAAaM,MAAOA,IAEtB,sBAAK6K,UAAU,SAAf,WACIwF,GACA,cAAC,GAAD,CACErQ,MAAOA,EACP8Y,UAAWA,EACXC,aAAcA,EACdF,YAAa3X,EAASX,OAAS,IAGnC,cAAC,GAAD,CACEP,MAAOA,EACPqQ,QAASA,EACTrH,OAAQA,QAGV8P,GAAa5X,EAASX,OAAS,GAC/B,sBAAKsK,UAAU,mBAAf,UACsB,OAAnB7K,EAAMd,UACL,qBACE2L,UAAU,gCACVL,QAAS,kBAAM0O,GAAkBD,MAGrC,qBAAKpO,UAAU,8BAAf,SACG3J,OAIN2K,GACC,cAAC,EAAD,CACE7L,MAAOA,EACPgJ,OAAQA,GACHhJ,EAAMhB,Q,8BCxEfoa,I,MAAcjQ,YAAY,CAC9BC,KAAM,SACN5H,aAAc,CACZ0G,YAAa,IAEfmB,SAAU,CACRgQ,eAAgB,SAAC9P,EAAOC,GACtB,IAAMC,EAAWD,EAAOE,QACxB,GAAID,GAAY,gBAAiBA,EAC/B,OAAOA,GAGX6P,kBAAmB,SAAC/P,EAAOC,GAAY,IAC7B8F,EAAU9F,EAAOE,QAAjB4F,MACR/F,EAAMrB,YAAcoH,O,GAK2C8J,GAAYnP,QAAlEoP,G,GAAAA,eAAgBC,G,GAAAA,kBAChBF,I,GADmCG,eACnCH,GAAf,SClBMI,GAAgBrQ,YAAY,CAChCC,KAAM,WACN5H,aAAcA,EAAamG,SAC3B0B,SAAU,CACRoQ,iBAAkB,SAAClQ,EAAOC,GACxB,IAAMC,EAAWD,EAAOE,QACxB,GAAID,GAAY,qBAAsBA,EACpC,OAAOA,GAGXiQ,eAAgB,SAACnQ,EAAOC,GAAY,IAC1BxB,EAAYwB,EAAOE,QAAnB1B,QACMuB,EAAM3B,iBAAiBtH,QAAQ0H,IAChC,EACXuB,EAAM3B,iBAAmB2B,EAAM3B,iBAAiBoC,QAAO,SAAA2P,GAAe,OAAI3R,IAAY2R,KAEtFpQ,EAAM3B,iBAAiByF,KAAKrF,IAGhCuR,eAAgB,SAAChQ,EAAOC,GAAY,IAC1BxB,EAAYwB,EAAOE,QAAnB1B,QACRuB,EAAM3B,iBAAmB2B,EAAM3B,iBAAiBoC,QAAO,SAAA2P,GAAe,OAAIA,IAAoB3R,S,GAKhCwR,GAAcvP,QAAnEwP,G,GAAAA,iBAAkBC,G,GAAAA,eAAgBH,G,GAAAA,eAClCC,MAAf,QC4DeI,GA9EA,SAAC,GAAiB,IAc3BC,EAdY7R,EAAc,EAAdA,QACVsC,EAAWC,cACXrC,EAAcqD,aAAY,SAAAhC,GAAK,OAAIA,EAAMtB,OAAOC,eAChDzI,EAAS8L,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,UACpCmI,EAAmB2D,aAAY,SAAAhC,GAAK,OAAIA,EAAM5B,SAASC,oBACvDkS,EAAUC,cAEVC,EAAU,SAAVA,EAAUha,GACd,OAAKA,EAAMd,SAGJ8a,EAAQva,EAAOO,EAAMd,WAFnBc,EAAMhB,IAMjB,GAAIgJ,EAAS,CACX,IAAMhI,EAAQP,EAAOuI,GACrB,GAAIhI,EAAO,CACT,IAAMia,EAAcD,EAAQha,GAC5B6Z,EAAajS,EAAiBkM,SAASmG,IAI3C,IAKIC,OACelK,IAAf6J,IAEAK,EADEL,EACe,cAAC,KAAD,CAAUrO,MAAM,UAEhB,cAAC,KAAD,CAAMA,MAAM,WAIjC,IAAM2O,EAAc,SAAA1P,GAClBH,EAASgP,GAAkB,CAAEhK,MAAO,OAUtC,OACE,sBAAKzE,UAAU,SAAf,UACE,sBAAKA,UAAU,mBAAf,UACE,sBAAKA,UAAU,cAAf,UACE,qBAAKA,UAAU,sBAAf,SACE,sBAAMA,UAAU,sDAAhB,SAAsE,cAAC,KAAD,CAAYW,MAAM,cAE1F,uBACEzD,KAAK,OACL8C,UAAU,mDACVuP,YAAY,sBACZC,SAAU,SAAC5P,GAAD,OAAWH,EAASgP,GAAkB,CAAEhK,MAAO7E,EAAMuG,OAAOC,UACtEA,MAAO/I,OAGX,cAAC,GAAD,CACEoH,MAAOpH,EACPqH,UAAQ,EACRC,cAAe2K,EACfzK,eAAa,EACbC,cA3BwB,WAC9B,IAAM2K,EAAOvb,EAAW,CAAEI,KAAM+I,GAAezI,GAC/C6K,EAAS8C,EAASkN,IAClBH,IACAL,EAAQzM,KAAR,gBAAsBiN,EAAKtb,gBA0BLgR,IAAnBkK,GACC,wBAAQrP,UAAU,2BAA2BL,QAjD5B,SAAAC,GACrB,IAAMwP,EAAcD,EAAQva,EAAOuI,IACnCsC,EAASoP,GAAe,CAAE1R,QAASiS,MA+C/B,SAAuEC,Q,0BC1E/Exb,IAAMC,OAAO4b,MAEb,IA2BeC,GA3BI,SAAAC,GACjB,IAAMnQ,EAAWC,cACX9K,EAAS8L,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,UACpCib,EAAkBvO,OAAOC,OAAO3M,GACnCuK,QAAO,SAAAhK,GAAK,QAAMA,EAAMR,aACxBoW,MAAK,SAAC+E,EAAQC,GAAT,OAAoBD,EAAOnb,UAAUqb,cAAcD,EAAOpb,cAC/DkZ,UAGGoC,EAAQpc,MACRqc,EAAqBD,EAAMjb,OAAOhB,GACpCmc,EAAsBN,EAAgB9Q,MAAK,SAAA5J,GAAK,OAAIA,EAAMb,OAAS4b,KAClEC,IACHA,EAAsBjc,EAAW,CAAEI,KAAM4b,EAAoBvb,UAAWsb,EAAMjb,OAAOf,IAA8BW,GACnH6K,EAAS8C,EAAS4N,KAGpB,IAAMC,EAAmBP,EACtBvZ,KAAI,SAAAnB,GAAK,OAAI,cAAC,GAAD,CAAuBgI,QAAShI,EAAMhB,GAAIgK,QAAM,EAAC6C,QAAM,GAA1C7L,EAAMhB,OAEnC,OACE,qBAAK6L,UAAU,cAAf,SACGoQ,K,8ECtBMlK,I,OAAO,SAAAmK,GAClB,IAAMC,EAAM,IAAIC,KAChBF,EAAM/Z,KAAI,SAAAka,GAAS,IACTC,EAAsBD,EAAtBC,QAASC,EAAaF,EAAbE,SAEjB,OADAJ,EAAIE,KAAKE,GAAY,iBAAkB7F,KAAKC,UAAU2F,KAC/C,KAETH,EAAIK,cAAc,CAACzT,KAAK,SACrB3J,MAAK,SAAAkd,GACJG,kBAAOH,EAAD,2BAA8Bhc,KAAKC,aA6ChCmc,GAzCJ,SAAAjB,GACT,IAAMnQ,EAAWC,cACXoR,EAAIpQ,aAAY,SAAAhC,GAAK,OAAIA,KA6B/B,OACE,sBAAKsB,UAAU,gCAAf,UACE,uBAAOA,UAAU,yBAAjB,SACE,uBAAO9C,KAAK,OAAO8C,UAAU,oBAAoB+Q,OAAO,QAAQvB,SA9BzD,SAAA5P,GACXA,EAAME,iBACN,IAAMkR,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAAAtR,GACd,IAAMhB,EAAWiM,KAAKsG,MAAMvR,EAAMuG,OAAOiL,QACrC,WAAYxS,GACda,EAAS6C,EAAe1D,EAAShK,SAE/B,WAAYgK,GACda,EAAS6E,GAAe1F,EAASX,SAE/B,aAAcW,GAChBa,EAASmP,GAAiBhQ,EAAS9B,WAEjC,UAAW8B,GACba,EAAS+K,GAAc5L,EAAStB,QAE9B,WAAYsB,GACda,EAAS+O,GAAe5P,EAASxB,SAE/B,aAAcwB,GAChBa,EAAShB,EAAiBG,EAAS5B,YAGvCgU,EAAOK,WAAWzR,EAAMuG,OAAOkK,MAAM,SAQnC,wBAAQrQ,UAAU,oBAAoBL,QAAS,kBAAMuG,GAAK,CAAC,CAAEuK,QAASK,EAAGJ,SAAU,qBAAnF,sBClDAY,GAAwBhG,IAAMiG,YAClC,WAA6BjJ,GAAS,IAAnCkJ,EAAkC,EAAlCA,cAAkBhS,EAAgB,iCAC7BiS,EAAanG,IAAMzF,SACnB6L,EAAcpJ,GAAOmJ,EAM3B,OAJAnG,IAAMgD,WAAU,WACdoD,EAAY1K,QAAQwK,cAAgBA,IACnC,CAACE,EAAaF,IAGf,mCACE,mCAAOtU,KAAK,WAAWoL,IAAKoJ,GAAiBlS,SA6JtCmS,GAvJI,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,KACvBpS,EAAWC,cACX9K,EAAS8L,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,UACpCkd,EAAgBpR,aAAY,SAAAhC,GAAK,OAAIA,EAAMpB,MAAMC,MAuBjDwU,EAAa,SAAAC,GACZA,EAAKtc,QAGVsc,EACG1b,KAAI,SAAA2b,GAAG,OAAIA,EAAIC,SAAS/U,WACxB7G,KAAI,SAAA6G,GACH,IAAMhI,EAAQP,EAAOuI,GAiBrB,OAhBgB1G,EAAe7B,EAAOuI,GAAUvI,GACxC0B,KAAI,SAAA6b,GAWV,OAVA1S,EAASP,EAAQ,CAAEhC,KAAM,MAAOC,QAASgV,MACVL,EAAcK,IAAgB,IACtC7b,KAAI,SAAAoU,GACzB,IAAM0H,EAAcxd,EAAO8V,GACrB2H,EAAY,IAAIhR,OAAJ,iBAAqBlM,EAAMb,KAA3B,WAA0C,KACtDge,EAAcF,EAAY9d,KAAK8O,QAAQiP,EAAW,MAExD,OADA5S,EAASqD,GAAY,CAAE3F,QAASuN,EAAepW,KAAMge,MAC9C,KAET7S,EAAS0L,GAAiB,CAAEhO,QAASgV,MAC9B,KAET1S,EAASiP,GAAe,CAAEvR,aAC1BsC,EAASkD,GAAW,CAAExF,cACf,MAlD2B,EA8DpCoV,oBACF,CACEX,UACAC,QAEFW,aACAC,iBACA,SAAAC,GACEA,EAAMC,eAAenQ,MAAK,SAAAoP,GAAO,OAC/B,CACEzd,GAAI,YACJye,OAAQ,gBAAGC,EAAH,EAAGA,8BAAH,OACN,8BACE,cAACvB,GAAD,eAA2BuB,SAG/BC,KAAM,gBAAGb,EAAH,EAAGA,IAAH,OACJ,8BACE,cAACX,GAAD,eAA2BW,EAAIc,mCAVN,mBAc5BnB,UA7BPoB,EAvDsC,EAuDtCA,cACAC,EAxDsC,EAwDtCA,kBACAC,EAzDsC,EAyDtCA,aACAlB,EA1DsC,EA0DtCA,KACAmB,EA3DsC,EA2DtCA,WACAC,EA5DsC,EA4DtCA,iBACSC,EA7D6B,EA6DtC3U,MAAS2U,eA2BX,OACE,qCACE,sBAAKrT,UAAU,qBAAf,UACE,cAAC,KAAD,CACEL,QAAS,kBAAMoS,EAAWqB,IAC1BpT,UAAS,gCAA2BsB,OAAOgS,KAAKD,GAAgB3d,OAAS,UAAW,MAEtF,cAAC,KAAD,CACEiK,QAAS,kBA3FI,SAAAqS,GACnB,GAAKA,EAAKtc,OAAV,CAGA,IAAM2a,EAAQ2B,EACX1b,KAAI,SAAA2b,GAAG,OAAIA,EAAIC,SAAS/U,WACxB7G,KAAI,SAAA6G,GACH,IAAMhI,EAAQP,EAAOuI,GACrB,MAAO,CAAEsT,QAASta,EAAUhB,EAAOP,GAAS8b,SAAS,GAAD,OAAKvb,EAAMb,KAAX,aAExD4R,GAAKmK,IAiFgBkD,CAAaH,IAC5BpT,UAAS,2BAAsBsB,OAAOgS,KAAKD,GAAgB3d,OAAS,UAAW,MAEjF,qBAAKsK,UAAU,mBAEjB,gDAAOA,UAAU,oBAAuBgT,KAAxC,cACE,uBAAOhT,UAAU,aAAjB,SACGkT,EAAa5c,KAAI,SAAAkd,GAAW,OAC3B,8CAAQA,EAAYC,uBAApB,aACGD,EAAYE,QAAQpd,KAAI,SAAAqd,GAAM,OAC7B,6CAAIC,MAAM,OAAUD,EAAOE,eAAe,CACxC,CACE7T,UAAW2T,EAAO3T,WAEpB2T,EAAOG,0BAJT,cAMGH,EAAOI,OAAO,UACf,+BACGJ,EAAOK,SACJL,EAAOM,aACL,cAAC,KAAD,CAAatT,MAAM,UACnB,cAAC,KAAD,CAAWA,MAAM,UACnB,oBAOhB,iDAAWsS,KAAX,aACGjB,EAAK1b,KACJ,SAAC2b,EAAKnG,GAEJ,OADAqH,EAAWlB,GAET,8CAAQA,EAAIiC,eAAZ,aACGjC,EAAIkC,MAAM7d,KAAI,SAAA8d,GACb,OACE,8CAAQA,EAAKC,aAAa,CACxB,CACErU,UAAWoU,EAAKT,OAAO3T,cAF3B,aAKGoU,EAAKL,OAAO,+B,OC3JrClgB,IAAMC,OAAO4b,MAEb,IA2De4E,GA9CE,SAAA1E,GACf,IAAMnQ,EAAWC,cACX9K,EAAS8L,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,UACpCkd,EAAgBpR,aAAY,SAAAhC,GAAK,OAAIA,EAAMpB,MAAMC,MAEjDgX,EAAiBC,uBAAY,SAACrX,EAASyC,GAC3CH,EAASX,EAAS,CAAE5B,KAAM,aAAcC,eACvC,CAACsC,IAEEmS,EAAUtG,IAAMmJ,SACpB,iBAAM,CACJ,CACE7B,OAAQ,QACR5S,UAAW,mBACX0U,SAAU,SAACzC,GAAD,OAAS,cAAC,EAAD,CAA4B9U,QAAS8U,EAAI9U,QAAzC,SAAmD8U,EAAI3d,MAAxC2d,EAAI9U,UACtCwX,SAAU,SAACC,EAAMC,EAAM1gB,EAAI2gB,GAAjB,OAA0BF,EAAK1C,SAAS5d,KAAK0b,cAAc6E,EAAK3C,SAAS5d,QAClF,CACDse,OAAQ,WACR8B,SAAU,WACV1U,UAAW,cACX8S,KAAM,gBAAGb,EAAH,EAAGA,IAAK7L,EAAR,EAAQA,MAAR,OAAoB,qBAAKpG,UAAU,kBAAkBL,QAAS4U,EAAerP,KAAK,KAAM+M,EAAIC,SAAS/U,SAAjF,SAA2F,+BAAOiJ,EAAM1Q,YAClIif,SAAU,SAACC,EAAMC,EAAM1gB,EAAI2gB,GAAjB,OAA0BF,EAAK1C,SAAS6C,SAASrf,OAASmf,EAAK3C,SAAS6C,SAASrf,SAC1F,CACDkd,OAAQ,UACR8B,SAAU,UACV1U,UAAW,aACX8S,KAAM,gBAAG1M,EAAH,EAAGA,MAAH,OAAeA,EAAQvS,IAAMuS,GAAOpR,OAAOhB,GAA6B,OAC7E,CACD4e,OAAQ,UACR8B,SAAU,UACV1U,UAAW,aACX8S,KAAM,gBAAG1M,EAAH,EAAGA,MAAH,OAAeA,EAAQvS,IAAMuS,GAAOpR,OAAOhB,GAA6B,UAGlF,CAACugB,IAGG1C,EAAOvG,IAAMmJ,SAAQ,kBAlDb,SAAC7f,EAAQkd,GACvB,OAAOxQ,OAAOC,OAAO3M,GAClBuK,QAAO,SAAAhK,GAAK,OAAKA,EAAMd,YACvBiC,KAAI,SAAAnB,GAAK,MAAK,CACbb,KAAMa,EAAMb,KACZ6I,QAAShI,EAAMhB,GACfK,QAASW,EAAMX,QACfS,QAASE,EAAMF,QACf8f,SAAUjD,EAAc3c,EAAMhB,KAAO,OA0CR6gB,CAAQpgB,EAAQkd,KAAgB,CAACld,EAAQkd,IAE1E,OACE,qBAAK9R,UAAU,YAAf,SACE,cAAC,GAAD,CAAY4R,QAASA,EAASC,KAAMA,OCf3BoD,GA3CF,SAAArF,GACX,OACE,sBAAK5P,UAAU,OAAf,UACE,cAAC,IAAD,CAAOkV,OAAK,EAACC,KAAK,IAAlB,SACE,cAAC,IAAD,CAAU5X,GAAG,oBAEf,cAAC,IAAD,CACE4X,KAAK,iBACLpB,OAAQ,gBAAG/R,EAAH,EAAGA,MAAH,OACN,qCACE,cAAC,GAAD,CAAQ7E,QAAS6E,EAAMoT,OAAOjY,UAC9B,qBAAK6C,UAAU,QAAf,SACE,cAAC,GAAD,CAAQ7C,QAAS6E,EAAMoT,OAAOjY,QAAS6D,QAAM,EAAC7C,QAAM,YAK5D,cAAC,IAAD,CACEgX,KAAK,eACLpB,OAAQ,kBACN,qCACE,cAAC,GAAD,IACA,qBAAK/T,UAAU,QAAf,SACE,cAAC,GAAD,YAKR,cAAC,IAAD,CACEmV,KAAK,aACLpB,OAAQ,kBACN,qCACE,cAAC,GAAD,IACA,qBAAK/T,UAAU,QAAf,SACE,cAAC,GAAD,gB,qCCXCqV,OA3Bf,SAAmBzF,GACjB,IAAMhb,EAAS8L,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,UAGpC0gB,EAFmB5U,aAAY,SAAAhC,GAAK,OAAIA,EAAM5B,SAASC,oBAEtBzG,KAAI,SAAA6G,GACzC,IAAMhI,EAAQP,EAAOuI,GACrB,OACE,cAAC,EAAD,CACEA,QAASA,EAET6C,UAAU,4DAHZ,SAKG7K,EAAMb,MAHF6I,MAQX,OACE,gCACE,+BAAI,cAAC,KAAD,CAAUwD,MAAM,QAAQkJ,MAAM,OAAO0L,MAAO,CAAEC,YAAa,UAA/D,eACA,qBAAKxV,UAAU,mCAAf,SACGsV,QCIMG,GAtBE,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,gBAClB,OACE,sBAAK1V,UAAU,iBAAf,UACE,qBAAKA,UAAU,eAAeL,QAAS,kBAAM+V,GAAgB,IAA7D,SACE,sBAAK1V,UAAU,uBAAf,UAAsC,cAAC,KAAD,CAAeY,KAAM,GAAI2U,MAAO,CAACC,YAAa,UAAW,cAAC,IAAD,CAAM5U,KAAM,UAE7G,cAAC,IAAD,CAAMrD,GAAG,IAAT,SAAa,oBAAIyC,UAAU,yBAAd,yBACb,cAAC,GAAD,IACA,sBAAKA,UAAU,mCAAf,UACE,eAAC,IAAD,CAAMzC,GAAG,eAAeyC,UAAU,4DAAlC,UACE,cAAC,KAAD,CAAWW,MAAM,UADnB,kBAGA,eAAC,IAAD,CAAMpD,GAAG,aAAayC,UAAU,4DAAhC,UACE,cAAC,KAAD,CAASW,MAAM,UADjB,mBAIF,uBACA,cAAC,GAAD,Q,mBCuDSgV,GAxEO,SAAC,GAAc,IAAZ3W,EAAW,EAAXA,KAAW,EACAkB,oBAAS,GADT,mBAC3B0V,EAD2B,KAChBC,EADgB,KAE5BjhB,EAAS8L,aAAY,SAAAhC,GAAK,OAAIA,EAAM9J,UACpC0I,EAAQoD,aAAY,SAAAhC,GAAK,OAAIA,EAAMpB,SACnCmC,EAAWC,cAyBTxC,EAAkB8B,EAAlB9B,KAAMC,EAAY6B,EAAZ7B,QACd,KAAMA,KAAWvI,GACf,OAAO,KAET,IAAMO,EAAQP,EAAOuI,GACfsD,EAAanD,EAAMC,GAAGpI,EAAMhB,KAAO,GACzC,OACE,sBAEE6L,UAAU,qBAFZ,UAIE,sBAAKA,UAAU,4BAAf,UACE,uBAAMA,UAAU,+BAA+BL,QAAS,kBAAMkW,GAAa,SAAAnX,GAAK,OAAKA,MAArF,UACGkX,EACG,cAAC,IAAD,CAAejV,MAAM,QAAQC,KAAM,KACnC,cAAC,IAAD,CAAgBD,MAAM,QAAQC,KAAM,KAlCjC,SAAC1D,EAAM/H,EAAO2gB,GAC3B,IAAIC,EACJ,OAAQ7Y,GACN,IAAK,OACH6Y,EAAS,+CAAkBD,EAAO,IAAM,4BAAG,cAAC,EAAD,CAAU3Y,QAAShI,EAAMhB,GAAzB,SAA8BgB,EAAMb,YAC/E,MACF,IAAK,QACHyhB,EAAS,qDAAwBD,EAAO,IAAM,4BAAG,cAAC,EAAD,CAAU3Y,QAAShI,EAAMhB,GAAzB,SAA8BgB,EAAMb,YACrF,MACF,IAAK,aACHyhB,EAAS,mDAAqB,cAAC,EAAD,CAAU5Y,QAAShI,EAAMhB,GAAzB,SAA8BgB,EAAMb,UAClE,MACF,QACEyhB,EAAS,8CAGb,OAAOA,EAoBAC,CAAO9Y,EAAM/H,EAAOygB,MAEvB,qBAAK5V,UAAU,gBACL,SAAT9C,GACC,wBACE8C,UAAU,gCACVL,QAAS,kBAAMF,EAASX,EAAS,CAAE5B,KAAM,aAAcC,cAFzD,SAIGsD,EAAW/K,SAGhB,cAAC,KAAD,CACEsK,UAAU,YACVL,QArDW,SAACzC,EAAMC,EAASyC,GACjCH,EAASP,EAAQ,CAAEhC,OAAMC,cAoDC+H,KAAK,KAAMhI,EAAM/H,EAAMhB,SAG9CyhB,EACY,eAAT1Y,EACE,cAAC,EAAD,CAAY/H,MAAOA,EAAOgJ,QAAM,IAChC,cAAC,GAAD,CAAQhB,QAAShI,EAAMhB,GAAI6M,QAAM,EAAC7C,QAAQ,IAC5C,OA9BN,UACUjB,EADV,YACkB/H,EAAMhB,MCrBb8hB,GAjBE,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,gBAEZC,EADQzV,aAAY,SAAAhC,GAAK,OAAIA,EAAM1B,SAASC,SACrB3G,KAAI,SAAA0I,GAAI,OAAI,cAAC,GAAD,CAAeA,KAAMA,OAE9D,OACE,sBAAKgB,UAAU,iBAAf,UACE,qBAAKA,UAAU,eAAeL,QAAS,kBAAMuW,GAAgB,IAA7D,SACE,sBAAKlW,UAAU,uBAAf,UACE,cAAC,IAAD,CAAMY,KAAM,KACZ,cAAC,IAAD,CAAgBA,KAAM,GAAI2U,MAAO,CAACa,WAAY,eAGjDD,MCeQE,GAzBH,WAAO,IAAD,EACwBnW,oBAAS,GADjC,mBACToW,EADS,KACKZ,EADL,OAEwBxV,oBAAS,GAFjC,mBAETqW,EAFS,KAEKL,EAFL,KAIhB,OACE,qBAAKlW,UAAU,MAAf,SACE,eAAC,IAAD,WACGsW,EACG,cAAC,GAAD,CAAUZ,gBAAiBA,IAC3B,qBAAK1V,UAAU,uBAAuBL,QAAS,kBAAM+V,GAAgB,IAArE,SACE,cAAC,IAAD,CAAM9U,KAAM,OAGlB,cAAC,GAAD,IACC2V,EACG,cAAC,GAAD,CAAUL,gBAAiBA,IAC3B,qBAAKlW,UAAU,uBAAuBL,QAAS,kBAAMuW,GAAgB,IAArE,SACE,cAAC,IAAD,CAAMtV,KAAM,aClBb4V,GAAU,CACrB5hB,OAAQ6hB,GACR3Z,SAAU4Z,GACV1Z,SAAU2Z,EACVvZ,OAAQwZ,GACRtZ,MAAOuZ,GACP5Y,OAAQ6Y,IAOKC,GAJDC,YAAe,CAC3BR,a,OCTFjP,OAAO0P,iBAAiB,gBAAgB,SAAArX,GACtCA,EAAME,iBACNF,EAAMsX,YAAc,MAGtBC,IAASpD,OACP,cAAC,IAAMqD,WAAP,UACE,cAAC,IAAD,CAAUL,MAAOA,GAAjB,SACE,cAAC,GAAD,QAGJM,SAASC,eAAe,SAM1BlkB,K","file":"static/js/main.a0c89fac.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { nanoid } from '@reduxjs/toolkit'\r\nimport dayjs from 'dayjs'\r\nimport customParseFormat from 'dayjs/plugin/customParseFormat'\r\n\r\ndayjs.extend(customParseFormat)\r\n\r\nexport const DAILY_NOTE_DISPLAY_FORMAT = 'MMMM Do, YYYY'\r\nexport const DAILY_NOTE_STORAGE_FORMAT = 'YYYY-MM-DD'\r\nconst ID_LENGTH = 8\r\n\r\nexport const BlockModel = (\r\n  {\r\n    id = nanoid(ID_LENGTH),\r\n    parentId = null,\r\n    text,\r\n    childrenIds = [],\r\n    created = Date.now(),\r\n    dailyNote = null\r\n  } = {},\r\n  blocks) => {\r\n  const isPage = !parentId\r\n  if (isPage) {\r\n    if (!dailyNote) {\r\n      const dailyNoteTitleDate = dayjs(text, DAILY_NOTE_DISPLAY_FORMAT)\r\n      if (dailyNoteTitleDate.isValid()) {\r\n       dailyNote = dailyNoteTitleDate.format(DAILY_NOTE_STORAGE_FORMAT)\r\n      }\r\n    }\r\n  }\r\n  if (dailyNote) {\r\n    id = dailyNote\r\n  } else if (id in blocks) {\r\n    // Reroll id if collision (unlikely)\r\n    while (id in blocks) {\r\n      id = nanoid(ID_LENGTH)\r\n    }\r\n  }\r\n  return {\r\n    id,\r\n    parentId,\r\n    text,\r\n    childrenIds,\r\n    created,\r\n    updated: null,\r\n    dailyNote\r\n  }\r\n}\r\n\r\nexport const getPage = (block, blocks) => {\r\n  if (!block.parentId) {\r\n    return block\r\n  }\r\n  const parentBlock = blocks[block.parentId]\r\n  return getPage(parentBlock, blocks)\r\n}\r\n\r\nexport const isFirstPageChild = (block, blocks) => {\r\n  const pageBlock = getPage(block, blocks)\r\n  return block.parentId === pageBlock.id && pageBlock.childrenIds[0] === block.id\r\n}\r\n\r\nexport const getPrevSibling = (block, blocks) => {\r\n  if (block.parentId === null) {\r\n    return null\r\n  }\r\n  const parentBlock = blocks[block.parentId]\r\n  const blockIndex = parentBlock.childrenIds.indexOf(block.id)\r\n  if (blockIndex < 1) {\r\n    return null\r\n  }\r\n  const prevSiblingBlock = blocks[parentBlock.childrenIds[blockIndex - 1]]\r\n  return prevSiblingBlock\r\n}\r\n\r\nexport const getNextSibling = (block, blocks) => {\r\n  if (block.parentId === null) {\r\n    return null\r\n  }\r\n  const parentBlock = blocks[block.parentId]\r\n  const blockIndex = parentBlock.childrenIds.indexOf(block.id)\r\n  if (blockIndex === parentBlock.childrenIds.length - 1) {\r\n    return null\r\n  }\r\n  const nextSiblingBlock = blocks[parentBlock.childrenIds[blockIndex + 1]]\r\n  return nextSiblingBlock\r\n}\r\n\r\nexport const getLastChildLeaf = (block, blocks) => {\r\n  if (!block.childrenIds.length) {\r\n    return block\r\n  }\r\n  const lastChildBlock = blocks[block.childrenIds.slice(-1)]\r\n  return getLastChildLeaf(lastChildBlock, blocks)\r\n}\r\n\r\nexport const getNextBlockUp = (block, blocks) => {\r\n  if (!block.parentId || isFirstPageChild(block, blocks)) {\r\n    return null\r\n  }\r\n  const prevSibling = getPrevSibling(block, blocks)\r\n  if (prevSibling) {\r\n    if (prevSibling.childrenIds.length) {\r\n      return getLastChildLeaf(prevSibling, blocks)\r\n    } else {\r\n      return prevSibling\r\n    }\r\n  } else {\r\n    const parentBlock = blocks[block.parentId]\r\n    return parentBlock\r\n  }\r\n}\r\n\r\nexport const getNextBlockDown = (block, blocks, checkChildren=true) => {\r\n  if (block.parentId === null) {\r\n    return null\r\n  }\r\n  if (checkChildren && block.childrenIds.length) {\r\n    return blocks[block.childrenIds[0]]\r\n  }\r\n  const nextSibling = getNextSibling(block, blocks)\r\n  if (nextSibling) {\r\n    return nextSibling\r\n  }\r\n  return getNextBlockDown(blocks[block.parentId], blocks, checkChildren=false)\r\n}\r\n\r\nexport const serialize = (block, blocks) => {\r\n  const { childrenIds, ...newBlock} = block\r\n  if (!childrenIds.length) {\r\n    return newBlock\r\n  }\r\n  return {\r\n    ...newBlock,\r\n    children: childrenIds.map(childId => {\r\n      const childBlock  = blocks[childId]\r\n      return serialize(childBlock, blocks)\r\n    })\r\n  }\r\n}\r\n\r\nexport const flattenTreeIds = (block, blocks) => {\r\n  if (!block.childrenIds.length) {\r\n    return block.id\r\n  }\r\n  return [block.id].concat(...block.childrenIds.map(childId => flattenTreeIds(blocks[childId], blocks)))\r\n}","const initialState = {\r\n  blocks: {\r\n    abcd: {\r\n      id: \"abcd\",\r\n      parentId: null,\r\n      text: \"Hello World\",\r\n      childrenIds: [\"ijkl\", \"mnop\"],\r\n    },\r\n    efgh: {\r\n      id: \"efgh\",\r\n      parentId: null,\r\n      text: \"Lorem ipsum\",\r\n      childrenIds: [\"qrst\"],\r\n    },\r\n    ijkl: {\r\n      id: \"ijkl\",\r\n      parentId: \"abcd\",\r\n      text: \"Normal *italics* **bold** ***bold italics***\",\r\n      childrenIds: [],\r\n    },\r\n    mnop: {\r\n      id: \"mnop\",\r\n      parentId: \"abcd\",\r\n      text: \"Link to [[Lorem ipsum]]\",\r\n      childrenIds: [\"uvwx\", \"a1\"],\r\n    },\r\n    qrst: {\r\n      id: \"qrst\",\r\n      parentId: \"efgh\",\r\n      text: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\",\r\n      childrenIds: [],\r\n    },\r\n    uvwx: {\r\n      id: \"uvwx\",\r\n      parentId: \"mnop\",\r\n      text: \"I'm a third layer block\",\r\n      childrenIds: [\"a2\"],\r\n    },\r\n    a1: {\r\n      id: \"a1\",\r\n      parentId: \"mnop\",\r\n      text: \"I'm another third layer block\",\r\n      childrenIds: [],\r\n    },\r\n    a2: {\r\n      id: \"a2\",\r\n      parentId: \"uvwx\",\r\n      text: \"I'm a fourth layer block\",\r\n      childrenIds: [],\r\n    },\r\n    \"2021-02-17\": {\r\n      id: \"2021-02-17\",\r\n      parentId: null,\r\n      text: \"February 17th, 2021\",\r\n      childrenIds: [\"a4\"],\r\n      created: 1613546102000,\r\n      updated: null,\r\n      dailyNote: \"2021-02-17\",\r\n    },\r\n    a4: {\r\n      id: \"a4\",\r\n      parentId: \"a3\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n    },\r\n    plXnqf7B: {\r\n      id: \"plXnqf7B\",\r\n      parentId: \"welcome\",\r\n      text: \"Welcome to Free-Roam!\",\r\n      childrenIds: [],\r\n      created: 1613962018019,\r\n      updated: 1613962047962,\r\n      dailyNote: null,\r\n    },\r\n    welcome: {\r\n      id: \"welcome\",\r\n      parentId: null,\r\n      text: \"Welcome\",\r\n      childrenIds: [\"plXnqf7B\", \"0NOhIzxB\", \"H-O00XW0\", \"64SNNX17\"],\r\n      created: 1613962018016,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"0NOhIzxB\": {\r\n      id: \"0NOhIzxB\",\r\n      parentId: \"welcome\",\r\n      text: \"Take a look around; you can check out:\",\r\n      childrenIds: [\"pKs_vxuk\", \"ANZddpXT\", \"NMb4Yf1z\"],\r\n      created: 1613962048878,\r\n      updated: 1613962057083,\r\n      dailyNote: null,\r\n    },\r\n    pKs_vxuk: {\r\n      id: \"pKs_vxuk\",\r\n      parentId: \"0NOhIzxB\",\r\n      text: \"[Daily Notes](#/daily-notes) (like a journal)\",\r\n      childrenIds: [],\r\n      created: 1613962057397,\r\n      updated: 1613962069453,\r\n      dailyNote: null,\r\n    },\r\n    ANZddpXT: {\r\n      id: \"ANZddpXT\",\r\n      parentId: \"0NOhIzxB\",\r\n      text: \"All of the [current pages](#/all-pages)\",\r\n      childrenIds: [],\r\n      created: 1613962070989,\r\n      updated: 1613962076848,\r\n      dailyNote: null,\r\n    },\r\n    NMb4Yf1z: {\r\n      id: \"NMb4Yf1z\",\r\n      parentId: \"0NOhIzxB\",\r\n      text: \"A sample page: [[Hello World]]\",\r\n      childrenIds: [\"nbGfXXqe\"],\r\n      created: 1613962077493,\r\n      updated: 1613962081636,\r\n      dailyNote: null,\r\n    },\r\n    nbGfXXqe: {\r\n      id: \"nbGfXXqe\",\r\n      parentId: \"NMb4Yf1z\",\r\n      text: \"Shift+click to open in side bar\",\r\n      childrenIds: [],\r\n      created: 1613962082245,\r\n      updated: 1613962090754,\r\n      dailyNote: null,\r\n    },\r\n    \"H-O00XW0\": {\r\n      id: \"H-O00XW0\",\r\n      parentId: \"welcome\",\r\n      text: \"Be sure to save your work if you wish to persist it\",\r\n      childrenIds: [\"mPiN8jkq\"],\r\n      created: 1613962091917,\r\n      updated: 1613962107536,\r\n      dailyNote: null,\r\n    },\r\n    mPiN8jkq: {\r\n      id: \"mPiN8jkq\",\r\n      parentId: \"H-O00XW0\",\r\n      text: \"Save/load buttons in top left\",\r\n      childrenIds: [],\r\n      created: 1613962107877,\r\n      updated: 1613962114571,\r\n      dailyNote: null,\r\n    },\r\n    \"64SNNX17\": {\r\n      id: \"64SNNX17\",\r\n      parentId: \"welcome\",\r\n      text:\r\n        \"Enjoy! Check out [the repo](https://github.com/cofinley/free-roam) to learn more and/or contribute!\",\r\n      childrenIds: [],\r\n      created: 1613962115053,\r\n      updated: 1613962120478,\r\n      dailyNote: null,\r\n    },\r\n    CYGv8EoI: {\r\n      id: \"CYGv8EoI\",\r\n      parentId: \"qoGY8XCw\",\r\n      text: \"[[v0.8.0]] - [[March 8th, 2021]]\",\r\n      childrenIds: [\"rrxpq9EB\", \"APdozas6\"],\r\n      created: 1615151525499,\r\n      updated: 1615241546978,\r\n      dailyNote: null,\r\n    },\r\n    qoGY8XCw: {\r\n      id: \"qoGY8XCw\",\r\n      parentId: null,\r\n      text: \"Changelog\",\r\n      childrenIds: [\r\n        \"CYGv8EoI\",\r\n        \"Q-52Ly5Z\",\r\n        \"hbwAGc0n\",\r\n        \"LZcy3J05\",\r\n        \"aHlHRw0J\",\r\n        \"zh5H9xj_\",\r\n        \"cJikzeh9\",\r\n        \"65Whw5OF\",\r\n        \"osJqlMOc\",\r\n        \"jLc-SlCe\",\r\n        \"ye0mPSj4\",\r\n      ],\r\n      created: 1615151525497,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    rrxpq9EB: {\r\n      id: \"rrxpq9EB\",\r\n      parentId: \"CYGv8EoI\",\r\n      text: \"**Added**\",\r\n      childrenIds: [\"aYDvZZDa\", \"-G0SPlgl\"],\r\n      created: 1615151549773,\r\n      updated: 1615151554208,\r\n      dailyNote: null,\r\n    },\r\n    aYDvZZDa: {\r\n      id: \"aYDvZZDa\",\r\n      parentId: \"rrxpq9EB\",\r\n      text: \"Collapsible panes\",\r\n      childrenIds: [],\r\n      created: 1615151554741,\r\n      updated: 1615151560593,\r\n      dailyNote: null,\r\n    },\r\n    \"Q-52Ly5Z\": {\r\n      id: \"Q-52Ly5Z\",\r\n      parentId: \"qoGY8XCw\",\r\n      text: \"[[v0.7.0]] - [[March 5th, 2021]]\",\r\n      childrenIds: [\"5v0LPIcJ\", \"NmXAqdVJ\"],\r\n      created: 1615151561373,\r\n      updated: 1615241553633,\r\n      dailyNote: null,\r\n    },\r\n    x4tIQpko: {\r\n      id: \"x4tIQpko\",\r\n      parentId: \"2Aqvr2ow\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615151568732,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"2Aqvr2ow\": {\r\n      id: \"2Aqvr2ow\",\r\n      parentId: null,\r\n      text: \"v0.7.0\",\r\n      childrenIds: [\"x4tIQpko\"],\r\n      created: 1615151568730,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"5v0LPIcJ\": {\r\n      id: \"5v0LPIcJ\",\r\n      parentId: \"Q-52Ly5Z\",\r\n      text: \"**Added**\",\r\n      childrenIds: [\"mO6iGrvz\"],\r\n      created: 1615151575750,\r\n      updated: 1615151579131,\r\n      dailyNote: null,\r\n    },\r\n    dfaf5wnb: {\r\n      id: \"dfaf5wnb\",\r\n      parentId: \"2021-03-05\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615151575815,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"2021-03-05\": {\r\n      id: \"2021-03-05\",\r\n      parentId: null,\r\n      text: \"March 5th, 2021\",\r\n      childrenIds: [\"dfaf5wnb\"],\r\n      created: 1615151575815,\r\n      updated: null,\r\n      dailyNote: \"2021-03-05\",\r\n    },\r\n    mO6iGrvz: {\r\n      id: \"mO6iGrvz\",\r\n      parentId: \"5v0LPIcJ\",\r\n      text: \"Ability to use up/down arrow keys to navigate between blocks\",\r\n      childrenIds: [],\r\n      created: 1615151579517,\r\n      updated: 1615151589444,\r\n      dailyNote: null,\r\n    },\r\n    NmXAqdVJ: {\r\n      id: \"NmXAqdVJ\",\r\n      parentId: \"Q-52Ly5Z\",\r\n      text: \"**Fixed**\",\r\n      childrenIds: [\"B0euIf5P\"],\r\n      created: 1615151590286,\r\n      updated: 1615151600634,\r\n      dailyNote: null,\r\n    },\r\n    B0euIf5P: {\r\n      id: \"B0euIf5P\",\r\n      parentId: \"NmXAqdVJ\",\r\n      text: \"Small editing bugs\",\r\n      childrenIds: [],\r\n      created: 1615151601205,\r\n      updated: 1615151604976,\r\n      dailyNote: null,\r\n    },\r\n    hbwAGc0n: {\r\n      id: \"hbwAGc0n\",\r\n      parentId: \"qoGY8XCw\",\r\n      text: \"[[v0.6.1]] - [[March 3rd, 2021]]\",\r\n      childrenIds: [\"nRqacq7j\", \"LIk2h4jD\"],\r\n      created: 1615151610278,\r\n      updated: 1615241556995,\r\n      dailyNote: null,\r\n    },\r\n    U_BM_Wui: {\r\n      id: \"U_BM_Wui\",\r\n      parentId: \"PHWZ0YQa\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615151618368,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    PHWZ0YQa: {\r\n      id: \"PHWZ0YQa\",\r\n      parentId: null,\r\n      text: \"v0.6.1\",\r\n      childrenIds: [\"U_BM_Wui\"],\r\n      created: 1615151618366,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    nRqacq7j: {\r\n      id: \"nRqacq7j\",\r\n      parentId: \"hbwAGc0n\",\r\n      text: \"**Added**\",\r\n      childrenIds: [\"ASDbCeJC\"],\r\n      created: 1615151627277,\r\n      updated: 1615151631388,\r\n      dailyNote: null,\r\n    },\r\n    Zoton0HW: {\r\n      id: \"Zoton0HW\",\r\n      parentId: \"2021-03-03\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615151627364,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"2021-03-03\": {\r\n      id: \"2021-03-03\",\r\n      parentId: null,\r\n      text: \"March 3rd, 2021\",\r\n      childrenIds: [\"Zoton0HW\"],\r\n      created: 1615151627362,\r\n      updated: null,\r\n      dailyNote: \"2021-03-03\",\r\n    },\r\n    ASDbCeJC: {\r\n      id: \"ASDbCeJC\",\r\n      parentId: \"nRqacq7j\",\r\n      text: \"Unit/integration tests\",\r\n      childrenIds: [],\r\n      created: 1615151633493,\r\n      updated: 1615151637391,\r\n      dailyNote: null,\r\n    },\r\n    LIk2h4jD: {\r\n      id: \"LIk2h4jD\",\r\n      parentId: \"hbwAGc0n\",\r\n      text: \"**Fixed**\",\r\n      childrenIds: [\"nI6sjZEh\", \"sWA5LPEl\"],\r\n      created: 1615151646957,\r\n      updated: 1615151650254,\r\n      dailyNote: null,\r\n    },\r\n    nI6sjZEh: {\r\n      id: \"nI6sjZEh\",\r\n      parentId: \"LIk2h4jD\",\r\n      text: \"Searching with \\\\[\\\\[link brackets\\\\]\\\\]\",\r\n      childrenIds: [],\r\n      created: 1615151651172,\r\n      updated: 1615151664214,\r\n      dailyNote: null,\r\n    },\r\n    sWA5LPEl: {\r\n      id: \"sWA5LPEl\",\r\n      parentId: \"LIk2h4jD\",\r\n      text:\r\n        \"Bug where adding a link in the main view would break the app if the same block was open in the sidebar\",\r\n      childrenIds: [],\r\n      created: 1615151666021,\r\n      updated: 1615151676716,\r\n      dailyNote: null,\r\n    },\r\n    LZcy3J05: {\r\n      id: \"LZcy3J05\",\r\n      parentId: \"qoGY8XCw\",\r\n      text: \"[[v0.6.0]] - [[February 23rd, 2021]]\",\r\n      childrenIds: [\"QRq7Iijd\", \"xpkrOqmn\"],\r\n      created: 1615151680838,\r\n      updated: 1615241562711,\r\n      dailyNote: null,\r\n    },\r\n    \"28UYA3QT\": {\r\n      id: \"28UYA3QT\",\r\n      parentId: \"n8zdS3M6\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615151688570,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    n8zdS3M6: {\r\n      id: \"n8zdS3M6\",\r\n      parentId: null,\r\n      text: \"v0.6.0\",\r\n      childrenIds: [\"28UYA3QT\"],\r\n      created: 1615151688569,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    QRq7Iijd: {\r\n      id: \"QRq7Iijd\",\r\n      parentId: \"LZcy3J05\",\r\n      text: \"**Added**\",\r\n      childrenIds: [\"fcx0cCvG\"],\r\n      created: 1615151702501,\r\n      updated: 1615151706620,\r\n      dailyNote: null,\r\n    },\r\n    XMhm2bRA: {\r\n      id: \"XMhm2bRA\",\r\n      parentId: \"2021-02-23\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615151702615,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"2021-02-23\": {\r\n      id: \"2021-02-23\",\r\n      parentId: null,\r\n      text: \"February 23rd, 2021\",\r\n      childrenIds: [\"XMhm2bRA\"],\r\n      created: 1615151702613,\r\n      updated: null,\r\n      dailyNote: \"2021-02-23\",\r\n    },\r\n    fcx0cCvG: {\r\n      id: \"fcx0cCvG\",\r\n      parentId: \"QRq7Iijd\",\r\n      text: \"'Show references' button for view pane sections\",\r\n      childrenIds: [],\r\n      created: 1615151706796,\r\n      updated: 1615151716454,\r\n      dailyNote: null,\r\n    },\r\n    xpkrOqmn: {\r\n      id: \"xpkrOqmn\",\r\n      parentId: \"LZcy3J05\",\r\n      text: \"**Changed**\",\r\n      childrenIds: [\"Xb1qVATK\"],\r\n      created: 1615151716756,\r\n      updated: 1615151721385,\r\n      dailyNote: null,\r\n    },\r\n    Xb1qVATK: {\r\n      id: \"Xb1qVATK\",\r\n      parentId: \"xpkrOqmn\",\r\n      text: \"Linked/unlinked reference controls behavior, styling\",\r\n      childrenIds: [],\r\n      created: 1615151721780,\r\n      updated: 1615151738847,\r\n      dailyNote: null,\r\n    },\r\n    aHlHRw0J: {\r\n      id: \"aHlHRw0J\",\r\n      parentId: \"qoGY8XCw\",\r\n      text: \"[[v0.5.0]] - [[February 22nd, 2021]]\",\r\n      childrenIds: [\"BQKXI_WC\", \"DLV049Kx\", \"6vRV-qni\"],\r\n      created: 1615151742357,\r\n      updated: 1615241566336,\r\n      dailyNote: null,\r\n    },\r\n    WvrzSZxd: {\r\n      id: \"WvrzSZxd\",\r\n      parentId: \"GrVjOqq0\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615151753460,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    GrVjOqq0: {\r\n      id: \"GrVjOqq0\",\r\n      parentId: null,\r\n      text: \"v0.5.0\",\r\n      childrenIds: [\"WvrzSZxd\"],\r\n      created: 1615151753459,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    BQKXI_WC: {\r\n      id: \"BQKXI_WC\",\r\n      parentId: \"aHlHRw0J\",\r\n      text: \"**Added**\",\r\n      childrenIds: [\"ce6qtsCS\"],\r\n      created: 1615151764900,\r\n      updated: 1615151769070,\r\n      dailyNote: null,\r\n    },\r\n    \"8ma9KyU9\": {\r\n      id: \"8ma9KyU9\",\r\n      parentId: \"2021-02-22\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615151765020,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"2021-02-22\": {\r\n      id: \"2021-02-22\",\r\n      parentId: null,\r\n      text: \"February 22nd, 2021\",\r\n      childrenIds: [\"8ma9KyU9\"],\r\n      created: 1615151765019,\r\n      updated: null,\r\n      dailyNote: \"2021-02-22\",\r\n    },\r\n    ce6qtsCS: {\r\n      id: \"ce6qtsCS\",\r\n      parentId: \"BQKXI_WC\",\r\n      text: \"Welcome page\",\r\n      childrenIds: [],\r\n      created: 1615151769340,\r\n      updated: 1615151772726,\r\n      dailyNote: null,\r\n    },\r\n    DLV049Kx: {\r\n      id: \"DLV049Kx\",\r\n      parentId: \"aHlHRw0J\",\r\n      text: \"**Changed**\",\r\n      childrenIds: [\"H26Q1rNJ\", \"AkNZvm6T\", \"4kT4k6AB\"],\r\n      created: 1615151772973,\r\n      updated: 1615151778766,\r\n      dailyNote: null,\r\n    },\r\n    H26Q1rNJ: {\r\n      id: \"H26Q1rNJ\",\r\n      parentId: \"DLV049Kx\",\r\n      text: \"Shorter page Ids\",\r\n      childrenIds: [],\r\n      created: 1615151779396,\r\n      updated: 1615151786911,\r\n      dailyNote: null,\r\n    },\r\n    AkNZvm6T: {\r\n      id: \"AkNZvm6T\",\r\n      parentId: \"DLV049Kx\",\r\n      text: \"Link color\",\r\n      childrenIds: [\"Jeu_zI_d\"],\r\n      created: 1615151787236,\r\n      updated: 1615151789774,\r\n      dailyNote: null,\r\n    },\r\n    Jeu_zI_d: {\r\n      id: \"Jeu_zI_d\",\r\n      parentId: \"AkNZvm6T\",\r\n      text: \"Something with AAA contrast\",\r\n      childrenIds: [],\r\n      created: 1615151791484,\r\n      updated: 1615151795773,\r\n      dailyNote: null,\r\n    },\r\n    \"4kT4k6AB\": {\r\n      id: \"4kT4k6AB\",\r\n      parentId: \"DLV049Kx\",\r\n      text: \"Clarify/condense readme\",\r\n      childrenIds: [],\r\n      created: 1615151796132,\r\n      updated: 1615151811399,\r\n      dailyNote: null,\r\n    },\r\n    \"6vRV-qni\": {\r\n      id: \"6vRV-qni\",\r\n      parentId: \"aHlHRw0J\",\r\n      text: \"**Fixed**\",\r\n      childrenIds: [\"Hz2cnxGo\"],\r\n      created: 1615151816396,\r\n      updated: 1615151823078,\r\n      dailyNote: null,\r\n    },\r\n    Hz2cnxGo: {\r\n      id: \"Hz2cnxGo\",\r\n      parentId: \"6vRV-qni\",\r\n      text: \"References\",\r\n      childrenIds: [\"zcFTghP_\", \"GTSiOiPB\", \"BWvQJEpx\"],\r\n      created: 1615151825428,\r\n      updated: 1615151827462,\r\n      dailyNote: null,\r\n    },\r\n    zcFTghP_: {\r\n      id: \"zcFTghP_\",\r\n      parentId: \"Hz2cnxGo\",\r\n      text: \"Link to page on reference heading, not the block\",\r\n      childrenIds: [],\r\n      created: 1615151828596,\r\n      updated: 1615151840213,\r\n      dailyNote: null,\r\n    },\r\n    GTSiOiPB: {\r\n      id: \"GTSiOiPB\",\r\n      parentId: \"Hz2cnxGo\",\r\n      text: \"Styling\",\r\n      childrenIds: [],\r\n      created: 1615151840843,\r\n      updated: 1615151842695,\r\n      dailyNote: null,\r\n    },\r\n    BWvQJEpx: {\r\n      id: \"BWvQJEpx\",\r\n      parentId: \"Hz2cnxGo\",\r\n      text: \"Breadcrumbs\",\r\n      childrenIds: [],\r\n      created: 1615151843124,\r\n      updated: 1615151845279,\r\n      dailyNote: null,\r\n    },\r\n    zh5H9xj_: {\r\n      id: \"zh5H9xj_\",\r\n      parentId: \"qoGY8XCw\",\r\n      text: \"[[v0.4.0]] - [[February 20th, 2021]]\",\r\n      childrenIds: [\"_NgKanaH\", \"ykaw0vG-\", \"MkE63b42\"],\r\n      created: 1615151851516,\r\n      updated: 1615241570549,\r\n      dailyNote: null,\r\n    },\r\n    SHEu5mSn: {\r\n      id: \"SHEu5mSn\",\r\n      parentId: \"h3QIVAwN\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615151856750,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    h3QIVAwN: {\r\n      id: \"h3QIVAwN\",\r\n      parentId: null,\r\n      text: \"v0.4.0\",\r\n      childrenIds: [\"SHEu5mSn\"],\r\n      created: 1615151856749,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    _NgKanaH: {\r\n      id: \"_NgKanaH\",\r\n      parentId: \"zh5H9xj_\",\r\n      text: \"**Added**\",\r\n      childrenIds: [\"oNR59Nt6\"],\r\n      created: 1615151877364,\r\n      updated: 1615151883631,\r\n      dailyNote: null,\r\n    },\r\n    qxIrQMXH: {\r\n      id: \"qxIrQMXH\",\r\n      parentId: \"2021-02-20\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615151877619,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"2021-02-20\": {\r\n      id: \"2021-02-20\",\r\n      parentId: null,\r\n      text: \"February 20th, 2021\",\r\n      childrenIds: [\"qxIrQMXH\"],\r\n      created: 1615151877617,\r\n      updated: null,\r\n      dailyNote: \"2021-02-20\",\r\n    },\r\n    oNR59Nt6: {\r\n      id: \"oNR59Nt6\",\r\n      parentId: \"_NgKanaH\",\r\n      text: \"All pages view\",\r\n      childrenIds: [],\r\n      created: 1615151884107,\r\n      updated: 1615151891717,\r\n      dailyNote: null,\r\n    },\r\n    \"ykaw0vG-\": {\r\n      id: \"ykaw0vG-\",\r\n      parentId: \"zh5H9xj_\",\r\n      text: \"**Changed**\",\r\n      childrenIds: [\"mRMlNbtc\", \"2Jff6FfY\", \"VwYwAGRr\"],\r\n      created: 1615151895571,\r\n      updated: 1615151899030,\r\n      dailyNote: null,\r\n    },\r\n    mRMlNbtc: {\r\n      id: \"mRMlNbtc\",\r\n      parentId: \"ykaw0vG-\",\r\n      text:\r\n        \"View pane can now open just a page's references if desired (used for all pages mentions\",\r\n      childrenIds: [],\r\n      created: 1615151899491,\r\n      updated: 1615151911306,\r\n      dailyNote: null,\r\n    },\r\n    \"2Jff6FfY\": {\r\n      id: \"2Jff6FfY\",\r\n      parentId: \"ykaw0vG-\",\r\n      text:\r\n        \"Saving can now happen in bulk, all saved artifacts are zipped up now\",\r\n      childrenIds: [],\r\n      created: 1615151912355,\r\n      updated: 1615151915014,\r\n      dailyNote: null,\r\n    },\r\n    VwYwAGRr: {\r\n      id: \"VwYwAGRr\",\r\n      parentId: \"ykaw0vG-\",\r\n      text: \"Seafoam green link color\",\r\n      childrenIds: [],\r\n      created: 1615151915675,\r\n      updated: 1615151919885,\r\n      dailyNote: null,\r\n    },\r\n    MkE63b42: {\r\n      id: \"MkE63b42\",\r\n      parentId: \"zh5H9xj_\",\r\n      text: \"**Fixed**\",\r\n      childrenIds: [\"tCuoXsgJ\"],\r\n      created: 1615151920683,\r\n      updated: 1615151924133,\r\n      dailyNote: null,\r\n    },\r\n    tCuoXsgJ: {\r\n      id: \"tCuoXsgJ\",\r\n      parentId: \"MkE63b42\",\r\n      text: \"Various bug fixes\",\r\n      childrenIds: [],\r\n      created: 1615151924571,\r\n      updated: 1615151928190,\r\n      dailyNote: null,\r\n    },\r\n    cJikzeh9: {\r\n      id: \"cJikzeh9\",\r\n      parentId: \"qoGY8XCw\",\r\n      text: \"[[v0.3.0]] - [[February 19th, 2021]]\",\r\n      childrenIds: [\"MTEYkWg4\", \"orng4Tbx\"],\r\n      created: 1615151995763,\r\n      updated: 1615241573546,\r\n      dailyNote: null,\r\n    },\r\n    iQLTYbmZ: {\r\n      id: \"iQLTYbmZ\",\r\n      parentId: \"lOYo9YNv\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615152001477,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    lOYo9YNv: {\r\n      id: \"lOYo9YNv\",\r\n      parentId: null,\r\n      text: \"v0.3.0\",\r\n      childrenIds: [\"iQLTYbmZ\"],\r\n      created: 1615152001474,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    MTEYkWg4: {\r\n      id: \"MTEYkWg4\",\r\n      parentId: \"cJikzeh9\",\r\n      text: \"**Added**\",\r\n      childrenIds: [\"RWUiSaqJ\"],\r\n      created: 1615152014338,\r\n      updated: 1615152313396,\r\n      dailyNote: null,\r\n    },\r\n    hn3EsXvI: {\r\n      id: \"hn3EsXvI\",\r\n      parentId: \"2021-02-19\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615152014569,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"2021-02-19\": {\r\n      id: \"2021-02-19\",\r\n      parentId: null,\r\n      text: \"February 19th, 2021\",\r\n      childrenIds: [\"hn3EsXvI\"],\r\n      created: 1615152014566,\r\n      updated: null,\r\n      dailyNote: \"2021-02-19\",\r\n    },\r\n    RWUiSaqJ: {\r\n      id: \"RWUiSaqJ\",\r\n      parentId: \"MTEYkWg4\",\r\n      text: \"Daily Notes\",\r\n      childrenIds: [\"RVF3qlH4\"],\r\n      created: 1615152313681,\r\n      updated: 1615152316822,\r\n      dailyNote: null,\r\n    },\r\n    RVF3qlH4: {\r\n      id: \"RVF3qlH4\",\r\n      parentId: \"RWUiSaqJ\",\r\n      text:\r\n        \"Clicking on this page will generate today's note if it doesn't exist\",\r\n      childrenIds: [],\r\n      created: 1615152317360,\r\n      updated: 1615152354091,\r\n      dailyNote: null,\r\n    },\r\n    orng4Tbx: {\r\n      id: \"orng4Tbx\",\r\n      parentId: \"cJikzeh9\",\r\n      text: \"**Changed**\",\r\n      childrenIds: [\"ijym7flZ\"],\r\n      created: 1615152359016,\r\n      updated: 1615152363485,\r\n      dailyNote: null,\r\n    },\r\n    ijym7flZ: {\r\n      id: \"ijym7flZ\",\r\n      parentId: \"orng4Tbx\",\r\n      text: \"Refactor `Block.js`\",\r\n      childrenIds: [],\r\n      created: 1615152363784,\r\n      updated: 1615152377738,\r\n      dailyNote: null,\r\n    },\r\n    \"65Whw5OF\": {\r\n      id: \"65Whw5OF\",\r\n      parentId: \"qoGY8XCw\",\r\n      text: \"[[v0.2.0]] - [[February 14th, 2021]]\",\r\n      childrenIds: [\"4yDhjlwo\", \"LSyO6QeQ\"],\r\n      created: 1615152378217,\r\n      updated: 1615241577095,\r\n      dailyNote: null,\r\n    },\r\n    \"37i-QRj4\": {\r\n      id: \"37i-QRj4\",\r\n      parentId: \"NnBgaPbM\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615152387178,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    NnBgaPbM: {\r\n      id: \"NnBgaPbM\",\r\n      parentId: null,\r\n      text: \"v0.2.0\",\r\n      childrenIds: [\"37i-QRj4\"],\r\n      created: 1615152387175,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"4yDhjlwo\": {\r\n      id: \"4yDhjlwo\",\r\n      parentId: \"65Whw5OF\",\r\n      text: \"**Added**\",\r\n      childrenIds: [\"NQQ24pc2\"],\r\n      created: 1615152397696,\r\n      updated: 1615152401882,\r\n      dailyNote: null,\r\n    },\r\n    lYga6L3g: {\r\n      id: \"lYga6L3g\",\r\n      parentId: \"2021-02-14\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615152397952,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"2021-02-14\": {\r\n      id: \"2021-02-14\",\r\n      parentId: null,\r\n      text: \"February 14th, 2021\",\r\n      childrenIds: [\"lYga6L3g\"],\r\n      created: 1615152397950,\r\n      updated: null,\r\n      dailyNote: \"2021-02-14\",\r\n    },\r\n    NQQ24pc2: {\r\n      id: \"NQQ24pc2\",\r\n      parentId: \"4yDhjlwo\",\r\n      text: \"Ability to position caret under mouse click position\",\r\n      childrenIds: [],\r\n      created: 1615152402136,\r\n      updated: 1615152414280,\r\n      dailyNote: null,\r\n    },\r\n    LSyO6QeQ: {\r\n      id: \"LSyO6QeQ\",\r\n      parentId: \"65Whw5OF\",\r\n      text: \"**Fixed**\",\r\n      childrenIds: [\"KwKSIov_\", \"5QIy-o9I\"],\r\n      created: 1615152414719,\r\n      updated: 1615152418703,\r\n      dailyNote: null,\r\n    },\r\n    KwKSIov_: {\r\n      id: \"KwKSIov_\",\r\n      parentId: \"LSyO6QeQ\",\r\n      text: \"Unlinked refs bug which toggled *all* unlinked refs\",\r\n      childrenIds: [],\r\n      created: 1615152418951,\r\n      updated: 1615152432814,\r\n      dailyNote: null,\r\n    },\r\n    \"5QIy-o9I\": {\r\n      id: \"5QIy-o9I\",\r\n      parentId: \"LSyO6QeQ\",\r\n      text:\r\n        \"Block expand/collapse buttons not playing well with clicking the thread lines\",\r\n      childrenIds: [],\r\n      created: 1615152439544,\r\n      updated: 1615152455272,\r\n      dailyNote: null,\r\n    },\r\n    osJqlMOc: {\r\n      id: \"osJqlMOc\",\r\n      parentId: \"qoGY8XCw\",\r\n      text: \"[[v0.1.2]] - [[February 13th, 2021]]\",\r\n      childrenIds: [\"KfegyrhL\"],\r\n      created: 1615152458768,\r\n      updated: 1615241582244,\r\n      dailyNote: null,\r\n    },\r\n    sb8fAPEM: {\r\n      id: \"sb8fAPEM\",\r\n      parentId: \"ChLH8aqz\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615152465521,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    ChLH8aqz: {\r\n      id: \"ChLH8aqz\",\r\n      parentId: null,\r\n      text: \"v0.1.2\",\r\n      childrenIds: [\"sb8fAPEM\"],\r\n      created: 1615152465512,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    KfegyrhL: {\r\n      id: \"KfegyrhL\",\r\n      parentId: \"osJqlMOc\",\r\n      text: \"**Fixed**\",\r\n      childrenIds: [\"ls_xmxM1\"],\r\n      created: 1615152478743,\r\n      updated: 1615152491499,\r\n      dailyNote: null,\r\n    },\r\n    lO5DViF0: {\r\n      id: \"lO5DViF0\",\r\n      parentId: \"2021-02-13\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615152479088,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"2021-02-13\": {\r\n      id: \"2021-02-13\",\r\n      parentId: null,\r\n      text: \"February 13th, 2021\",\r\n      childrenIds: [\"lO5DViF0\"],\r\n      created: 1615152479085,\r\n      updated: null,\r\n      dailyNote: \"2021-02-13\",\r\n    },\r\n    ls_xmxM1: {\r\n      id: \"ls_xmxM1\",\r\n      parentId: \"KfegyrhL\",\r\n      text: \"View pane and page link bugs\",\r\n      childrenIds: [],\r\n      created: 1615152492576,\r\n      updated: 1615152498679,\r\n      dailyNote: null,\r\n    },\r\n    \"jLc-SlCe\": {\r\n      id: \"jLc-SlCe\",\r\n      parentId: \"qoGY8XCw\",\r\n      text: \"[[v0.1.1]] - [[February 13th, 2021]]\",\r\n      childrenIds: [\"wse3RmyV\"],\r\n      created: 1615152499080,\r\n      updated: 1615241585479,\r\n      dailyNote: null,\r\n    },\r\n    VwBYAYLC: {\r\n      id: \"VwBYAYLC\",\r\n      parentId: \"jPesTGdz\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615152504189,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    jPesTGdz: {\r\n      id: \"jPesTGdz\",\r\n      parentId: null,\r\n      text: \"v0.1.1\",\r\n      childrenIds: [\"VwBYAYLC\"],\r\n      created: 1615152504187,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    wse3RmyV: {\r\n      id: \"wse3RmyV\",\r\n      parentId: \"jLc-SlCe\",\r\n      text: \"**Fixed**\",\r\n      childrenIds: [\"3EI68J4G\"],\r\n      created: 1615152515519,\r\n      updated: 1615152521252,\r\n      dailyNote: null,\r\n    },\r\n    \"3EI68J4G\": {\r\n      id: \"3EI68J4G\",\r\n      parentId: \"wse3RmyV\",\r\n      text: \"Event `preventDefault()` was blocking deletion\",\r\n      childrenIds: [],\r\n      created: 1615152521509,\r\n      updated: 1615152538969,\r\n      dailyNote: null,\r\n    },\r\n    ye0mPSj4: {\r\n      id: \"ye0mPSj4\",\r\n      parentId: \"qoGY8XCw\",\r\n      text: \"[[v0.1.0]] - [[February 13th, 2021]]\",\r\n      childrenIds: [\"xFNuKdHA\", \"8Fku1XWQ\", \"ikdmYO9N\"],\r\n      created: 1615152539487,\r\n      updated: 1615241588599,\r\n      dailyNote: null,\r\n    },\r\n    ACTsaLY2: {\r\n      id: \"ACTsaLY2\",\r\n      parentId: \"QzkNFrfk\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615152545181,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    QzkNFrfk: {\r\n      id: \"QzkNFrfk\",\r\n      parentId: null,\r\n      text: \"v0.1.0\",\r\n      childrenIds: [\"ACTsaLY2\"],\r\n      created: 1615152545179,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    xFNuKdHA: {\r\n      id: \"xFNuKdHA\",\r\n      parentId: \"ye0mPSj4\",\r\n      text:\r\n        \"Everything in the [React rewrite Github issue](https://github.com/cofinley/free-roam/issues/3) as well as block deletion.\",\r\n      childrenIds: [],\r\n      created: 1615152554855,\r\n      updated: 1615152599403,\r\n      dailyNote: null,\r\n    },\r\n    \"8Fku1XWQ\": {\r\n      id: \"8Fku1XWQ\",\r\n      parentId: \"ye0mPSj4\",\r\n      text: \"Provide a release bundle to make it easier for people to test.\",\r\n      childrenIds: [],\r\n      created: 1615152599879,\r\n      updated: 1615152611757,\r\n      dailyNote: null,\r\n    },\r\n    ikdmYO9N: {\r\n      id: \"ikdmYO9N\",\r\n      parentId: \"ye0mPSj4\",\r\n      text:\r\n        \"This project uses semver, so until we get to v1.0, this is considered incomplete.\",\r\n      childrenIds: [],\r\n      created: 1615152613143,\r\n      updated: 1615152623765,\r\n      dailyNote: null,\r\n    },\r\n    APdozas6: {\r\n      id: \"APdozas6\",\r\n      parentId: \"CYGv8EoI\",\r\n      text: \"**Fixed**\",\r\n      childrenIds: [\"lJ2X-IPj\", \"W0nrIHya\"],\r\n      created: 1615153736696,\r\n      updated: 1615153739900,\r\n      dailyNote: null,\r\n    },\r\n    \"lJ2X-IPj\": {\r\n      id: \"lJ2X-IPj\",\r\n      parentId: \"APdozas6\",\r\n      text: \"Center stage not scrolling on long pages\",\r\n      childrenIds: [],\r\n      created: 1615153740753,\r\n      updated: 1615153763286,\r\n      dailyNote: null,\r\n    },\r\n    t7DCXn7R: {\r\n      id: \"t7DCXn7R\",\r\n      parentId: \"2021-03-08\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615241289927,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"2021-03-08\": {\r\n      id: \"2021-03-08\",\r\n      parentId: null,\r\n      text: \"March 8th, 2021\",\r\n      childrenIds: [\"t7DCXn7R\"],\r\n      created: 1615241289921,\r\n      updated: null,\r\n      dailyNote: \"2021-03-08\",\r\n    },\r\n    W0nrIHya: {\r\n      id: \"W0nrIHya\",\r\n      parentId: \"APdozas6\",\r\n      text: \"Performance improvements\",\r\n      childrenIds: [\"uzorR-kR\", \"k6iAs-fh\"],\r\n      created: 1615241295759,\r\n      updated: 1615241306251,\r\n      dailyNote: null,\r\n    },\r\n    \"uzorR-kR\": {\r\n      id: \"uzorR-kR\",\r\n      parentId: \"W0nrIHya\",\r\n      text: \"No more saving on textarea change; much better now\",\r\n      childrenIds: [\"giaeP2_c\"],\r\n      created: 1615241306135,\r\n      updated: 1615241332287,\r\n      dailyNote: null,\r\n    },\r\n    giaeP2_c: {\r\n      id: \"giaeP2_c\",\r\n      parentId: \"uzorR-kR\",\r\n      text: \"Saving will happen on blur\",\r\n      childrenIds: [],\r\n      created: 1615241332111,\r\n      updated: 1615241340386,\r\n      dailyNote: null,\r\n    },\r\n    \"k6iAs-fh\": {\r\n      id: \"k6iAs-fh\",\r\n      parentId: \"W0nrIHya\",\r\n      text: \"Memoization of more-pure functional components\",\r\n      childrenIds: [],\r\n      created: 1615241340254,\r\n      updated: 1615241354547,\r\n      dailyNote: null,\r\n    },\r\n    \"-G0SPlgl\": {\r\n      id: \"-G0SPlgl\",\r\n      parentId: \"rrxpq9EB\",\r\n      text: \"The [[Changelog]]!\",\r\n      childrenIds: [],\r\n      created: 1615241411742,\r\n      updated: 1615241424857,\r\n      dailyNote: null,\r\n    },\r\n    _gg6HfLG: {\r\n      id: \"_gg6HfLG\",\r\n      parentId: \"2021-03-10\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615423342067,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    \"2021-03-10\": {\r\n      id: \"2021-03-10\",\r\n      parentId: null,\r\n      text: \"March 10th, 2021\",\r\n      childrenIds: [\"_gg6HfLG\"],\r\n      created: 1615423342063,\r\n      updated: null,\r\n      dailyNote: \"2021-03-10\",\r\n    },\r\n    \"a5G-jqie\": {\r\n      id: \"a5G-jqie\",\r\n      parentId: \"jxThNu7Z\",\r\n      text: \"Click here to edit\",\r\n      childrenIds: [],\r\n      created: 1615423342113,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n    jxThNu7Z: {\r\n      id: \"jxThNu7Z\",\r\n      parentId: null,\r\n      text: \"v0.8.0\",\r\n      childrenIds: [\"a5G-jqie\"],\r\n      created: 1615423342109,\r\n      updated: null,\r\n      dailyNote: null,\r\n    },\r\n  },\r\n  filePane: {\r\n    favoriteBlockIds: [\"welcome\", \"abcd\", \"efgh\", \"qoGY8XCw\"],\r\n  },\r\n  viewPane: {\r\n    views: [\r\n      {\r\n        type: \"page\",\r\n        blockId: \"efgh\",\r\n      },\r\n    ],\r\n  },\r\n  navbar: {\r\n    searchQuery: \"\",\r\n  },\r\n  links: {\r\n    to: {\r\n      efgh: [\"mnop\"],\r\n      U0wzj61A: [],\r\n      \"2021-03-08\": [\"b2YZvcWh\", \"CYGv8EoI\"],\r\n      qoGY8XCw: [\"-G0SPlgl\"],\r\n      \"2Aqvr2ow\": [\"Q-52Ly5Z\"],\r\n      \"2021-03-05\": [\"lup97uCD\", \"Q-52Ly5Z\"],\r\n      PHWZ0YQa: [\"hbwAGc0n\"],\r\n      \"2021-03-03\": [\"_5azrzbp\", \"hbwAGc0n\"],\r\n      n8zdS3M6: [\"LZcy3J05\"],\r\n      \"2021-02-23\": [\"-AtI_AzN\", \"LZcy3J05\"],\r\n      GrVjOqq0: [\"aHlHRw0J\"],\r\n      \"2021-02-22\": [\"Rw6LsatI\", \"aHlHRw0J\"],\r\n      h3QIVAwN: [\"zh5H9xj_\"],\r\n      \"2021-02-20\": [\"n1UcDJvH\", \"zh5H9xj_\"],\r\n      lOYo9YNv: [\"cJikzeh9\"],\r\n      \"2021-02-19\": [\"7n_YI5hr\", \"cJikzeh9\"],\r\n      NnBgaPbM: [\"65Whw5OF\"],\r\n      \"2021-02-14\": [\"_kgduwg0\", \"65Whw5OF\"],\r\n      ChLH8aqz: [\"osJqlMOc\"],\r\n      \"2021-02-13\": [\r\n        \"-Aqd5RHr\",\r\n        \"nCpmIXvg\",\r\n        \"38N6Bt4X\",\r\n        \"osJqlMOc\",\r\n        \"jLc-SlCe\",\r\n        \"ye0mPSj4\",\r\n      ],\r\n      jPesTGdz: [\"jLc-SlCe\"],\r\n      QzkNFrfk: [\"ye0mPSj4\"],\r\n      abcd: [\"NMb4Yf1z\"],\r\n      jxThNu7Z: [\"CYGv8EoI\"],\r\n    },\r\n    from: {\r\n      mnop: [\"efgh\"],\r\n      CYGv8EoI: [\"2021-03-08\", \"jxThNu7Z\"],\r\n      b2YZvcWh: [\"2021-03-08\"],\r\n      \"-G0SPlgl\": [\"qoGY8XCw\"],\r\n      \"Q-52Ly5Z\": [\"2021-03-05\", \"2Aqvr2ow\"],\r\n      lup97uCD: [\"2021-03-05\"],\r\n      hbwAGc0n: [\"2021-03-03\", \"PHWZ0YQa\"],\r\n      _5azrzbp: [\"2021-03-03\"],\r\n      LZcy3J05: [\"2021-02-23\", \"n8zdS3M6\"],\r\n      \"-AtI_AzN\": [\"2021-02-23\"],\r\n      aHlHRw0J: [\"2021-02-22\", \"GrVjOqq0\"],\r\n      Rw6LsatI: [\"2021-02-22\"],\r\n      zh5H9xj_: [\"2021-02-20\", \"h3QIVAwN\"],\r\n      n1UcDJvH: [\"2021-02-20\"],\r\n      cJikzeh9: [\"2021-02-19\", \"lOYo9YNv\"],\r\n      \"7n_YI5hr\": [\"2021-02-19\"],\r\n      \"65Whw5OF\": [\"2021-02-14\", \"NnBgaPbM\"],\r\n      _kgduwg0: [\"2021-02-14\"],\r\n      osJqlMOc: [\"2021-02-13\", \"ChLH8aqz\"],\r\n      \"-Aqd5RHr\": [\"2021-02-13\"],\r\n      \"jLc-SlCe\": [\"2021-02-13\", \"jPesTGdz\"],\r\n      nCpmIXvg: [\"2021-02-13\"],\r\n      ye0mPSj4: [\"2021-02-13\", \"QzkNFrfk\"],\r\n      \"38N6Bt4X\": [\"2021-02-13\"],\r\n      NMb4Yf1z: [\"abcd\"],\r\n    },\r\n  },\r\n  editor: {\r\n    focusedBlock: {\r\n      blockId: \"\",\r\n      isMain: true,\r\n      caretPos: 0,\r\n    },\r\n  },\r\n};\r\n\r\nexport default initialState;\r\n","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nimport initialState from '../../redux/initialState'\r\n\r\nconst viewPaneSlice = createSlice({\r\n  name: 'viewPane',\r\n  initialState: initialState.viewPane,\r\n  reducers: {\r\n    setViewPaneState: (state, action) => {\r\n      const newState = action.payload\r\n      if (newState && 'views' in newState) {\r\n        return newState\r\n      }\r\n    },\r\n    pushView: (state, action) => {\r\n      const { type, blockId } = action.payload\r\n      const viewExists = state.views.find(view => view.type === type && view.blockId === blockId)\r\n      if (!viewExists) {\r\n        state.views.unshift(action.payload)\r\n      }\r\n    },\r\n    popView: (state, action) => {\r\n      const { type, blockId } = action.payload\r\n      state.views = state.views.filter(view => (type !== 'all' && view.type !== type) || view.blockId !== blockId)\r\n    }\r\n  }\r\n})\r\n\r\nexport const { setViewPaneState, pushView, popView } = viewPaneSlice.actions\r\nexport default viewPaneSlice.reducer","import React from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport './link.scss'\r\n\r\nimport { pushView } from '../view-pane/viewPaneSlice'\r\n\r\nconst PageLink = ({ blockId, isPage = true, children, noStyling, afterClick, ...rest }) => {\r\n  const dispatch = useDispatch()\r\n  const to = `/page/${blockId}`\r\n\r\n  const navigate = event => {\r\n    if (event.shiftKey) {\r\n      event.preventDefault()\r\n      dispatch(pushView({ type: isPage ? 'page' : 'block', blockId: blockId }))\r\n    }\r\n    if (afterClick) {\r\n      afterClick()\r\n    }\r\n    event.stopPropagation()\r\n  }\r\n\r\n  return (\r\n    <Link\r\n      to={to}\r\n      onClick={navigate}\r\n      className={`block-link${noStyling ? ' block-link--no-styling' : ''}`}\r\n      {...rest}\r\n    >\r\n      {children}\r\n    </Link>\r\n  )\r\n}\r\n\r\nexport default PageLink","import React, { useState } from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { getPage } from '../block/blockModel';\r\nimport { CaretRightFill, CaretDownFill } from 'react-bootstrap-icons'\r\n\r\nimport PageLink from '../links/PageLink'\r\nimport Editor from './Editor'\r\n\r\nconst References = ({ block, isMain }) => {\r\n  const [showLinkedRefs, setShowLinkedRefs] = useState(true)\r\n  const [showUnlinkedRefs, setShowUnlinkedRefs] = useState(false)\r\n  const [unlinkedRefs, setUnlinkedRefs] = useState(null)\r\n  const references = useSelector(state => state.links.to[block.id])\r\n  const blocks = useSelector(state => state.blocks)\r\n\r\n  const renderLinkedReferences = () => {\r\n    if (block.parentId || !references || !references.length) {\r\n      return\r\n    }\r\n    return references.map(referenceBlockId => {\r\n      if (!(referenceBlockId in blocks)) {\r\n        return null\r\n      }\r\n      const referenceBlock = blocks[referenceBlockId]\r\n      const referenceBlockPage = getPage(referenceBlock, blocks)\r\n      return (\r\n        <div key={referenceBlockId}>\r\n          <PageLink blockId={referenceBlockPage.id}><h5>{referenceBlockPage.text}</h5></PageLink>\r\n          <div className=\"reference-container\">\r\n            <Editor\r\n              blockId={referenceBlockId}\r\n              isRoot={false}\r\n              isMain={isMain}\r\n              fold\r\n              showBreadcrumbs\r\n            />\r\n          </div>\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  const getUnlinkedReferences = text => {\r\n    const titlePat = new RegExp(`(?<![\\\\[\\\\w])${text}(?![\\\\[\\\\w]+)`, 'gi')\r\n    const unlinkedReferenceBlocks = Object.values(blocks)\r\n      .filter(referenceBlock => referenceBlock.parentId && titlePat.test(referenceBlock.text))\r\n    return unlinkedReferenceBlocks\r\n  }\r\n\r\n  const renderUnlinkedReferences = () => {\r\n    if (block.parentId || !showUnlinkedRefs) {\r\n      return\r\n    }\r\n    if (!unlinkedRefs.length) {\r\n      return <p>No unlinked references</p>\r\n    }\r\n    const unlinkedReferenceBlockEditors = unlinkedRefs\r\n      .map(referenceBlock => {\r\n        const referenceBlockPage = getPage(referenceBlock, blocks)\r\n        return (\r\n          <div key={referenceBlock.id}>\r\n            <PageLink blockId={referenceBlockPage.id}>\r\n              <h5>{referenceBlockPage.text}</h5>\r\n            </PageLink>\r\n            <div className=\"reference-container\">\r\n              <Editor\r\n                blockId={referenceBlock.id}\r\n                isRoot={false}\r\n                isMain={isMain}\r\n                fold\r\n                showBreadcrumbs\r\n              />\r\n            </div>\r\n          </div>\r\n        )\r\n      })\r\n    return unlinkedReferenceBlockEditors\r\n  }\r\n\r\n  const toggleUnlinkedReferences = event => {\r\n    if (showUnlinkedRefs) {\r\n      setShowUnlinkedRefs(false)\r\n    } else {\r\n      setShowUnlinkedRefs(true)\r\n      setUnlinkedRefs(getUnlinkedReferences(block.text))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {block.parentId === null && references && references.length > 0 && isMain &&\r\n        <div className=\"references references--linked\">\r\n          <span className=\"references__toggle no-select\" onClick={() => setShowLinkedRefs(state => !state)}>\r\n            {showLinkedRefs\r\n              ? <CaretDownFill color=\"white\" size={12} />\r\n              : <CaretRightFill color=\"white\" size={12} />\r\n            }\r\n            <b>{references.length} Linked References</b>\r\n          </span>\r\n          {showLinkedRefs &&\r\n            renderLinkedReferences()\r\n          }\r\n        </div>\r\n      }\r\n      {block.parentId === null && isMain &&\r\n        <div className=\"references references--unlinked\">\r\n          <span className=\"references__toggle no-select\" onClick={toggleUnlinkedReferences}>\r\n            {showUnlinkedRefs\r\n              ? <CaretDownFill color=\"white\" size={12} />\r\n              : <CaretRightFill color=\"white\" size={12} />\r\n            }\r\n            <b>{unlinkedRefs && unlinkedRefs.length ? unlinkedRefs.length : ''} Unlinked References</b>\r\n          </span>\r\n          {showUnlinkedRefs &&\r\n            renderUnlinkedReferences()\r\n          }\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default References","import getCaretCoordinates from 'textarea-caret'\r\n\r\nexport const getCaretInfo = (text, caretPos) => {\r\n  const wikiLinkRegex = /\\[\\[([^\\]]*(?:\\]\\])?)\\]\\]/gm\r\n  const matches = text.matchAll(wikiLinkRegex)\r\n\r\n  let startBracketIndex = -1\r\n  let endBracketIndex = -1\r\n  let caretInBrackets = false\r\n  let textInBrackets = null\r\n\r\n  for (const match of matches) {\r\n    const textWithBrackets = match[0]\r\n    const startBracketIndex = match.index\r\n    const endBracketIndex = startBracketIndex + textWithBrackets.length - 2\r\n    caretInBrackets = (startBracketIndex + 2) <= caretPos && caretPos <= endBracketIndex\r\n    if (caretInBrackets) {\r\n      textInBrackets = match[1]\r\n      return { startBracketIndex, endBracketIndex, caretInBrackets, textInBrackets }\r\n    }\r\n  }\r\n  return { startBracketIndex, endBracketIndex, caretInBrackets, textInBrackets }\r\n}\r\n\r\nexport const isCaretOnFirstRow = (textarea, lineHeight) => {\r\n  const { top } = getCaretCoordinates(textarea, textarea.selectionStart)\r\n  return top <= lineHeight\r\n}\r\n\r\nexport const isCaretOnLastRow = (textarea, lineHeight) => {\r\n  const { top } = getCaretCoordinates(textarea, textarea.selectionStart)\r\n  return textarea.offsetHeight <= top + lineHeight\r\n}","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nimport { BlockModel } from './blockModel'\r\nimport initialState from '../../redux/initialState'\r\n\r\nconst DEFAULT_TEXT = 'Click here to edit'\r\n\r\nconst blocksSlice = createSlice({\r\n  name: 'blocks',\r\n  initialState: initialState.blocks,\r\n  reducers: {\r\n    setBlocksState: (state, action) => {\r\n      const newState = action.payload\r\n      if (newState && typeof newState === 'object') {\r\n        return newState\r\n      }\r\n    },\r\n    addBlock: (state, action) => {\r\n      const block = action.payload\r\n      if (!block.parentId) {\r\n        const childBlock = BlockModel({ parentId: block.id, text: DEFAULT_TEXT }, state)\r\n        block.childrenIds.push(childBlock.id)\r\n        state[childBlock.id] = childBlock\r\n      } else {\r\n        const parentBlock = state[block.parentId]\r\n        parentBlock.childrenIds.push(block.id)\r\n      }\r\n      state[block.id] = block\r\n    },\r\n    removeBlock: (state, action) => {\r\n      const { blockId } = action.payload\r\n      const block = state[blockId]\r\n      // Only allowed on leaves\r\n      if (block.childrenIds.length) {\r\n        return\r\n      }\r\n      const parentBlock = state[block.parentId]\r\n      state[block.parentId].childrenIds = parentBlock.childrenIds.filter(childBlockId => childBlockId !== blockId)\r\n      delete state[blockId]\r\n    },\r\n    removePage: (state, action) => {\r\n      const { blockId } = action.payload\r\n      const block = state[blockId]\r\n      if (!block.childrenIds.length) {\r\n        delete state[blockId]\r\n        return\r\n      }\r\n      for (const childBlockId of block.childrenIds) {\r\n        blocksSlice.caseReducers.removePage(state, { payload: { blockId: childBlockId }})\r\n      }\r\n      delete state[blockId]\r\n    },\r\n    changeParent: (state, action) => {\r\n      const { blockId, parentId } = action.payload\r\n      const block = state[blockId]\r\n      block.parentId = parentId\r\n      const parentBlock = state[parentId]\r\n      parentBlock.childrenIds.push(blockId)\r\n    },\r\n    updateBlock: (state, action) => {\r\n      const { blockId, parentId, childrenIds, text } = action.payload\r\n      const block = state[blockId]\r\n      if (block) {\r\n        block.parentId = parentId || block.parentId\r\n        block.childrenIds = childrenIds || block.childrenIds\r\n        const currentText = block.text\r\n        block.text = typeof text === 'string' ? text : currentText\r\n        block.updated = Date.now()\r\n        state[blockId] = block\r\n        if (!block.parentId) {\r\n          blocksSlice.caseReducers.changeTitle(state, { payload: { currentTitle: currentText, newTitle: text } })\r\n        }\r\n      }\r\n    },\r\n    changeTitle: (state, action) => {\r\n      const { currentTitle, newTitle } = action.payload\r\n      const linkPat = new RegExp(`\\\\[\\\\[${currentTitle}\\\\]\\\\]`, 'g')\r\n      Object.values(state)\r\n        .map(block => {\r\n          if (linkPat.test(block.text)) {\r\n            state[block.id].text = block.text.replace(`[[${currentTitle}]]`, `[[${newTitle}]]`)\r\n          }\r\n          return true\r\n        })\r\n    },\r\n    repositionBlock: (state, action) => {\r\n      const { blockId, direction } = action.payload\r\n      const block = state[blockId]\r\n      const parentBlock = state[block.parentId]\r\n      const blockIndex = parentBlock.childrenIds.indexOf(block.id)\r\n      if (direction === 'forward') {\r\n        if (blockIndex > 0) {\r\n          const previousSibling = state[parentBlock.childrenIds[blockIndex-1]]\r\n          parentBlock.childrenIds.splice(blockIndex, 1)\r\n          previousSibling.childrenIds.push(blockId)\r\n          block.parentId = previousSibling.id\r\n        }\r\n      } else {\r\n        const parentBlock = state[block.parentId]\r\n        if (parentBlock.parentId) {\r\n          const grandParentBlock = state[parentBlock.parentId]\r\n          const parentBlockIndex = grandParentBlock.childrenIds.indexOf(parentBlock.id)\r\n          if (parentBlockIndex !== -1) {\r\n            parentBlock.childrenIds.splice(blockIndex, 1)\r\n            grandParentBlock.childrenIds.splice(parentBlockIndex + 1, 0, blockId)\r\n            block.parentId = grandParentBlock.id\r\n          }\r\n        }\r\n      }\r\n    },\r\n    makeSibling: (state, action) => {\r\n      const { firstSiblingBlockId, secondSiblingBlockId } = action.payload\r\n      const firstSibling = state[firstSiblingBlockId]\r\n      if (firstSibling.parentId) {\r\n        const secondSibling = state[secondSiblingBlockId]\r\n        if (secondSibling.parentId) {\r\n          const secondSiblingParent = state[secondSibling.parentId]\r\n          const secondSiblingIndex = secondSiblingParent.childrenIds.indexOf(secondSiblingBlockId)\r\n          secondSiblingParent.childrenIds.splice(secondSiblingIndex, 1)\r\n        }\r\n        const firstSiblingParent = state[firstSibling.parentId]\r\n        const firstSiblingIndex = firstSiblingParent.childrenIds.indexOf(firstSiblingBlockId)\r\n        state[firstSiblingParent.id].childrenIds.splice(firstSiblingIndex+1, 0, secondSiblingBlockId)\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\nexport const {\r\n  setBlocksState,\r\n  getBlockByText,\r\n  addBlock,\r\n  removeBlock,\r\n  removePage,\r\n  updateBlock,\r\n  repositionBlock,\r\n  makeSibling\r\n} = blocksSlice.actions\r\nexport default blocksSlice.reducer","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst editorSlice = createSlice({\r\n  name: 'editor',\r\n  initialState: {\r\n    focusedBlock: {\r\n        blockId: '',\r\n        isMain: true,\r\n        caretPos: 0\r\n    }\r\n  },\r\n  reducers: {\r\n    setEditorState: (state, action) => {\r\n      const newState = action.payload\r\n      if (newState && 'focusedBlock' in newState) {\r\n        return newState\r\n      }\r\n    },\r\n    updateFocusedBlock: (state, action) => {\r\n      state.focusedBlock = action.payload\r\n    }\r\n  }\r\n})\r\n\r\nexport const { setEditorState, updateFocusedBlock } = editorSlice.actions\r\nexport default editorSlice.reducer","import React from 'react';\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport './search.scss'\r\n\r\nimport PageLink from '../links/PageLink'\r\n\r\nconst Search = ({ query, useLinks, onResultClick, onlyPages, allowCreation, onCreateClick }) => {\r\n  const blocks = useSelector(state => state.blocks)\r\n\r\n  let suggestions = []\r\n  if (query && query.length) {\r\n    const searchResultBlocks = Object.values(blocks)\r\n      .filter(block => {\r\n        if (onlyPages && block.parentId !== null) {\r\n          return false\r\n        }\r\n        return block.text.indexOf(query) !== -1\r\n      })\r\n\r\n    suggestions = searchResultBlocks.map(block => {\r\n      if (useLinks) {\r\n        return (\r\n          <PageLink\r\n            blockId={block.id}\r\n            className=\"search-result\"\r\n            key={block.id}\r\n            afterClick={onResultClick}\r\n          >\r\n            {block.text}\r\n          </PageLink>\r\n        )\r\n      } else {\r\n        return (\r\n          <li\r\n            className=\"search-result\"\r\n            key={block.id}\r\n            onMouseDown={onResultClick.bind(null, block)}\r\n          >\r\n            {block.text}\r\n          </li>\r\n        )\r\n      }\r\n    })\r\n\r\n    if (allowCreation) {\r\n      const exactMatchExists = searchResultBlocks\r\n        .find(block => block.text === query) !== undefined\r\n      if (!exactMatchExists) {\r\n        const createPageLink =\r\n          <li\r\n            key={`new-page-${query}`}\r\n            className=\"search-result\"\r\n            onClick={onCreateClick}\r\n          >\r\n            <b>Create</b> {query}\r\n          </li>\r\n\r\n        suggestions.splice(0, 0, createPageLink)\r\n      }\r\n    } else if (!suggestions.length) {\r\n        const searchPlaceholder =\r\n          <li key={`default-suggestion`} className=\"search-result\">\r\n            <span>Search for a page</span>\r\n          </li>\r\n\r\n        suggestions.splice(0, 0, searchPlaceholder)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {suggestions.length > 0 &&\r\n        <div className=\"search-results\">\r\n          <ul className=\"list-group list-group-flush\">\r\n            {suggestions}\r\n          </ul>\r\n        </div>\r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Search","import React, { useState, useRef } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport TextareaAutosize from 'react-textarea-autosize'\r\nimport getCaretCoordinates from 'textarea-caret'\r\n\r\nimport { getCaretInfo, isCaretOnFirstRow, isCaretOnLastRow } from './editUtils'\r\nimport { BlockModel, getNextBlockUp, getNextBlockDown, isFirstPageChild } from './blockModel'\r\nimport { addBlock, removeBlock, updateBlock, repositionBlock, makeSibling } from './blockSlice'\r\nimport { updateFocusedBlock } from '../editor/editorSlice'\r\nimport Search from '../search/Search'\r\n\r\nconst EditBlock = ({ block, isMain, isTitle, cursorCaret, setCursorCaret, onRender }) => {\r\n  const dispatch = useDispatch()\r\n  const textarea = useRef(null)\r\n\r\n  const [searching, setSearching] = useState(false)\r\n  const focusedBlock = useSelector(state => state.editor.focusedBlock)\r\n  const blocks = useSelector(state => state.blocks)\r\n  const [query, setQuery] = useState(false)\r\n\r\n  const onKeyDown = event => {\r\n    if (event.key === 'Tab') {\r\n      onTab(event)\r\n    } else if (event.key === 'Enter' && !event.shiftKey) {\r\n      onEnter(event)\r\n    } else if (event.key === '[') {\r\n      onOpenBracket(event)\r\n    } else if (event.key === 'Backspace') {\r\n      onBackspace(event)\r\n    } else if (event.key === 'ArrowUp' || event.key === 'ArrowDown') {\r\n      onVerticalArrow(event)\r\n    }\r\n  }\r\n\r\n  const onKeyUp = event => {\r\n    const caretPos = event.target.selectionStart\r\n    const caretInfo = getCaretInfo(event.target.value, caretPos)\r\n    if (caretInfo.caretInBrackets) {\r\n      setSearching(true)\r\n      setQuery(caretInfo.textInBrackets)\r\n    } else {\r\n      setSearching(false)\r\n    }\r\n  }\r\n\r\n  const onTab = event => {\r\n    event.preventDefault()\r\n    save(event.target.value)\r\n    if (event.shiftKey) {\r\n      dispatch(repositionBlock({ blockId: block.id, direction: 'backward' }))\r\n    } else {\r\n      dispatch(repositionBlock({ blockId: block.id, direction: 'forward' }))\r\n    }\r\n    dispatch(updateFocusedBlock({ blockId: block.id, isMain, caretPos: event.target.selectionStart }))\r\n  }\r\n\r\n  const onEnter = event => {\r\n    event.preventDefault()\r\n    let newBlockText = ''\r\n    if (event.target.selectionStart !== event.target.value.length) {\r\n      // In-text Enter, cut\r\n      const start = event.target.selectionStart\r\n      newBlockText = block.text.substring(start)\r\n      const remainingText = block.text.substring(0, start)\r\n      dispatch(updateBlock({ blockId: block.id, text: remainingText }))\r\n      event.target.value = remainingText\r\n    }\r\n    const newBlock = BlockModel({ text: newBlockText, parentId: block.parentId }, blocks)\r\n    dispatch(addBlock(newBlock))\r\n    dispatch(makeSibling({ firstSiblingBlockId: block.id, secondSiblingBlockId: newBlock.id }))\r\n    dispatch(updateFocusedBlock({ blockId: newBlock.id, isMain, caretPos: 0 }))\r\n  }\r\n\r\n  const onOpenBracket = event => {\r\n    event.preventDefault()\r\n    const caretPos = event.target.selectionStart\r\n    const value = event.target.value\r\n    const prevChar = value.charAt(caretPos - 1)\r\n    event.target.value = value.substring(0, caretPos) + '[]' + value.substring(caretPos, value.length)\r\n    event.target.selectionStart = caretPos + 1\r\n    event.target.selectionEnd = caretPos + 1\r\n    if (prevChar === '[' && !searching) {\r\n      setSearching(true)\r\n      setQuery('')\r\n      return\r\n    } else {\r\n      setSearching(false)\r\n    }\r\n  }\r\n\r\n  const onBackspace = event => {\r\n    if (textarea.current.selectionStart !== 0) {\r\n      return\r\n    }\r\n    if (block.childrenIds.length) {\r\n      return\r\n    }\r\n    event.preventDefault()\r\n    const destinationBlock = getNextBlockUp(block, blocks)\r\n    if (!destinationBlock) {\r\n      return\r\n    }\r\n    const newCaretPos = destinationBlock.text.length\r\n    dispatch(updateBlock({ blockId: destinationBlock.id, text: destinationBlock.text + block.text }))\r\n    dispatch(removeBlock({ blockId: block.id }))\r\n    dispatch(updateFocusedBlock({ blockId: destinationBlock.id, isMain, caretPos: newCaretPos }))\r\n  }\r\n\r\n  const onVerticalArrow = event => {\r\n    const goingUp = event.key === 'ArrowUp'\r\n    const styling = window.getComputedStyle(event.target)\r\n    const lineHeight = parseInt(styling.getPropertyValue('line-height'))\r\n    const caretPos = event.target.selectionStart\r\n    const caretOnFirstRow = isCaretOnFirstRow(event.target, lineHeight)\r\n    const caretOnLastRow = isCaretOnLastRow(event.target, lineHeight)\r\n    if (caretOnFirstRow && goingUp && !isFirstPageChild(block, blocks)) {\r\n      const prevSibling = getNextBlockUp(block, blocks)\r\n      if (prevSibling) {\r\n        dispatch(updateFocusedBlock({ blockId: prevSibling.id, caretPos, isMain }))\r\n        event.preventDefault()\r\n      }\r\n    } else if (caretOnLastRow && !goingUp) {\r\n      const nextSibling = getNextBlockDown(block, blocks)\r\n      if (nextSibling) {\r\n        dispatch(updateFocusedBlock({ blockId: nextSibling.id, caretPos, isMain }))\r\n        event.preventDefault()\r\n      }\r\n    }\r\n  }\r\n\r\n  const insertPageTitleAtCursor = (blockToInsert, event) => {\r\n    event.preventDefault()\r\n    const title = blockToInsert.text\r\n    const value = textarea.current.value\r\n    const caretPos = textarea.current.selectionStart\r\n    const caretInfo = getCaretInfo(value, caretPos)\r\n    const beforeTitle = value.substring(0, caretInfo.startBracketIndex + 2)\r\n    const afterTitle = value.substring(caretInfo.endBracketIndex)\r\n    const newValue = beforeTitle + title + afterTitle\r\n    textarea.current.value = newValue\r\n    setSearching(false)\r\n    setQuery(null)\r\n    dispatch(updateBlock({ blockId: block.id, text: newValue }))\r\n  }\r\n\r\n  const translateCursorToCaretPos = (_textarea) => {\r\n    if (!_textarea) {\r\n      return\r\n    }\r\n\r\n    const symbolsToSkip = ['*', '_']\r\n    const originalText = _textarea.value\r\n\r\n    let minDistance = 10000\r\n    let translatedCaretPos = 0\r\n    let skippedSymbolIndexes = []\r\n    for (let caretPos = 0; caretPos <= _textarea.value.length; caretPos++) {\r\n      const currentChar = _textarea.value.charAt(caretPos)\r\n      if (symbolsToSkip.includes(currentChar)) {\r\n        const chars = _textarea.value.split('')\r\n        chars.splice(caretPos, 1)\r\n        _textarea.value = chars.join('')\r\n        skippedSymbolIndexes.push(caretPos)\r\n        caretPos--\r\n      }\r\n      const { left: x, top: y } = getCaretCoordinates(_textarea, caretPos)\r\n      const distance = Math.sqrt(Math.pow((x - cursorCaret.offsetX), 2) + Math.pow((y - cursorCaret.offsetY), 2))\r\n      if (distance < minDistance) {\r\n        minDistance = distance\r\n        translatedCaretPos = caretPos\r\n      }\r\n    }\r\n\r\n    _textarea.value = originalText\r\n    let newCaretPos = translatedCaretPos\r\n    if (skippedSymbolIndexes.length && skippedSymbolIndexes[0] <= newCaretPos) {\r\n      newCaretPos += skippedSymbolIndexes.filter(index => index <= translatedCaretPos).length\r\n    }\r\n    _textarea.selectionStart = newCaretPos\r\n    _textarea.selectionEnd = newCaretPos\r\n\r\n    setCursorCaret({ offsetX: null, offsetY: null, width: null })\r\n  }\r\n\r\n  const setCaretPos = event => {\r\n    if (isFocusedBlock) {\r\n      event.target.selectionStart = focusedBlock.caretPos\r\n      event.target.selectionEnd = focusedBlock.caretPos\r\n    } else if (cursorCaret.offsetX !== null) {\r\n      translateCursorToCaretPos(event.target)\r\n    }\r\n  }\r\n\r\n  const save = text => {\r\n    if (block.text !== text) {\r\n      dispatch(updateBlock({ blockId: block.id, text }))\r\n    }\r\n  }\r\n\r\n  const isFocusedBlock = focusedBlock.blockId\r\n    && focusedBlock.blockId === block.id\r\n    && focusedBlock.isMain === isMain\r\n    && !isNaN(focusedBlock.caretPos)\r\n\r\n  if (isFocusedBlock && textarea.current) {\r\n    textarea.current.focus()\r\n  }\r\n\r\n  const onBlur = event => {\r\n    dispatch(updateFocusedBlock({ blockId: null, caretPos: null, isMain: null }))\r\n    save(event.target.value)\r\n    onRender()\r\n  }\r\n\r\n  return (\r\n    <div className=\"block__autocomplete-container\">\r\n      <TextareaAutosize\r\n        ref={textarea}\r\n        className={`block-text block-text--edit${isTitle ? ' block-text--title': ''}`}\r\n        autoFocus\r\n        onFocus={setCaretPos}\r\n        onKeyDown={onKeyDown}\r\n        onKeyUp={onKeyUp}\r\n        onBlur={onBlur}\r\n        defaultValue={block.text}\r\n      />\r\n      {searching &&\r\n        <Search\r\n          query={query}\r\n          onlyPages\r\n          useLinks={false}\r\n          onResultClick={insertPageTitleAtCursor}\r\n        />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditBlock","import { createSlice } from '@reduxjs/toolkit'\r\n\r\n/* State:\r\n{\r\n  to: { destination: [source1, source2] }},\r\n  from: { source1: [destination], source2: [destination] }}\r\n}\r\n\r\n'to' holds backlinks, 'from' holds source blocks and helps build 'to'\r\n*/\r\n\r\nimport initialState from '../../redux/initialState'\r\n\r\nconst linksSlice = createSlice({\r\n  name: 'links',\r\n  initialState: initialState.links,\r\n  reducers: {\r\n    setLinksState: (state, action) => {\r\n      const newState = action.payload\r\n      if (newState && 'to' in newState && 'from' in newState) {\r\n        return newState\r\n      }\r\n    },\r\n    setLinks: (state, action) => {\r\n      const { sourceBlockId, linkedBlockIds } = action.payload\r\n      if (!sourceBlockId || !linkedBlockIds || !linkedBlockIds.length) {\r\n        return\r\n      }\r\n\r\n      let addedLinks\r\n\r\n      if (sourceBlockId in state.from) {\r\n        if (JSON.stringify(state.from[sourceBlockId].sort()) === JSON.stringify(linkedBlockIds.sort())) {\r\n          return\r\n        }\r\n\r\n        const removedLinks = state.from[sourceBlockId].filter(destinationBlockId => !linkedBlockIds.includes(destinationBlockId))\r\n        if (removedLinks.length) {\r\n          removedLinks.map(destinationBlockId => {\r\n            state.to[destinationBlockId] = state.to[destinationBlockId].filter(_sourceBlockId => sourceBlockId !== _sourceBlockId)\r\n            return true\r\n          })\r\n        }\r\n\r\n        addedLinks = linkedBlockIds.filter(destinationBlockId => !state.from[sourceBlockId].includes(destinationBlockId))\r\n      } else {\r\n        addedLinks = linkedBlockIds\r\n      }\r\n\r\n      if (addedLinks.length) {\r\n        addedLinks.map(destinationBlockId => {\r\n          if (!(destinationBlockId in state.to)) {\r\n            state.to[destinationBlockId] = []\r\n          }\r\n          state.to[destinationBlockId].push(sourceBlockId)\r\n          return true\r\n        })\r\n      }\r\n\r\n      state.from[sourceBlockId] = linkedBlockIds\r\n    },\r\n    removeBlockLinks: (state, action) => {\r\n      const { blockId } = action.payload\r\n      const destinationBlockIds = state.from[blockId]\r\n      linksSlice.caseReducers.setLinks(state, { payload: { sourceBlockId: blockId, linkedBlockIds: [] }})\r\n      if (destinationBlockIds) {\r\n        destinationBlockIds\r\n          .map(destinationBlockId => {\r\n            state.to[destinationBlockId] = state.to[destinationBlockId]\r\n              .filter(sourceBlockId => sourceBlockId !== blockId)\r\n            return true\r\n          })\r\n      }\r\n      delete state.from[blockId]\r\n    }\r\n  }\r\n})\r\n\r\nexport const { setLinksState, setLinks, removeBlockLinks } = linksSlice.actions\r\nexport default linksSlice.reducer","import React from 'react';\r\nimport { compiler } from 'markdown-to-jsx'\r\nimport reactStringReplace from \"react-string-replace\";\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport { addBlock } from './blockSlice'\r\nimport { BlockModel } from './blockModel'\r\nimport PageLink from '../links/PageLink'\r\nimport { setLinks } from '../links/linksSlice'\r\n\r\nconst RenderedBlock = React.memo(({ block, isTitle, onEdit }) => {\r\n  const dispatch = useDispatch()\r\n  const blocks = useSelector(state => state.blocks)\r\n  const linksFromBlock = useSelector(state => state.links.from[block.id])\r\n\r\n  const rendered = () => {\r\n    const linkedPlaintext = renderLinks(block.text)\r\n    const jsxMdArray = linkedPlaintext\r\n      .map(element => {\r\n        if (typeof element === 'string') {\r\n          const jsx = compiler(element)\r\n          const keyedJsx = React.cloneElement(jsx, { key: element })\r\n          return keyedJsx\r\n        }\r\n        return element\r\n      })\r\n    return jsxMdArray\r\n  }\r\n\r\n  const renderLinks = text => {\r\n    const pat = /\\[\\[([^[\\]]*)\\]\\]/g\r\n    const links = new Set()\r\n    const jsxArray = reactStringReplace(text, pat, (match, i) => {\r\n      const pageBlock = linkToPage(match)\r\n      links.add(pageBlock.id)\r\n      return (\r\n        <PageLink\r\n          key={`${match}-${i}`}\r\n          blockId={pageBlock.id}\r\n        >\r\n          {pageBlock.text}\r\n        </PageLink>\r\n      )\r\n    })\r\n    const linksArray = Array.from(links)\r\n    if (linksArray.length) {\r\n      if (linksFromBlock === undefined || !eqSet(new Set(linksArray), new Set(linksFromBlock))) {\r\n        dispatch(setLinks({ sourceBlockId: block.id, linkedBlockIds: linksArray }))\r\n      }\r\n    }\r\n    return jsxArray\r\n  }\r\n\r\n  const eqSet = (as, bs) => {\r\n    if (as.size !== bs.size) return false;\r\n    for (var a of as) if (!bs.has(a)) return false;\r\n    return true;\r\n  }\r\n\r\n  const linkToPage = text => {\r\n    const foundPage = Object.values(blocks)\r\n      .find(block => !block.parentId && block.text === text)\r\n    if (foundPage) {\r\n      return foundPage\r\n    }\r\n    const newPageBlock = BlockModel({ text }, blocks)\r\n    dispatch(addBlock(newPageBlock))\r\n    return newPageBlock\r\n  }\r\n\r\n  return (\r\n    <span\r\n      className={`block-text${isTitle ? ' block-text--title': ''}`}\r\n      onClick={onEdit}\r\n    >\r\n      {rendered(block.text)}\r\n    </span>\r\n  )\r\n})\r\n\r\nexport default RenderedBlock","import React, { useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport './block.scss'\r\n\r\nimport EditBlock from './EditBlock'\r\nimport RenderedBlock from './RenderedBlock'\r\n\r\nconst Block = ({ block, isMain, isTitle }) => {\r\n  const focusedBlock = useSelector(state => state.editor.focusedBlock)\r\n  const [editing, setEditing] = useState(focusedBlock.isMain === isMain && focusedBlock.blockId === block.id)\r\n  const [cursorCaret, setCursorCaret] = useState({ offsetX: null, offsetY: null, width: null })\r\n\r\n  const edit = event => {\r\n    if (block.dailyNote) {\r\n      // Don't allow daily note date titles to be edited\r\n      return\r\n    }\r\n    const clickPosX = event.clientX\r\n    const clickPosY = event.clientY\r\n    const blockX = event.currentTarget.offsetLeft\r\n    const blockY = event.currentTarget.offsetTop\r\n    const offsetX = clickPosX - blockX\r\n    const offsetY = clickPosY - blockY\r\n    const width = event.currentTarget.offsetWidth\r\n    setCursorCaret({ offsetX, offsetY, width })\r\n    setEditing(true)\r\n  }\r\n\r\n  const render = event => {\r\n    setEditing(false)\r\n  }\r\n\r\n  const isFocusedBlock = focusedBlock.blockId\r\n    && focusedBlock.blockId === block.id\r\n    && focusedBlock.isMain === isMain\r\n    && !isNaN(focusedBlock.caretPos)\r\n\r\n  if (isFocusedBlock && !editing) {\r\n    setEditing(true)\r\n  }\r\n\r\n  return (\r\n      <div className=\"block\">\r\n      {editing\r\n        ?\r\n          <EditBlock\r\n            block={block}\r\n            isMain={isMain}\r\n            isTitle={isTitle}\r\n            cursorCaret={cursorCaret}\r\n            setCursorCaret={setCursorCaret}\r\n            onRender={render}\r\n          />\r\n        :\r\n          <RenderedBlock\r\n            block={block}\r\n            isTitle={isTitle}\r\n            onEdit={edit}\r\n          />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Block","import React from 'react'\r\nimport { useSelector } from 'react-redux';\r\n\r\n//import \"./style.scss\"\r\n\r\nimport PageLink from '../links/PageLink'\r\n\r\nconst Breadcrumbs = ({ block }) => {\r\n  const blocks = useSelector(state => state.blocks)\r\n\r\n  const breadcrumbs = (parentBlockId, list = []) => {\r\n    if (!parentBlockId) {\r\n      return list.reverse()\r\n    }\r\n    const parentBlock = blocks[parentBlockId]\r\n    const crumb = <PageLink\r\n      blockId={parentBlockId}\r\n      key={parentBlockId}\r\n      isPage={parentBlock.parentId === null}\r\n      noStyling\r\n    >\r\n      {parentBlock.text}\r\n    </PageLink>\r\n    return breadcrumbs(parentBlock.parentId, list.concat(crumb))\r\n  }\r\n\r\n  return (\r\n    <div className=\"breadcrumbs text-muted\">\r\n      {breadcrumbs(block.parentId)}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Breadcrumbs","import React from 'react'\r\nimport { CaretRightFill, CaretDownFill } from 'react-bootstrap-icons'\r\n\r\nimport './block-actions.scss'\r\n\r\nimport PageLink from '../links/PageLink'\r\n\r\nconst BlockActions = React.memo(({ block, hasChildren, foldBlock, setFoldBlock }) => {\r\n  return (\r\n    <div className=\"block-actions-container\">\r\n      <span className={`block-actions block-actions--toggle${hasChildren ? '' : ' hidden'}`}>\r\n        {foldBlock &&\r\n          <CaretRightFill color=\"white\" onClick={() => setFoldBlock(false)} />\r\n        }\r\n        {!foldBlock &&\r\n          <CaretDownFill color=\"white\" onClick={() => setFoldBlock(true)} />\r\n        }\r\n      </span>\r\n      <PageLink\r\n        blockId={block.id}\r\n        noStyling\r\n        isPage={false}\r\n      >\r\n        <div className={`block-actions block-actions--bullet${foldBlock && hasChildren ? ' fold' : ''}`}>\r\n          <span>•</span>\r\n        </div>\r\n      </PageLink>\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default BlockActions","import React, { useState, useEffect } from 'react'\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport './editor.scss'\r\n\r\nimport References from './References'\r\nimport Block from '../block/Block'\r\nimport Breadcrumbs from './Breadcrumbs'\r\nimport BlockActions from '../block-actions/BlockActions';\r\n\r\nconst Editor = ({ blockId, isRoot, showBreadcrumbs = false, isMain, fold = false }) => {\r\n  const block = useSelector(state => state.blocks[blockId])\r\n  const [foldBlock, setFoldBlock] = useState(fold)\r\n  const [foldNextLevel, setFoldNextLevel] = useState(false)\r\n\r\n  // Make sure fold prop informs the foldBlock hook state on update\r\n  useEffect(() => {\r\n    setFoldBlock(fold);\r\n   }, [fold])\r\n\r\n  if (!block) {\r\n    return <h1 className=\"text-light\">Page not found</h1>\r\n  }\r\n\r\n  const isPage = block.parentId === null\r\n  const isTitle = isPage && isRoot\r\n\r\n  const children = block.childrenIds.map(childBlockId => (\r\n    <Editor\r\n      key={childBlockId}\r\n      isRoot={false}\r\n      isMain={isMain}\r\n      blockId={childBlockId}\r\n      fold={foldNextLevel}\r\n    />\r\n  ))\r\n\r\n  return (\r\n    <div className={`editor ${isRoot ? 'editor--root' : 'editor--child'}${isPage ? ' editor--page' : ''}`}>\r\n      {(showBreadcrumbs || (isRoot && !isPage)) &&\r\n        <Breadcrumbs block={block} />\r\n      }\r\n      <div className=\"d-flex\">\r\n        {!isTitle &&\r\n          <BlockActions\r\n            block={block}\r\n            foldBlock={foldBlock}\r\n            setFoldBlock={setFoldBlock}\r\n            hasChildren={children.length > 0}\r\n          />\r\n        }\r\n        <Block\r\n          block={block}\r\n          isTitle={isTitle}\r\n          isMain={isMain}\r\n        />\r\n      </div>\r\n      {!foldBlock && children.length > 0 &&\r\n        <div className=\"editor__children\">\r\n          {block.parentId !== null &&\r\n            <div\r\n              className=\"editor__children__thread-line\"\r\n              onClick={() => setFoldNextLevel(!foldNextLevel)}\r\n            />\r\n          }\r\n          <div className=\"editor__children__container\">\r\n            {children}\r\n          </div>\r\n        </div>\r\n      }\r\n      {isRoot &&\r\n        <References\r\n          block={block}\r\n          isMain={isMain}\r\n          key={block.id}\r\n        />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Editor","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nconst navbarSlice = createSlice({\r\n  name: 'navbar',\r\n  initialState: {\r\n    searchQuery: ''\r\n  },\r\n  reducers: {\r\n    setNavbarState: (state, action) => {\r\n      const newState = action.payload\r\n      if (newState && 'searchQuery' in newState) {\r\n        return newState\r\n      }\r\n    },\r\n    updateSearchQuery: (state, action) => {\r\n      const { query } = action.payload\r\n      state.searchQuery = query\r\n    }\r\n  }\r\n})\r\n\r\nexport const { setNavbarState, updateSearchQuery, removeShortcut } = navbarSlice.actions\r\nexport default navbarSlice.reducer","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nimport initialState from \"../../redux/initialState\";\r\n\r\nconst filePaneSlice = createSlice({\r\n  name: 'filePane',\r\n  initialState: initialState.filePane,\r\n  reducers: {\r\n    setFilePaneState: (state, action) => {\r\n      const newState = action.payload\r\n      if (newState && 'favoriteBlockIds' in newState) {\r\n        return newState\r\n      }\r\n    },\r\n    toggleShortcut: (state, action) => {\r\n      const { blockId } = action.payload\r\n      const index = state.favoriteBlockIds.indexOf(blockId)\r\n      if (index > -1) {\r\n        state.favoriteBlockIds = state.favoriteBlockIds.filter(favoriteBlockId => blockId !== favoriteBlockId)\r\n      } else {\r\n        state.favoriteBlockIds.push(blockId)\r\n      }\r\n    },\r\n    removeShortcut: (state, action) => {\r\n      const { blockId } = action.payload\r\n      state.favoriteBlockIds = state.favoriteBlockIds.filter(favoriteBlockId => favoriteBlockId !== blockId)\r\n    }\r\n  }\r\n})\r\n\r\nexport const { setFilePaneState, toggleShortcut, removeShortcut } = filePaneSlice.actions\r\nexport default filePaneSlice.reducer","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { Star, StarFill, Search as SearchIcon } from 'react-bootstrap-icons'\r\n\r\nimport './navbar.scss'\r\n\r\nimport { updateSearchQuery } from './navbarSlice'\r\nimport { toggleShortcut } from '../file-pane/filePaneSlice'\r\nimport { addBlock } from '../block/blockSlice'\r\nimport { BlockModel } from '../block/blockModel'\r\nimport Search from '../search/Search'\r\n\r\nconst Navbar = ({ blockId }) => {\r\n  const dispatch = useDispatch()\r\n  const searchQuery = useSelector(state => state.navbar.searchQuery)\r\n  const blocks = useSelector(state => state.blocks)\r\n  const favoriteBlockIds = useSelector(state => state.filePane.favoriteBlockIds)\r\n  const history = useHistory()\r\n\r\n  const getRoot = block => {\r\n    if (!block.parentId) {\r\n      return block.id\r\n    }\r\n    return getRoot(blocks[block.parentId])\r\n  }\r\n\r\n  let isFavorite\r\n  if (blockId) {\r\n    const block = blocks[blockId]\r\n    if (block) {\r\n      const rootBlockId = getRoot(block)\r\n      isFavorite = favoriteBlockIds.includes(rootBlockId)\r\n    }\r\n  }\r\n\r\n  const toggleFavorite = event => {\r\n    const rootBlockId = getRoot(blocks[blockId])\r\n    dispatch(toggleShortcut({ blockId: rootBlockId }))\r\n  }\r\n\r\n  let favoriteButton\r\n  if (isFavorite !== undefined) {\r\n    if (isFavorite) {\r\n      favoriteButton = <StarFill color=\"white\" />\r\n    } else {\r\n      favoriteButton = <Star color=\"white\" />\r\n    }\r\n  }\r\n\r\n  const clearSearch = event => {\r\n    dispatch(updateSearchQuery({ query: '' }))\r\n  }\r\n\r\n  const createAndNavigateToPage = () => {\r\n    const page = BlockModel({ text: searchQuery }, blocks)\r\n    dispatch(addBlock(page))\r\n    clearSearch()\r\n    history.push(`/page/${page.id}`)\r\n  }\r\n\r\n  return (\r\n    <div className=\"navbar\">\r\n      <div className=\"search-container\">\r\n        <div className=\"input-group\">\r\n          <div className=\"input-group-prepend\">\r\n            <span className=\"input-group-text bg-dark text-dark border-secondary\"><SearchIcon color=\"white\" /></span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control bg-dark text-light border-secondary\"\r\n            placeholder=\"Find or Create Page\"\r\n            onChange={(event) => dispatch(updateSearchQuery({ query: event.target.value }))}\r\n            value={searchQuery}\r\n          />\r\n        </div>\r\n        <Search\r\n          query={searchQuery}\r\n          useLinks\r\n          onResultClick={clearSearch}\r\n          allowCreation\r\n          onCreateClick={createAndNavigateToPage}\r\n        />\r\n      </div>\r\n      {favoriteButton !== undefined &&\r\n        <button className=\"btn btn--toggle-favorite\" onClick={toggleFavorite}>{favoriteButton}</button>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Navbar","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport dayjs from 'dayjs'\r\nimport advancedFormat from 'dayjs/plugin/advancedFormat'\r\n\r\nimport Editor from '../editor/Editor'\r\nimport { addBlock } from '../block/blockSlice'\r\nimport { BlockModel, DAILY_NOTE_STORAGE_FORMAT, DAILY_NOTE_DISPLAY_FORMAT } from '../block/blockModel'\r\n\r\nimport './daily-notes.scss'\r\n\r\ndayjs.extend(advancedFormat)\r\n\r\nconst DailyNotes = props => {\r\n  const dispatch = useDispatch()\r\n  const blocks = useSelector(state => state.blocks)\r\n  const dailyNoteBlocks = Object.values(blocks)\r\n    .filter(block => !!block.dailyNote)\r\n    .sort((blockA, blockB) => blockA.dailyNote.localeCompare(blockB.dailyNote))\r\n    .reverse()\r\n\r\n  // Create today's note if it doesn't exist\r\n  const today = dayjs()\r\n  const todayFormattedDate = today.format(DAILY_NOTE_DISPLAY_FORMAT)\r\n  let todayDailyNoteBlock = dailyNoteBlocks.find(block => block.text === todayFormattedDate)\r\n  if (!todayDailyNoteBlock) {\r\n    todayDailyNoteBlock = BlockModel({ text: todayFormattedDate, dailyNote: today.format(DAILY_NOTE_STORAGE_FORMAT) }, blocks)\r\n    dispatch(addBlock(todayDailyNoteBlock))\r\n  }\r\n\r\n  const dailyNoteEditors = dailyNoteBlocks\r\n    .map(block => <Editor key={block.id} blockId={block.id} isMain isRoot />)\r\n\r\n  return (\r\n    <div className=\"daily-notes\">\r\n      {dailyNoteEditors}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DailyNotes","import { useSelector, useDispatch } from 'react-redux'\r\nimport { saveAs } from 'file-saver'\r\nimport JSZip from 'jszip'\r\n\r\nimport './io.scss'\r\n\r\nimport { setBlocksState } from \"../block/blockSlice\";\r\nimport { setEditorState } from \"../editor/editorSlice\";\r\nimport { setFilePaneState } from \"../file-pane/filePaneSlice\";\r\nimport { setLinksState } from \"../links/linksSlice\";\r\nimport { setNavbarState } from \"../navbar/navbarSlice\";\r\nimport { setViewPaneState } from \"../view-pane/viewPaneSlice\";\r\n\r\nexport const save = files => {\r\n  const zip = new JSZip()\r\n  files.map(file => {\r\n    const { content, fileName } = file\r\n    zip.file(fileName || 'free-roam.json', JSON.stringify(content))\r\n    return true\r\n  })\r\n  zip.generateAsync({type:\"blob\"})\r\n    .then(content => {\r\n      saveAs(content, `Free-Roam-Export-${Date.now()}`)\r\n    })\r\n}\r\n\r\nconst IO = props => {\r\n  const dispatch = useDispatch()\r\n  const s = useSelector(state => state)\r\n\r\n  const load = event => {\r\n    event.preventDefault()\r\n    const reader = new FileReader()\r\n    reader.onload = event => {\r\n      const newState = JSON.parse(event.target.result)\r\n      if ('blocks' in newState) {\r\n        dispatch(setBlocksState(newState.blocks))\r\n      }\r\n      if ('editor' in newState) {\r\n        dispatch(setEditorState(newState.editor))\r\n      }\r\n      if ('filePane' in newState) {\r\n        dispatch(setFilePaneState(newState.filePane))\r\n      }\r\n      if ('links' in newState) {\r\n        dispatch(setLinksState(newState.links))\r\n      }\r\n      if ('navbar' in newState) {\r\n        dispatch(setNavbarState(newState.navbar))\r\n      }\r\n      if ('viewPane' in newState) {\r\n        dispatch(setViewPaneState(newState.viewPane))\r\n      }\r\n    }\r\n    reader.readAsText(event.target.files[0])\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex justify-content-center\">\r\n      <label className=\"load-button-input mr-3\">\r\n        <input type=\"file\" className=\"btn btn-secondary\" accept=\".json\" onChange={load} />\r\n      </label>\r\n      <button className=\"btn btn-secondary\" onClick={() => save([{ content: s, fileName: 'free-roam.json' }])}>Save</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default IO","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useTable, useSortBy, useRowSelect } from 'react-table'\r\nimport { ChevronDown, ChevronUp, Trash, Download } from 'react-bootstrap-icons'\r\n\r\nimport { save } from '../io/io'\r\nimport { serialize, flattenTreeIds } from '../block/blockModel'\r\nimport { updateBlock, removePage } from '../block/blockSlice'\r\nimport { popView } from '../view-pane/viewPaneSlice'\r\nimport { removeShortcut } from '../file-pane/filePaneSlice'\r\nimport { removeBlockLinks } from '../links/linksSlice'\r\n\r\nconst IndeterminateCheckbox = React.forwardRef(\r\n  ({ indeterminate, ...rest }, ref) => {\r\n    const defaultRef = React.useRef()\r\n    const resolvedRef = ref || defaultRef\r\n\r\n    React.useEffect(() => {\r\n      resolvedRef.current.indeterminate = indeterminate\r\n    }, [resolvedRef, indeterminate])\r\n\r\n    return (\r\n      <>\r\n        <input type=\"checkbox\" ref={resolvedRef} {...rest} />\r\n      </>\r\n    )\r\n  }\r\n)\r\n\r\nconst PagesTable = ({ columns, data }) => {\r\n  const dispatch = useDispatch()\r\n  const blocks = useSelector(state => state.blocks)\r\n  const linksToBlocks = useSelector(state => state.links.to)\r\n\r\n  const downloadRows = rows => {\r\n    if (!rows.length) {\r\n      return\r\n    }\r\n    const files = rows\r\n      .map(row => row.original.blockId)\r\n      .map(blockId => {\r\n        const block = blocks[blockId]\r\n        return { content: serialize(block, blocks), fileName: `${block.text}.json`}\r\n      })\r\n    save(files)\r\n  }\r\n\r\n  /**\r\n   * Delete pages\r\n   * This will:\r\n   *   - Remove all children blocks of pages\r\n   *   - Remove all links to and from the pages' children blocks\r\n   *   - Remove all shortcuts to pages\r\n   * @param {object} rows - table rows\r\n   */\r\n  const deleteRows = rows => {\r\n    if (!rows.length) {\r\n      return\r\n    }\r\n    rows\r\n      .map(row => row.original.blockId)\r\n      .map(blockId => {\r\n        const block = blocks[blockId]\r\n        const treeIds = flattenTreeIds(blocks[blockId], blocks)\r\n        treeIds.map(treeBlockId => {\r\n          dispatch(popView({ type: 'all', blockId: treeBlockId }))\r\n          const blocksLinkingToBlockId = linksToBlocks[treeBlockId] || []\r\n          blocksLinkingToBlockId.map(sourceBlockId => {\r\n            const sourceBlock = blocks[sourceBlockId]\r\n            const linkRegex = new RegExp(`\\\\[\\\\[(${block.text})\\\\]\\\\]`, 'g')\r\n            const updatedText = sourceBlock.text.replace(linkRegex, '$1')\r\n            dispatch(updateBlock({ blockId: sourceBlockId, text: updatedText }))\r\n            return true\r\n          })\r\n          dispatch(removeBlockLinks({ blockId: treeBlockId }))\r\n          return true\r\n        })\r\n        dispatch(removeShortcut({ blockId }))\r\n        dispatch(removePage({ blockId }))\r\n        return true\r\n      })\r\n  }\r\n\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n    selectedFlatRows,\r\n    state: { selectedRowIds }\r\n  } = useTable(\r\n    {\r\n      columns,\r\n      data,\r\n    },\r\n    useSortBy,\r\n    useRowSelect,\r\n    hooks => {\r\n      hooks.visibleColumns.push(columns => [\r\n        {\r\n          id: 'selection',\r\n          Header: ({ getToggleAllRowsSelectedProps }) => (\r\n            <div>\r\n              <IndeterminateCheckbox {...getToggleAllRowsSelectedProps()} />\r\n            </div>\r\n          ),\r\n          Cell: ({ row }) => (\r\n            <div>\r\n              <IndeterminateCheckbox {...row.getToggleRowSelectedProps()} />\r\n            </div>\r\n          ),\r\n        },\r\n        ...columns,\r\n      ])\r\n    }\r\n  )\r\n  return (\r\n    <>\r\n      <div className=\"all-pages__toolbar\">\r\n        <Trash\r\n          onClick={() => deleteRows(selectedFlatRows)}\r\n          className={`mr-3 all-pages__button${Object.keys(selectedRowIds).length ? ' active': ''}`}\r\n        />\r\n        <Download\r\n          onClick={() => downloadRows(selectedFlatRows)}\r\n          className={`all-pages__button${Object.keys(selectedRowIds).length ? ' active': ''}`}\r\n        />\r\n        <div className=\"flex-grow-1\" />\r\n      </div>\r\n      <table className=\"table table-dark\" {...getTableProps()}>\r\n        <thead className=\"thead-dark\">\r\n          {headerGroups.map(headerGroup => (\r\n            <tr {...headerGroup.getHeaderGroupProps()}>\r\n              {headerGroup.headers.map(column => (\r\n                <th scope=\"col\" {...column.getHeaderProps([\r\n                  {\r\n                    className: column.className,\r\n                  },\r\n                  column.getSortByToggleProps(),\r\n                ])}>\r\n                  {column.render('Header')}\r\n                  <span>\r\n                    {column.isSorted\r\n                      ? column.isSortedDesc\r\n                        ? <ChevronDown color=\"white\" />\r\n                        : <ChevronUp color=\"white\" />\r\n                      : ''}\r\n                  </span>\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          ))}\r\n        </thead>\r\n        <tbody {...getTableBodyProps()}>\r\n          {rows.map(\r\n            (row, i) => {\r\n              prepareRow(row)\r\n              return (\r\n                <tr {...row.getRowProps()}>\r\n                  {row.cells.map(cell => {\r\n                    return (\r\n                      <td {...cell.getCellProps([\r\n                        {\r\n                          className: cell.column.className,\r\n                        }\r\n                      ])}>\r\n                        {cell.render('Cell')}\r\n                      </td>\r\n                    )\r\n                  })}\r\n                </tr>\r\n              )}\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PagesTable","import React, { useCallback } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport dayjs from 'dayjs'\r\nimport advancedFormat from 'dayjs/plugin/advancedFormat'\r\n\r\nimport PagesTable from './PagesTable'\r\nimport { DAILY_NOTE_DISPLAY_FORMAT } from '../block/blockModel'\r\nimport PageLink from '../links/PageLink'\r\nimport { pushView } from '../view-pane/viewPaneSlice'\r\n\r\nimport './all-pages.scss'\r\n\r\ndayjs.extend(advancedFormat)\r\n\r\nconst getData = (blocks, linksToBlocks) => {\r\n  return Object.values(blocks)\r\n    .filter(block => !block.parentId)\r\n    .map(block => ({\r\n      text: block.text,\r\n      blockId: block.id,\r\n      created: block.created,\r\n      updated: block.updated,\r\n      mentions: linksToBlocks[block.id] || []\r\n    }))\r\n}\r\n\r\n\r\nconst AllPages = props => {\r\n  const dispatch = useDispatch()\r\n  const blocks = useSelector(state => state.blocks)\r\n  const linksToBlocks = useSelector(state => state.links.to)\r\n\r\n  const onMentionClick = useCallback((blockId, event) => {\r\n    dispatch(pushView({ type: 'references', blockId }))\r\n  }, [dispatch])\r\n\r\n  const columns = React.useMemo(\r\n    () => [\r\n      {\r\n        Header: 'Title',\r\n        className: 'font-weight-bold',\r\n        accessor: (row) => <PageLink key={row.blockId} blockId={row.blockId}>{row.text}</PageLink>,\r\n        sortType: (rowA, rowB, id, desc) => rowA.original.text.localeCompare(rowB.original.text)\r\n      }, {\r\n        Header: 'Mentions',\r\n        accessor: 'mentions',\r\n        className: 'text-center',\r\n        Cell: ({ row, value }) => <div className=\"mentions-bubble\" onClick={onMentionClick.bind(null, row.original.blockId)}><span>{value.length}</span></div>,\r\n        sortType: (rowA, rowB, id, desc) => rowA.original.mentions.length - rowB.original.mentions.length\r\n      }, {\r\n        Header: 'Updated',\r\n        accessor: 'updated',\r\n        className: 'text-right',\r\n        Cell: ({ value }) => value ? dayjs(value).format(DAILY_NOTE_DISPLAY_FORMAT) : null\r\n      }, {\r\n        Header: 'Created',\r\n        accessor: 'created',\r\n        className: 'text-right',\r\n        Cell: ({ value }) => value ? dayjs(value).format(DAILY_NOTE_DISPLAY_FORMAT) : null\r\n      }\r\n    ],\r\n    [onMentionClick]\r\n  )\r\n\r\n  const data = React.useMemo(() => getData(blocks, linksToBlocks), [blocks, linksToBlocks])\r\n\r\n  return (\r\n    <div className=\"all-pages\">\r\n      <PagesTable columns={columns} data={data} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AllPages","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nimport './main.scss'\r\n\r\nimport Editor from '../editor/Editor'\r\nimport Navbar from '../navbar/Navbar'\r\nimport DailyNotes from '../daily-notes/DailyNotes'\r\nimport AllPages from '../all-pages/AllPages'\r\n\r\nconst Main = props => {\r\n  return (\r\n    <div className=\"main\">\r\n      <Route exact path=\"/\">\r\n        <Redirect to=\"/page/welcome\" />\r\n      </Route>\r\n      <Route\r\n        path=\"/page/:blockId\"\r\n        render={({ match }) => (\r\n          <>\r\n            <Navbar blockId={match.params.blockId} />\r\n            <div className=\"stage\">\r\n              <Editor blockId={match.params.blockId} isRoot isMain />\r\n            </div>\r\n          </>\r\n        )}\r\n      />\r\n      <Route\r\n        path=\"/daily-notes\"\r\n        render={() => (\r\n          <>\r\n            <Navbar />\r\n            <div className=\"stage\">\r\n              <DailyNotes />\r\n            </div>\r\n          </>\r\n        )}\r\n      />\r\n      <Route\r\n        path=\"/all-pages\"\r\n        render={() => (\r\n          <>\r\n            <Navbar />\r\n            <div className=\"stage\">\r\n              <AllPages />\r\n            </div>\r\n          </>\r\n        )}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Main","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { StarFill } from \"react-bootstrap-icons\";\r\n\r\nimport PageLink from '../links/PageLink'\r\n\r\nfunction Shortcuts(props) {\r\n  const blocks = useSelector(state => state.blocks)\r\n  const favoriteBlockIds = useSelector(state => state.filePane.favoriteBlockIds)\r\n\r\n  const pageListItems = favoriteBlockIds.map(blockId => {\r\n    const block = blocks[blockId]\r\n    return (\r\n      <PageLink\r\n        blockId={blockId}\r\n        key={blockId}\r\n        className=\"list-group-item list-group-item-action bg-dark text-light\"\r\n      >\r\n        {block.text}\r\n      </PageLink>\r\n    )\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <h5><StarFill color=\"white\" width=\"15px\" style={{ marginRight: \"10px\" }} />Shortcuts</h5>\r\n      <div className=\"list-group list-group-flush mt-3\">\r\n        {pageListItems}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Shortcuts","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Calendar3, Justify, List, CaretLeftFill } from 'react-bootstrap-icons'\r\n\r\nimport './file-pane.scss'\r\n\r\nimport Shortcuts from './Shortcuts'\r\nimport IO from '../io/io'\r\n\r\nconst FilePane = ({ setShowFilePane }) => {\r\n  return (\r\n    <div className=\"pane file-pane\">\r\n      <div className=\"hide-sidebar\" onClick={() => setShowFilePane(false)}>\r\n        <div className=\"hide-sidebar__button\"><CaretLeftFill size={10} style={{marginRight: \"-3px\"}} /><List size={20}/></div>\r\n      </div>\r\n      <Link to=\"/\"><h2 className=\"text-light text-center\">Free-roam</h2></Link>\r\n      <IO />\r\n      <div className=\"list-group list-group-flush mt-3\">\r\n        <Link to=\"/daily-notes\" className=\"list-group-item list-group-item-action bg-dark text-light\">\r\n          <Calendar3 color=\"white\" /> Daily Notes\r\n        </Link>\r\n        <Link to=\"/all-pages\" className=\"list-group-item list-group-item-action bg-dark text-light\">\r\n          <Justify color=\"white\" /> All Pages\r\n        </Link>\r\n      </div>\r\n      <hr />\r\n      <Shortcuts />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FilePane","import React, { useState } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { X, CaretRightFill, CaretDownFill } from 'react-bootstrap-icons'\r\n\r\nimport { pushView, popView } from './viewPaneSlice'\r\nimport Editor from '../editor/Editor'\r\nimport PageLink from '../links/PageLink'\r\nimport References from '../editor/References'\r\n\r\nconst ViewPaneBlock = ({ view }) => {\r\n  const [showBlock, setShowBlock] = useState(true)\r\n  const blocks = useSelector(state => state.blocks)\r\n  const links = useSelector(state => state.links)\r\n  const dispatch = useDispatch()\r\n\r\n  const closeBlock = (type, blockId, event) => {\r\n    dispatch(popView({ type, blockId }))\r\n  }\r\n\r\n  const header = (type, block, show) => {\r\n    let output\r\n    switch (type) {\r\n      case 'page':\r\n        output = <span>Outline of {show ? ':' : <b><PageLink blockId={block.id}>{block.text}</PageLink></b>}</span>\r\n        break\r\n      case 'block':\r\n        output = <span>Block outline of {show ? ':' : <b><PageLink blockId={block.id}>{block.text}</PageLink></b>}</span>\r\n        break\r\n      case 'references':\r\n        output = <span>References to: <PageLink blockId={block.id}>{block.text}</PageLink></span>\r\n        break\r\n      default:\r\n        output = <span>Outline of</span>\r\n        break\r\n    }\r\n    return output\r\n  }\r\n\r\n  const { type, blockId } = view\r\n  if (!(blockId in blocks)) {\r\n    return null\r\n  }\r\n  const block = blocks[blockId]\r\n  const references = links.to[block.id] || []\r\n  return (\r\n    <div\r\n      key={`${type}-${block.id}`}\r\n      className=\"view-pane__section\"\r\n    >\r\n      <div className=\"d-flex align-items-center\">\r\n        <span className=\"references__toggle no-select\" onClick={() => setShowBlock(state => !state)}>\r\n          {showBlock\r\n            ? <CaretDownFill color=\"white\" size={12} />\r\n            : <CaretRightFill color=\"white\" size={12} />\r\n          }\r\n          {header(type, block, showBlock)}\r\n        </span>\r\n        <div className=\"flex-grow-1\" />\r\n        {type === 'page' &&\r\n          <button\r\n            className=\"btn btn-dark btn-sm px-1 py-0\"\r\n            onClick={() => dispatch(pushView({ type: 'references', blockId }))}\r\n          >\r\n            {references.length}\r\n          </button>\r\n        }\r\n        <X\r\n          className=\"btn-close\"\r\n          onClick={closeBlock.bind(null, type, block.id)}\r\n        />\r\n      </div>\r\n      {showBlock\r\n        ? type === 'references'\r\n          ? <References block={block} isMain />\r\n          : <Editor blockId={block.id} isRoot isMain={false} />\r\n        : null\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ViewPaneBlock","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { CaretRightFill, List } from \"react-bootstrap-icons\";\r\n\r\nimport './view-pane.scss'\r\n\r\nimport ViewPaneBlock from './ViewPaneBlock'\r\n\r\nconst ViewPane = ({ setShowViewPane }) => {\r\n  const views = useSelector(state => state.viewPane.views)\r\n  const viewPaneBlocks = views.map(view => <ViewPaneBlock view={view} />)\r\n\r\n  return (\r\n    <div className=\"pane view-pane\">\r\n      <div className=\"hide-sidebar\" onClick={() => setShowViewPane(false)}>\r\n        <div className=\"hide-sidebar__button\">\r\n          <List size={20}/>\r\n          <CaretRightFill size={10} style={{marginLeft: \"-3px\"}} />\r\n        </div>\r\n      </div>\r\n      {viewPaneBlocks}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ViewPane","import React, { useState } from 'react'\r\nimport { HashRouter as Router } from 'react-router-dom';\r\nimport { List } from 'react-bootstrap-icons'\r\n\r\nimport './App.scss'\r\n\r\nimport Main from './features/main/Main'\r\nimport FilePane from './features/file-pane/FilePane'\r\nimport ViewPane from './features/view-pane/ViewPane'\r\n\r\nconst App = () => {\r\n  const [showFilePane, setShowFilePane] = useState(true)\r\n  const [showViewPane, setShowViewPane] = useState(true)\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        {showFilePane\r\n          ? <FilePane setShowFilePane={setShowFilePane} />\r\n          : <div className=\"show-sidebar__button\" onClick={() => setShowFilePane(true)}>\r\n              <List size={20} />\r\n            </div>\r\n        }\r\n        <Main />\r\n        {showViewPane\r\n          ? <ViewPane setShowViewPane={setShowViewPane} />\r\n          : <div className=\"show-sidebar__button\" onClick={() => setShowViewPane(true)}>\r\n              <List size={20} />\r\n            </div>\r\n        }\r\n      </Router>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import { configureStore } from '@reduxjs/toolkit'\r\n\r\nimport blocksReducer from '../features/block/blockSlice'\r\nimport filePaneReducer from '../features/file-pane/filePaneSlice'\r\nimport viewPaneReducer from '../features/view-pane/viewPaneSlice'\r\nimport navbarReducer from '../features/navbar/navbarSlice'\r\nimport linksReducer from '../features/links/linksSlice'\r\nimport editorReducer from '../features/editor/editorSlice'\r\n\r\nexport const reducer = {\r\n  blocks: blocksReducer,\r\n  filePane: filePaneReducer,\r\n  viewPane: viewPaneReducer,\r\n  navbar: navbarReducer,\r\n  links: linksReducer,\r\n  editor: editorReducer\r\n}\r\n\r\nconst store = configureStore({\r\n  reducer\r\n})\r\n\r\nexport default store","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport reportWebVitals from './reportWebVitals'\r\nimport App from './App'\r\nimport store from './redux/store'\r\n\r\nimport './index.scss'\r\n\r\nwindow.addEventListener('beforeunload', event => {\r\n  event.preventDefault()\r\n  event.returnValue = ''\r\n})\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n"],"sourceRoot":""}